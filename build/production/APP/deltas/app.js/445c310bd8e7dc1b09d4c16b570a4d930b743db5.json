["function _50145c5ee7494cf67ebe5b8c5ef0826ed3a3ca",48,671308,"c){var h=this,a=h.getMenuNav(),b=h.getOpcionesOrden(),k=c.get(\"action\"),d=a.getNavigationBar().getTitle(),l",669801,38,"a",671487,52,"b",671540,156,"d",671707,169,"d;this.getNavigationOrden().add(l);break;case\"visualizar\":if(a",671981,50,"b",672032,133,"d});j.load();a",672192,37,"d",672240,2502,"j){if(j==\"yes\"){var f=b",674768,50,",h=g.getTitle().getTitle();a.removeAll(",693264,32,"0);f.remove(g,false);console.log(h);b.getMenuNav().remove(b.getMenuNav().down(\"toolbar\"));b.getMenuNav().add(g)}else{d.setActiveItem(0)}}",674916,907,"console.log(e,\"La actual\");console.log(a,\"La que eleg\\xed\");",675823,306,675679,45,"=d;",676129,451,"c,b){var f=this,e=f",676599,45,673661,47,",a=f",676727,304,"c",685072,42,"h){if(h.Procesada){f.getOpcionesOrden().tipoCamb",677100,36,"var g",677655,32,";console.log(g);console.log(f.getOpcionesOrden().tipoCambio",677134,40,"f",677175,36,"f",677212,34,673663,45,"=c;console.log(",673663,45,");e.setValues({CodigoMoneda:c,tipoCambio:g});f",677294,34,"f.actualizaOrden(c)}}else{var j=h.Descripcion;f",677375,427,"precioConDescuent",677807,163,"precioConDescuent",678333,73,678048,112,"precioConDescuento\"))/b;c",686912,50,678223,105,"precioConDescuent",678333,1573,"e){var c,l,f",679918,66,"d=k.getNavigationOrden(),c=e.up(\"agregarproductosform\"),l=c.getValues(),f",680057,54,"b=k.getOpcionesOrden().modoForm;codigoMonedaSeleccionada",680112,107,"f",680220,154,"console.log(b);if(b!=\"edicion\"){if(a!=codigoMonedaSeleccionada",680403,298,"console.log(a,\"La moneda del producto es diferente a la seleccionada.\");",680701,45,"c,\"cantidad\");k.ayudaAAgregar(c",680777,38,"c,\"cantidad\");k.ayudaAAgregar(c",680846,613,"console.log(r,\"Tipo de cambio\");m",685136,48,681508,333,"w.getOpcionesOrden()",681842,2562,"title:j});o.getOpcionesOrden().modoForm=\"agregar\"",684428,1242,"j,g,h,e",675588,38,"b,m,o,n=e.data,a=e.data.id,p=Ext.getStore(\"Ordenes\"),c=p.find(\"id\",a),f=l.getNavigationBar().getTitle(),d",680112,47,"if(l",685837,55,"l",684368,36,"title:f});k.getOpcionesOrden().modoForm=\"edicion\";k.getOpcionesOrden().ind=c;b=l.getActiveItem();m=b.down(\"fieldset\");m.setTitle(\"Editar producto\");l",688608,52,";if(n.moneda!=d){console.log(n.moneda,\"La moneda del producto\");console.log(d,\"La moneda seleccionada\");o=k",686096,42,"n);b.setValues(o);b.setValues({importe:o.importe})}else{b.setValues(n",686207,54,"m){var k=this,e,j,g,c,h,b,a=m.moneda,l=k.getOpcionesOrden().tipoCambio,d",680112,34,"Predeterminada",680110,48,",g={Precio:m.Precio,importe:m.importe,totalDeImpuesto:m",686386,32,"m.CodigoArticulo,CodigoSocio:m.CodigoSocio,Disponible:m.Disponible,Imagen:m.Imagen,NombreAlmacen:m.NombreAlmacen,CodigoAlmacen:m.CodigoAlmacen,NombreArticulo:m.NombreArticulo,cantidad:m.cantidad,PorcentajeDescuento:m.PorcentajeDescuento,id:m.id,moneda:m.moneda,precioConDescuento:m.precioConDescuento};if(!m.esOrdenRecuperada){if(a!=d&&f==d){console.log(m);b",685136,48,"m.PorcentajeDescuento);e",685136,48,"m.Precio);j",685136,48,"m.importe)/m.TipoCambio;",687792,49,"m.precioConDescuento)/m.TipoCambio;g.totalDeImpuesto=g.totalDeImpuesto/m.TipoCambio}}else{console.log(m);e",685136,48,"m.precioConDescuento);",687792,49,"m.precioConDescuento);j=h*m.cantidad;console.log(e);console.log(h);l",685136,48,"m.Precio)/h;g",695259,53,"h,a)}totalDeImpuesto=m.totalDeImpuesto;g",681610,42,"j,a);g",695321,41,"e,a);g",695259,53,"h,a);return g",687688,1510,689376,57,689282,66,689376,301,"d",688667,33,689375,54,689792,507,"o=this,b=o.getOpcionesOrden(),q=0,r=Ext.getStore(\"Ordenes\"),m=r.getData().items,a,e,h=o",690416,40,"j=o",671646,41,"getTitle(),d=o",693408,37,".getTitle().getTitle(),g=o",675680,45,"c=o",675728,47,"k=o",690736,35,"l=o",675071,37,"n=o",670688,35,",p=o.getOpcionesOrden().tipoCambio;o",695789,34,690957,41,"o",693549,41,"true);if(m.length>0){var f",691070,224,"j,\"Orden.NombreSocio\":d",691330,157,"g.trim(),\"Orden.CodigoImpuesto\":k,\"Orden.RFCSocio\":h.RFC,\"Orden.DireccionEntrega\":l,\"Orden.DireccionFiscal\":n};Ext.Array.forEach(m,function(y,s,v){var t=y.get(\"moneda\"),w",685136,48,"y.get(\"Precio\")),u",685136,48,"y.get(\"precioConDescuento\"));if(t!=c){u*=p;w=parseFloat(w",691963,45,"t+\"p \"+c+\"p\")}importe=u*y.get(\"cantidad\");q+=u*y.get(\"cantidad\")+y.get(\"totalDeImpuesto\");f[\"Orden.Partidas[\"+s+\"].CodigoArticulo\"]=y.get(\"CodigoArticulo\");f[\"Orden.Partidas[\"+s+\"].Cantidad\"]=y.get(\"cantidad\");f[\"Orden.Partidas[\"+s+\"].Precio\"]=w;f[\"Orden.Partidas[\"+s+\"].CodigoAlmacen\"]=y.get(\"CodigoAlmacen\");f[\"Orden.Partidas[\"+s+\"].Linea\"]=s;f[\"Orden.Partidas[\"+s+\"].Moneda\"]=t.trim();f[\"Orden.Partidas[\"+s+\"].Importe\"]=importe;f[\"Orden.Partidas[\"+s",692489,73,"y.get(\"PorcentajeDescuento\"));f[\"Orden.Partidas[\"+s+\"].tipoCambio\"]=y.get(\"TipoCambio\")});f",692653,36,"q.toFixed(2));if(b.actionOrden==\"crear\"){a=",696512,58,"OrdenVenta/AgregarOrdenMobile\";e",692830,53,"f[\"Orden.NumeroDocumento\"]=o",692911,36,"a=",696512,58,693009,40,"e",693052,62,"f)",706039,38,"f",664576,41,"s){if(s.Procesada){o",693549,48,"o",706139,47,"Orden Procesada\",e+s.CodigoUnicoDocumento);r.clearData();o.getNavigationOrden().remove(o",693408,44,"o.getMenuNav().remove(o.getMenuNav().down(\"toolbar\"),true);o",706295,42,"o",693549,124,"s.Descripcion);o",693689,38,665289,62,"El servidor est\\xe1 tardando demasiado en responder. Intente m\\xe1s tarde.\",function(){o",693549,48,"o",693689,37,")}})}else{o",693549,48,"o",693785,222,",a",680112,34,"Predeterminada",694061,1986,"d,h,c){var f=this,b=f",674768,33,"b",696102,42,682672,55,"j=f.getMenuNav().almacenes;b.push({xtype:\"almacenlist\",title:a});f.getOpcionesOrden().codigoArticulo=g.CodigoArticulo;b.down(\"almacenlist\").setData(j",696264,456,"h.getOpcionesOrden()",696721,1007,"console.log(c);",697728,50162]