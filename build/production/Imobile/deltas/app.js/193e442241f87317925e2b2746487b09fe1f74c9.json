["function _60b40ad673feea321ba37279e72e101282b99c83",50,596302,"NombreAlmacen\",label:\"Almacen\",disabled:false,itemId:\"almacenProduc",599166,32,"Disponible",596415,335," width: 180",596747,461,"display: table; text-align: left; font-size: 12px; z-index: 0;\"><div style=\"display: table-row;\"><div id=\"cliente_id\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">Transacci\ufffff\ufffffn: Orden de Venta</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">Fecha: 04/06/2014</div></div><div style=\"display: table-row;\"><div id=\"codigo_id\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">C\ufffff\ufffffdigo de Dispositivo: '+",622634,41,"+'</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">C\ufffff\ufffffdigo de Usuario: '+",622524,37,"+'</div></div><div style=\"display: table-row;\"><div id=\"codigo_dispositivo\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">Nombre de Dispositivo: '+",622634,41,"+'</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">Nombre de Usuario: '+localStorage.getItem(\"NombreUsuario\")+\"</div></div></div>\"}",602639,67,598255,34,"Orden",592956,40,597456,3399,"CondicionPago",600864,108,"NombreListaPrecio",599085,53,"CodigoV",601038,109,"Codigo",601153,7548,"ventas.Almace",608224,33,"requires:[],xtype:\"almacen",605079,79,"Almacen}</b> {NombreAlmacen",605183,117,605316,56,608701,398,"almacenes:undefined",609098,927,610040,232,"NombreUsuario\",d.Usuario.Nombre",610248,60,"localStorage.setItem(\"FolioInterno\",d.ConfiguracionDispositivo.FolioOrden);b.getMain().setActiveItem(1);b.almacenes=d.ConfiguracionDispositivo.Almacenes",610336,386,"c",619343,43,621502,36,"var b=Ext.getStore(\"Ordenes\");if(b.getData().items.length<=1){d",620558,36,"emptyTextCmp.show()}else{d",620558,36,"emptyTextCmp.hide",622043,35,"||",621930,62,"c",610956,1280,"clienteSeleccionado:undefined,CodigoAlmacen:undefined,codigoImpuesto:undefined,tasaImpuesto:0",612253,424,"agregarproductosform #almacenProducto\":{focus:\"onListAlmacen",612673,452,613178,661,",almacenlist:{itemtap:\"onSeleccionarAlmace",613836,890,"digoDireccion",614731,109,"odigoDireccion",614845,69,";d.codigoImpuesto=b.data.CodigoImpuesto;d.tasaImpuesto=b.data.Tasa",614914,100,"Codigo",615020,98,"Codigo",615124,455,"j){if(j==\"yes\"){var h",615600,59,"h);d.actualizarTotales();var g=Ext.getStore(\"Ordenes\");if(g.getData().items.length<=2){d",620558,36,"emptyTextCmp.show()}else{d",620558,36,"emptyTextCmp.hide()}}})},cambiaItem:function(f,j,b){var g=this,h=g.getMain().getActiveItem(),d=h",610991,45,",e=g.getOpcionCliente().clienteSeleccionado;if(j.xtype==\"clientecontainer\"){d.setText(\"Back\").show();d.setUi(\"back\");var c=j.down(\"clienteform\"",616851,32,"c.setValues(e)}if(j.xtype==\"editarpedidoform\"){console.log(e);j.setValues(e);d.setText(\"Back\").show();d.setUi(\"back\")}if(j.xtype==\"partidacontainer\"){d.setText(\"Agregar\").show();d",616631,481,617138,356,617525,604,618183,830,"e,f,d,h){var j=this,k=j.getMenu(),b=d.get(\"NombreSocio\");j.idCliente=d.get(\"CodigoSocio\");j.titulo=j.idCliente+\" \"+b;switch(g.opcion){case\"venta\":k",619160,39,"j.titulo,clienteSeleccionado:d.data});var c=j.getOpcionCliente().clienteSeleccionado",616852,33,"setData(c.Direcciones);a.filter(\"TipoDireccion\",\"S\");if(a.getCount()>0){j.direccionFiscal=a.getAt(0).data.CodigoDireccion;j.codigoImpuesto=a.getAt(0).data.CodigoImpuesto;j.tasaImpuesto=a.getAt(0).data.Tasa;a.clearFilter();a.filter(\"TipoDireccion\",\"B\");j.direccionEntrega=a.getAt(0).data.CodigoDireccion}else{j.mandaMensaje(\"Sin direcci\ufffff\ufffffn fiscal\",\"Este cliente no cuenta con direcci\ufffff\ufffffn fiscal, solicite una al SAP.\");k.pop()}break;case\"cobranza\":k",619232,34,"j",619267,69,"k,h,j,f){var n=this,o=n.getMain().getActiveItem(),c=f.data,d,e=n.almacenes,g,m,b,l,d;Ext.Array.forEach(e,function(r,p){var q=r.Predeterminado;n.CodigoAlmacen=r.CodigoAlmacen;if(q){c.NombreAlmacen=r.NombreAlmacen}});o",619398,38,"var a=o.getActiveItem();a.setValues(c);a.setValues({Precio:c.ListaPrecios[0].Precio,moneda:c.ListaPrecios[0].CodigoMoneda,cantidad:1});d=a",609782,49,624912,43,"ObtenerPrecioEspecial",624973,219,"ItemCode:c.CodigoArticulo,CardCode:n.idCliente,ListaPrecio:c.ListaPrecios[0].CodigoLista,Cantidad:d.cantida",609979,43,"p){var q=p.Procesada,r=p.Data[0]*100/d.Precio;if(q){a.setValues({descuento:r});m=d.Precio-r,b=m*n.tasaImpuesto/100,l=m*d.cantidad+b,a.setValues({descuento:r,totalDeImpuesto:b,importe:l,precioConDescuento:m});if(c.cantidad>0){a",619686,46,"o",610991,46,"hide()}",610336,40,"p.Descripcion,Ext.emptyFn)}}})},actualizaCantidad:function(h,g",614639,44,",f=a.getActiveItem().getValues(),c=f.precioConDescuento*g,e=g*f.totalDeImpuesto",619580,38,"c+e,totalDeImpuesto:",619953,180,"l,c,d,b,f){var g=this,h=g.getMenu(),k=b.get(\"action\");switch(k){case\"orden\":g.getMain().setActiveItem(2);g",620239,55,"g.titulo);g",625343,66,"g.actualizarTotales();g",620558,36,"emptyTextCmp.show();break;case\"visualizar\":var j=Ext.getStore(\"Transacciones\"),a={CardCode:\"C00001\"};j.setParams(a);j.load();h",621043,389,"c){var e=this,a=e.getMain().getActiveItem(),d=c.up(\"navigationorden\"),f=d",621894,32,",b=Ext.getStore(\"Productos\");if(f.isXType(\"partidacontainer\")){var g={CardCode:e.idCliente};b.setParams(g);",621686,33,"b.load(",610988,49,"hide()}else{d",610956,33,621812,638,"d=this,c=0,a=Ext.getStore(\"Ordenes\"),f=a.getData().items;if(f.length>0){var b=parseInt(localStorage.getItem(\"FolioInterno\"))+1;var e",622508,225,"b,\"Orden.CodigoCliente\":d.idCliente",622767,96,"localStorage.setItem(\"FolioInterno\",b);Ext.Array.forEach(f,function(j,g,h){c+=j.get(\"precioConDescuento\");e[\"Orden.Partidas[\"+g+\"].CodigoArticulo\"]=j.get(\"CodigoArticulo\");e[\"Orden.Partidas[\"+g+\"].Cantidad\"]=j.get(\"cantidad\");e[\"Orden.Partidas[\"+g+\"].Precio\"]=j.get(\"Precio\");e[\"Orden.Partidas[\"+g+\"].CodigoAlmacen\"]=d.CodigoAlmacen;e[\"Orden.Partidas[\"+g+\"].Linea\"]=g;e[\"Orden.Partidas[\"+g+\"].Moneda\"]=j.get(\"moneda\");e[\"Orden.Partidas[\"+g+\"].Importe\"]=j.get(\"importe\")});e",623286,36,"c).toFixed(2);console.log(e",624874,71,623420,38,"e",609981,41,"g){console.log(g);d",623519,45,"g",623565,165,"else{d.getMain().setActiveItem(1);Ext.Msg.alert(\"Productos\",\"Selecciona al menos un Producto\")}",623729,596,624347,1140,625856,38,"e",625895,48,"f=0,a=0,d",625948,36,"h,g){console.log(h);f+=h.get(\"Precio\")*h.get(\"cantidad\");a+=h.get(\"descuento\")*h.get(\"cantidad\");c+=h.get(\"totalDeImpuesto\");d+=h.get(\"importe\")});e",626064,77,"e",626142,83,"f).toFixed(2)});e.getOrdenContainer().down(\"#tax",624511,36,"parseFloat(c).toFixed(2)});e",626242,80,"d).toFixed(2)})},onListAlmacen:function(c,g",614639,44,",f=a.down(\"agregarproductosform\").getValues();a.push({xtype:\"almacenlist\",codigoArticulo:f.CodigoArticulo});a.down(\"almacenlist\").setData(d.almacenes)},onSeleccionarAlmacen:function(f,c,j,b,h,d){var g=this,a=g.getMain().getActiveItem();g.CodigoAlmacen=b.get(\"CodigoAlmacen\"",624874,38,"192.168.15.9:88/iMobile/COK1_CL_Consultas/ObtenerDisponible",624973,84,"\"001\",CodigoDispositivo:\"004\",ItemCode:f.codigoArticulo,",588441,36,"Almacen:b.get(\"CodigoAlmacen\")",609980,42,"e){var k={Disponible:e.Data[0],NombreAlmacen:b.get(\"NombreAlmacen\")};a.down(\"agregarproductosform\").setValues(k);a.pop()}",626335,1217,",{name:\"CodigoVendedor\",type:\"string\"},{name:\"CondicionPago\",type:\"string\"},{name:\"NombreListaPrec",630447,32,631008,53,627583,737,"Disponible",628330,64,"ListaPrecios\",type:\"array\"},{name:\"SujetoImpuesto",628369,96,"Imobile.core",630111,41,"Producto",627661,54,"Articulo/ObtenerListaArticul",627737,146,629581,578,630172,454,",{name:\"CodigoImpuesto\",type:\"string\",},{name:\"Tasa\",type:\"string\"},{name:\"Codig",630600,478,"Imobile.core",630111,41,631122,188,",extraParams:{type:\"json",631308,1208,"Imobile.core",630111,41,632560,185,627824,37,632754,938]