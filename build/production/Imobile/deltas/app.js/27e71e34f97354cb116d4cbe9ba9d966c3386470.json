["function _4f0034b86253b46da95f373de61623cd3b41d02a",50,10726,"B=[],e,A=20;if(!B.splice){return false}while(A--){B.push(\"A\")}B",10839,100,"B.length;B.splice(13,0,\"XXX\");if(e+1!=B",10978,84,"z",11063,283,"A,e){return(e<0)?Math.max(0,A.length+e):Math.min(A.length,e)}function y(H,G,A,K){var L=K?K.length:0,C=H.length,I=m(H,G);if(I===C){if(L){H.push.apply(H,K)}}else{var F=Math.min(A,C-I),J=I+F,B=J+L-F,e=C-J,D=C-F,E;if(B<J){for(E=0;E<e;++E){H[B+E]=H[J+E]}}else{if(B>J){for(E=e;E--;){H[B+E]=H[J+E]}}}if(L&&I===D){H.length=D;H.push.apply(H,K)}else{H.length=D+L;for(E=0;E<L;++E){H[I+E]=K[E]}}}return H}function h(C,e,B,A){if(A&&A.length){if(e<C.length){C.splice.apply(C,[e,B].concat(A))}else{C.push.apply(C,A)}}else{C.splice(e,B)}return C}function b(B,e,A){return y(B,e,A)}function r(B,e,A){B.splice(e,A);return B}function l(D,e,B){var C=m(D,e),A=D.slice(e,m(D,C+B));if(arguments.length<4){y(D,C,B)}else{y(D,C,B,o.call(arguments,3))}return A",12078,78,"y",12157,36,"E,C,B,e){E=a.from(E);var A,D=E.length;if(e!==true){for(A=0;A<D;A++){if(C.call(B||E[A],E[A],A,E)===false){return A}}}else{for(A=D-1;A>-1;A--){if(C.call(B||E[A],E[A],A,E)===false){return A",12379,35,"B,A,e){return B.forEach(A,e)}:function(D,B,A){var e=0,C=D.length;for(;e<C;e++){B.call(A,D[e],e,D)}},indexOf:(p)?function(B,e,A){return B.indexOf(e,A)}:function(D,B,C){var e,A=D.length;for(e=(C<0)?Math.max(0,A+C):C||0;e<A;e++){if(D[e]===B",12651,43,"A,e){return A.indexOf(e)!==-1}:function(C,B){var e,A;for(e=0,A=C.length;e<A;e++){if(C[e]===B",12786,46,"B,D,e){if(!B||!B.length){return[]}if(typeof B===\"string\"){B=B.split(\"\")}if(k){return o.call(B,D||0,e||B.length)}var C=[],A;D=D||0;e=e?((e<0)?B.length+e:e):B.length;for(A=D;A<e;A++){C.push(B[A])}return C},pluck:function(E,e){var A=[],B,D,C;for(B=0,D=E.length;B<D;B++){C=E[B];A.push(C[e])}return A},map:u?function(B,A,e){return B.map(A,e)}:function(E,D,C){var B=[],A=0,e=E.length;for(;A<e;A++){B[A]=D.call(C,E[A],A,E)}return B},every:function(D,B,A){if(z){return D.every(B,A)}var e=0,C=D.length;for(;e<C;++e){if(!B.call(A,D[e],e,D",13360,44,"D,B,A){if(c){return D.some(B,A)}var e=0,C=D.length;for(;e<C;++e){if(B.call(A,D[e],e,D",13489,45,"D){var A=[],e=0,C=D.length,B;for(;e<C;e++){B=D[e];if(!Ext.isEmpty(B)){A.push(B)}}return A},unique:function(D){var C=[],e=0,B=D.length,A;for(;e<B;e++){A=D[e];if(a.indexOf(C,A)===-1){C.push(A)}}return C},filter:function(E,C,B){if(d){return E.filter(C,B)}var A=[],e=0,D=E.length;for(;e<D;e++){if(C.call(B,E[e],e,E)){A.push(E[e])}}return A},from:function(A,e){if(A===undefined||A",13909,33,"A)){return(e)?o.call(A):A}if(A&&A.length!==undefined&&typeof A!==\"string\"){return a.toArray(A)}return[A]},remove:function(B,A){var e=a.indexOf(B,A);if(e!==-1){w(B,e,1)}return B},include:function(A,e){if(!a.contains(A,e)){A",14164,88,"C=[],A,B;for(A=0,B=e.length;A<B;A++){C=C.concat(e[A])}return a.unique(C",14323,33,"D=o.call(arguments),C,E,B,A;if(!D.length){return e}D=D.sort(function(G,F){if(G.length>F.length){return 1}else{if(G.length<F",14479,37,"E=a.unique(D[0]);for(B=0;B<E.length;B++){C=E[B];for(A=1;A<D.length;A++){if(D[A].indexOf(C)===-1){break}if(A==(D.length-1)){e.push(C",14647,34,"A,e){var F=o.call(A),D=F.length,C,B,E;for(C=0,E=e.length;C<E;C++){for(B=0;B<D;B++){if(F[B]===e[C]){w(F,B,1);B--;D--}}}return F},slice:function(B,A,e){return o.call(B,A,e)},sort:function(G,F){if(n){if(F){return G.sort(F)}else{return G.sort()}}var D=G.length,C=0,E,e,B,A;for(;C<D;C++){B=C;for(e=C+1;e<D;e++){if(F){E=F(G[e],G[B]);if(E<0){B=e}}else{if(G[e]<G[B]){B=e}}}if(B!==C){A=G[C];G[C]=G[B];G[B]=A}}return G},flatten:function(B){var A=[];function e(C){var E,F,D;for(E=0,F=C.length;E<F;E++){D=C[E];if(Ext.isArray(D)){e(D)}else{A.push(D)}}return A}return e(B)},min:function(E,D){var A=E[0],e,C,B;for(e=0,C=E.length;e<C;e++){B=E[e];if(D){if(D(A,B)===1){A=B}}else{if(B<A){A=B}}}return A},max:function(E,D){var e=E[0],A,C,B;for(A=0,C=E.length;A<C;A++){B=E[A];if(D){if(D(e,B)===-1){e=B}}else{if(B>e){e=B",15479,90,"D){var A=0,e,C,B;for(e=0,C=D.length;e<C;e++){B=D[e];A+=B}return A},erase:w,insert:function(B,A,e){return t(B,A",15679,17156,"y",32836,127,"y",32964,106,"y",33071,2439,"y){var H=false,v=navigator.userAgent,A,E;y=[].concat(y);function D(I){var j=/Mobile(\\/|\\s)/.test(I);return/(iPhone|iPod)/.test(I)||(!/(Silk)/.test(I)&&(/(Android)/.test(I)&&(/(Android 2)/.test(I",35704,33,"I)&&j)||/(Windows Phone)/.test(I)}function C(j){return !D",35794,162,"z={},F,B;for(B=0;B<w.length;B++){var G=w[B].split(\"=\");z[G[0]]=G[1]}F=z.platform;if(F){return y.indexOf(F)!=-1}for(A=0,E=y.length;A<E;A++){switch(y[A]){case\"phone\":H=D(v);break;case\"tablet\":H=C(v);break;case\"desktop\":H=!D(v)&&!C(v);break;case\"ios\":H",36205,50,"H",36256,49,"H",36306,46,"H",36353,67,"H",36421,35,"H",36457,39,"H",36497,56,"H",36554,37,"H=/Firefox/.test(v)}if(H",36615,5243,"y,w,z",41863,89,"y,w,z",41957,7010,"z,m){var t=this,A",48984,41,"y",49026,115,"A[n]){return this}z=z",49162,122,"A",49285,32,"y,u,v,z",49324,40,"y,u,v,z",49371,133,"y",49505,174,"z",49680,207,"I,v,p,s){var y={},o={},B=this.queue,F=this.classNameToFilePathMap,D=this.isClassFileLoaded,u=[],K=[],H=[],n=[],t,J,A,z,m,r,G,E,C,w,q;if(s){s=j(s);for(E=0,w=s.length;E<w;E++){m=s[E",50066,69,"C=0,q=u.length;C<q;C++){y[u[C]]=true}}}}I=j(I",50180,40,"N=[],M,O,L;for(M=0,O=n.length;M<O;M++){L=n[M];N.push(a.get(L))}return v.apply(this,N",50304,52,"E=0,w=I.length;E<w;E++){z=I[E];if(typeof z==\"string\"&&z.length>0){K=a.getNamesByExpression(z);q=K.length;for(C=0;C<q;C++){G=K[C];if(y[G]!==true){n.push(G);if(!a.isCreated(G)&&!o[G]){o[G]=true;H.push(G)}}}}}if(H",50566,154,"H.length>1)?\"es\":\"\")+\": \"+H",50747,41,"J=this.syncModeEnabled;if(!J){B.push({requires:H",50836,32,"H.length;for(E=0;E<w;E++){r=H[E];A=this.getPath(r);if(J&&D",50926,68,"A);delete D[r]}if(!D.hasOwnProperty(r)){D[r]=false;F[r]=A",51051,44,"A,k(this.onFileLoaded,[r,A",51121,34,"A]),this,J)}}if(J",51172,1303,"A,o,z,y){var v=this,t=[],u=a.getName(A",52513,619,"B in m){if(m.hasOwnProperty(B)){w=m[B];if(typeof w==\"string\"){o[q][B]=a.get(w)}}}}}}}}y.call(v,A,o,z",53232,3744,"y=w.length,v,z",56990,54,"y;v++){z=w[v];z.fn.call(z",57069,77,"y",57147,41,"y",57189,736,"y",57926,32,"y.setAttribute(\"name\",v);y",57984,36,"y)}function o(v,y,z",58224,73,"icon\"+(z",58120,49,"y){w.setAttribute(\"sizes\",y)}h.append(w)}function e(v,y",58224,117,"y){w.setAttribute(\"media\",y",58368,61017,"y",119386,67,"z",119454,318,"y);if(g){l.removeAttribute(y",119800,452,"z=w[t];u=f[z];if(a[z]){a[z]=false;Ext.Array.remove(m,z)}if(j[z]!==null){q.push(z",120332,59,"z=q[t];u=f[z",120403,52,"z",120456,57402,"B",177859,39,"y",177899,79,"B.bottom-=5;B.height-=10;B.left+=5;B.right-=5;B.top+=5;B",178034,33,"B.bottom-o.bottom<s){if(o.top-B.top<s){if(o.left-B",178117,144,"z",178262,67,"y/2,e=n/2,f=u/2,r=s/2,w,A",178354,59,"y",178414,80,"y",178495,81,"y",178577,243,"z){w=(B.left+B.width)-u;A=(B.top+B.height)-s;d=Math.max(B",178877,32,"B.top,Math.min(A",178925,86995,"A=this.tipElement;A",265939,36,"A",265976,208,"G",266185,70,"G,y:w},F={x:b,y:h},H={x:G,y:h},C",266287,53,"z={x:v,y:s},c=new f(C,z),g=0,E=0,e,D,u,r,B,y;A.setVisibility(false);A.show();e=A.getSize();D",266432,49,"B=Math.min(Math.max(v,b+D),G-(D));y=w;E",266520,43,"F))){B=b;y=Math.min(Math.max(s+(D/2),D*1.6),h-(D",266611,50,"F,H))){B=Math.min(Math.max(v,b+D),G-D);y=h;E",266705,47,"H))){B=G;y=Math.max(Math.min(s-u,h-D*1.3),D/2);g=-u-10;r=\"right\"}}}}if(B||y){this.currentTipPosition=r;A.addCls(\"x-anchor-\"+r);A.setLeft(B-b);A.setTop(y-w);A",266909,78,"E",266988,15721,"y",282710,127,"y",282838,88,"y",282927,48,"y.push(w)}}}}return y",282996,1299,"y=p.split(\",\"),o=y.length,q=0,r=[],z",284331,47,"y",284379,102,"z.push(u);v[u.id]=true}}r=z",284508,164,"y,z",284675,275,"y",284951,41,"z=r.match(u.re);o=u.method;if(z",285023,114,"z.slice(1)))):u.method,args:z.slice(1)});r=r.replace(z[0],\"\");break}}}if(y[1]){p.push({mode:y[2]||y[1]});r=r.replace(y",285255,4057,"abel",437391,32,"abel",309664,37,"label\"",289291,121266,"C,u){var w=[],z=C.prototype,y={},n=z",410593,86,"C),B,A,s,q,v;for(s=0;s<o;s++){B=g[s];for(q=0;q<t;q++){A=e[B][r[q]];if(A in z){y[A]=b.generateProxyMethod(A)}}}C.addStatics(y);C.modelName=m;z",410820,710,"C);var D=C.prototype.superclass;C.prototype.associations=C.associations=C.prototype._associations=(D&&D.associations)?D.associ",411817,48,"E){return E.getName()});C.prototype.validations=C.validations=C.prototype._validations=(D&&D.validations)?D",411811,54,"E){return E.field?(E.field+\"-\"+E.type):(E.name+\"-\"+E.type)});C.prototype=Ext.Object.chain(C.prototype);C.prototype.initConfig.call(C.prototype,n);delete C",412019,33,"C",412053,36970,"y",449024,1650,"y",450675,32,"y",450708,8972,"device.communicator.Default\",{SERVER_URL:\"http://localhost:3000\",callbackDataMap:{},callbackIdMap:{},idSeed:0,globalScopeId:\"0\",generateId:function(){return String(++this.idSeed)},getId:function(a){var b=a.$callbackId;if(!b){a.$callbackId=b=this.generateId()}return b},getCallbackId:function(h,d){var c=this.callbackIdMap,b=this.callbackDataMap,g,a,f,e;if(!d){a=this.globalScopeId}else{if(d.isIdentifiable){a=d.getId()}else{a=this.getId(d)}}f=this.getId(h);if(!c[a]){c[a]={}}if(!c[a][f]){g=this.generateId();e={callback:h,scope:d};c[a][f]=g;b[g]=e}return c[a][f]},getCallbackData:function(a){return this.callbackDataMap[a]},invoke:function(c,a){var b=this.getCallbackData(c);b.callback.apply(b.scope,a)},send:function(c){var e,d,b,f;if(!c){c={}}else{if(c.callbacks){e=c.callbacks;d=c.scope;delete c.callbacks;delete c.scope;for(b in e){if(e.hasOwnProperty(b)){f=e[b];if(typeof f==\"function\"){c[b]=this.getCallbackId(f,d)}}}}}c.__source=document.location.href;var a=this.doSend(c);return(a&&a.length>0)?JSON.parse(a):null},doSend:function(a){var c=new XMLHttpRequest();c.open(\"GET\",this.SERVER_URL+\"?\"+Ext.Object.toQueryString(a)+\"&_dc=\"+new Date().getTime(),false);try{c.send(null);return c.responseText}catch(b){if(a.failure){this.invoke(a.failure)}else{if(a.callback){this.invoke(a.callback)}}}}});Ext.define(\"Ext.device.communicator.Android\",{extend:Ext.device.communicator.Default,doSend:function(a){return window.Sencha.action(JSON.stringify(a))}});Ext.define(\"Ext.device.Communicator",235732,41,"if(Ext.os.is.Android){return new Ext.device.communicator.Android()}return new Ext.device.communicator.Default()}});Ext.define(\"Ext.device.notification.Abstract\",{show:function(a){if(!a.message){throw (\"[Ext.device.Notification#show] You passed no message\")}if(!a.buttons){a.buttons=[\"OK\",\"Cancel\"]}if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons]}if(!a.scope){a.scope=this}return a},alert:function(a){if(!a.message){throw (\"[Ext.device.Notification#alert] You passed no message\")}if(!a.scope){a.scope=this}return a},confirm:function(a){if(!a.message){throw (\"[Ext.device.Notification#confirm] You passed no message\")}if(!a.buttons){a.buttons=[\"OK\",\"Cancel\"]}if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons]}if(!a.scope){a.scope=this}return a},prompt:function(a){if(!a.message){throw (\"[Ext.device.Notification#prompt] You passed no message\")}if(!a.buttons){a.buttons=[\"OK\",\"Cancel\"]}if(!Ext.isArray(a.buttons)){a.buttons=[a.buttons]}if(!a.scope){a.scope=this}return a},vibrate:Ext.emptyFn,beep",384598,32,"evice.notification.Cordova\",{alternateClassName:\"Ext.device.notification.PhoneGap\",extend:Ext.device.notification.Abstract,show:function(a){a=",310847,32,"confirm(a)},confirm:function(b){b=this.callParent(arguments);var e=b.buttons,d=b.buttons.length;if(d&&typeof e[0]!=\"string\"){var a=[],c;for(c=0;c<d;c++){a.push(e[c].text)}e=a}var f=function(g){if(b.callback){b.callback.apply(b.scope,(e)?[e[g-1].toLowerCase()]:[])}};navigator.notification.confirm(b.message,f,b.title,e)},alert:function(a){navigator.notification.alert(a.message,a.callback,a.title,a.buttonName)},prompt:function(b){b=this.callParent(arguments);var e=b.buttons,d=b.buttons.length;if(d&&typeof e[0]!=\"string\"){var a=[],c;for(c=0;c<d;c++){a.push(e[c].text)}e=a}var f=function(g){if(b.callback){b.callback.call(b.scope,(e)?e[g.buttonIndex-1].toLowerCase():null,g.input1)}};navigator.notification.prompt(b.message,f,b.title,e)},vibrate:function(a){navigator.notification.vibrate(a)},beep:function(a){navigator.notification.vibrate(a)}});Ext.define(\"Ext.device.notification.Sencha\",{extend:Ext.device.notification.Abstract,show",244752,34,"arguments);Ext.device.Communicator.send({command:\"Notification#show\",callbacks:{callback:a.callback},scope:a.scope,title:a.title,message:a.message,buttons:a.buttons.join(\",\")})},vibrate:function(){Ext.device.Communicator.send({command:\"Notification#vibrate\"})}});Ext.define(\"Ext.util.Audio\",{singleton:true,ctx:null,beep:function(a){this.oscillate(200,1,a)},oscillate:function(d,b,f){if(!this.ctx){this.ctx=new (window.audioContext||window.webkitAudioContext)}if(!this.ctx){console.log(\"BEEP\");return}b=(b%5)||0;try{var a=this.ctx.createOscillator();a.type=b;a.connect(this.ctx.destination);a.noteOn(0);setTimeout(function(){a.noteOff(0);if(f){f()}},d)}catch(c){throw new Error(\"[Ext.util.Audio.oscillate] Error with Oscillator playback\")}}});Ext.define(\"Ext.device.notification.Simulator\",{extend:Ext.device.notification.Abstract,msg:null,show",244752,34,"arguments),e=[],d=a.buttons.length,c,b,f;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()}}e.push(c)}this.msg=Ext.create(\"Ext.MessageBox\");f=function(g){if(a.callback){a.callback.apply(a.scope,[g])}};this.msg.show({title:a.title,message:a.message,scope:this.msg,buttons:e,fn:f})},alert",244752,34,"arguments);if(a.buttonName){a.buttons=[a.buttonName]}this.show(a)},confirm",244752,34,"arguments);this.show(a)},prompt",244752,34,"arguments),e=[],d=a.buttons.length,c,b,f;for(b=0;b<d;b++){c=a.buttons[b];if(Ext.isString(c)){c={text:a.buttons[b],itemId:a.buttons[b].toLowerCase()}}e.push(c)}this.msg=Ext.create(\"Ext.MessageBox\");f=function(g,h){if(a.callback){a.callback.apply(a.scope,[g,h])}};this.msg.prompt(a.title,a.message,f,this.msg,a.multiLine,a.value,a.prompt)},beep:function(b){if(!Ext.isNumber(b)){b=1}var a=0;var c=function(){if(a<b){setTimeout(function(){Ext.util.Audio.beep(c)},50)}a++};c()},vibrate:function(){var c=[\"@-webkit-keyframes vibrate{\",\"    from {\",\"        -webkit-transform: rotate(-2deg);\",\"    }\",\"    to{\",\"        -webkit-transform: rotate(2deg);\",\"    }\",\"}\",\"body {\",\"    -webkit-animation: vibrate 50ms linear 10 alternate;\",\"}\"];var b=",542361,40,";var a",57640,33,"a.innerHTML=c.join(\"\\n\");b.appendChild(a);setTimeout(function(){b.removeChild(a)},400)}});Ext.define(\"Ext.device.Notification",235732,45,"a=Ext.browser.is;if(a.WebView){if(a.Cordova){return Ext.create(\"Ext.device.notification.Cordova\")}else{if(a.Sencha){return Ext.create(\"Ext.device.notification.Sencha\")}}}return Ext.create(\"Ext.device.notification.Simulator\")",459660,10766,"y",470427,93,"z",470521,53,"A,n,c,w,s;for(v=0,k=y.length;v<k;v++){A=y[v];u.setDelegatedTarget(A);if(p){n=A",470652,92,"A",470745,69,"z[c]){z",470821,235,"y.length;t<d;t++){A=y",471077,63,"A,s)){u.setDelegatedTarget(A",471168,43987,"Hidden",514996,54,"Hidden\",xtype:\"hiddenfield\",config:{component:{xtype:\"input\",type:\"hidden\"},ui:\"hidden\",hidden:true,tabIndex:-1",515129,20398,"B,v){var y=v.responseText,A=v.responseXML,C",535570,56,"z;Ext.each(c.$fileswap,function(D){t=D.original;z=D.placeholder;z.parentNode.insertBefore(t,z.nextSibling);z.parentNode.removeChild(z",535759,81,"B=false}if(B){if(C&&y&&y.length==0){B",535877,45,"B=C.success}else{if(Ext.isString(y",535956,80,"y)){try{v=Ext.decode(y",536058,85,"y)){v=y",536150,49,"A)){v.success=true}B=!!v.success}}if(B){k(v,y)}else{s(v,y)}}else{s(v,y",536269,11138,"H=this,h=this.lengthProperties,z={},G={},I={},d,t,A,e,v,K,w,r,s,a,n,C,B,p,D,l,u,g,E,J,k,f,y,o,c,F",547504,80,"C=0,p=q.length;C<p;C++){D=q[C];D=Ext.factory(D,Ext.fx.Animation);d=D",547652,51,"D",547704,47,"I=Ext.merge({},D.getData());if(D.onBeforeStart){D.onBeforeStart.call(D.scope||this,d)}D.fireEvent(\"animationstart\",D",547867,39,"D);I[t]=I;v=I.before;A=I.from;e=I.to;I.fromPropertyNames=K=[];I.toPropertyNames=w=[];for(J in e){if(e.hasOwnProperty(J)){e[J]=k=this.formatValue(e[J],J);E=this.formatName(J);o=h.hasOwnProperty(J",548100,33,"E,k)}if(A.hasOwnProperty(J)){A[J]=y=this.formatValue(A[J],J);if(!o){y=this.getCssStyleValue(E,y)}if(k!==y){K.push(E);w.push(E)}}else{f=g.getPropertyValue(E);if(k!==f){w.push(E",548308,48,"I,D",548359,116,"K,w),true,I.replacePrevious)}c=a.nameMap;F=a.nameList;u={};for(B=0;B<l;B++){J=w[B];u[J]=true;if(!c.hasOwnProperty(J)){c[J]=1;F.push(J)}else{c[J",548618,53,"I,animation:D};b.push(m);D",548697,65,"A);if(F.length>0){K=Ext.Array.difference(F,K);w=Ext.Array.merge(K,w);n[\"transition-property\"]=K}z[t]=n;G[t]=Ext.apply({},e);G[t][\"transition-property\"]=w;G[t][\"transition-duration\"]=I.duration;G",548956,34,"I.easing;G[t][\"transition-delay\"]=I.delay;D",549033,57,"z",549091,96,"H.applyStyles(G",549202,2926,"y=this,k=y.element,w=y.leftBox.element,q=y",552170,229,"z",552400,440,"z",552475,44,"d,opacity:1}}}}else{z",552540,79,"d",552620,63,"return{left:f,title:z",553070,35137,"core.data.Store",620224,33,"autoLoad:false,listeners:{beforeload:function(b,a,c){var d=this,e=b.getProxy().getExtraParams();d.params.auth_token=localStorage.getItem(\"Token\");if(d.resetParams){b.getProxy().setExtraParams(d.params);d.resetParams=false}else{b.getProxy().setExtraParams(d.mergePropertiesObject(e,d.params))}}}},setParams:function(c,b){var a=this;c.Token=localStorage.getItem(\"Token\");c.CodigoUsuario=localStorage.getItem(\"CodigoUsuario\");c.CodigoSociedad=localStorage.getItem(\"CodigoSociedad\");c.CodigoDispositivo=localStorage.getItem(\"CodigoDispositivo\");a.params=c;a.resetParams=b},mergePropertiesObject:function(d,c){var b={};for(var a in d){b[a]=d[a]}for(var a in c){b[a]=c[a]}return b},resetCurrentPage:function(){var a=this;a.currentPage=1}});Ext.define(\"Imobile.core.FormatCurrency\",{widget:\"currency\",singleton:true,currencyPrecision:2,currencySign:\"$\",currencyAtEnd:false,decimalSeparator:\".\",thousandSeparator:\",\",currency:function(c,e,b,a){var g=\"\",f=\",0\",d=0;c=c-0;if(c<0){c=-c;g=\"-\"}b=Ext.isDefined(b)?b:Imobile.core.FormatCurrency.currencyPrecision;f+=f+(b>0?\".\":\"\");for(;d<b;d++){f+=\"0\"}c=Imobile.core.FormatCurrency.formatValue(c);if((a||Imobile.core.FormatCurrency.currencyAtEnd)===true){return Ext.String.format(\"{0}{1}{2}\",g,c,e||Imobile.core.FormatCurrency.currencySign)}else{return Ext.String.format(\"{0}{1}{2}\",g,e||Imobile.core.FormatCurrency.currencySign,c)}},formatValue:function(b){b=b.toFixed(2);x=b.split(Imobile.core.FormatCurrency.decimalSeparator);x1=parseFloat(x[0]).toString();x2=x.length>1?Imobile.core.FormatCurrency.decimalSeparator+x[1]:\".00\";var a=/(\\d+)(\\d{3})/;while(a.test(x1)){x1=x1.replace(a,\"$1\"+Imobile.core.FormatCurrency.thousandSeparator+\"$2\")}return x1+x2},formatCurrencytoNumber:function(a){return parseFloat(a.replace(/[^0-9-.]/g,\"\")).toFixed(2)",588183,333,"textfield\",name:\"usuario\",placeHolder:\"Codigo de Usuario\",value:\"1",588588,55,"Contrase\ufffff\ufffffa\",value:\"12345",588668,80,"itemId:\"login",588746,731,"Cls:\"logo",589508,139,589678,417,590848,47,"rClientes",590141,34,",flex:8},{xtype:\"button\",iconCls:\"search\",itemId:\"btnBuscarClientes\",flex:0.5",590175,61,",loadMoreText:\"Ver M\ufffff\ufffffs...",589536,32,590267,82,589678,55,590435,109,"{cantidad",589793,40,590584,311,"rProductos",590895,41,"8},{xtype:\"button\",iconCls:\"search\",itemId:\"btnBuscarProductos\",flex:0.5",590175,61,",loadMoreText:\"Ver M\ufffff\ufffffs...",589536,33,591030,235,591422,2425,"]},{itemId:\"fileLoadBtn\",xtype:\"fileupload\",autoUpload:true,loadAsDataUrl:true,states:{browse:{text:\"Browse and load\"},ready:{text:\"Load\"},uploading:{text:\"Loading\",loading:true}}",593969,478,594817,97,"padding:\"10 15 15 15\",scrollable:\"vertical\",",598716,137,"agreg",598858,75,595131,236,"NombreArticulo\",label:\"Descripci\ufffff\ufffffn\",itemId:\"descripcion\",",595415,82,"itemId:\"cantidad\"},{xtype:\"textfield\",name:\"P",595553,70,"},{xtype:\"textfield\",name:\"PorcentajeD",599544,54,595710,58,"text",595845,64,"NombreAlmacen\",label:\"Almacen\",disabled:false,itemId:\"almacenProducto\"},{xtype:\"hiddenfield\",name:\"CodigoAlmacen\"},{xtype:\"textfield\",name:\"Disponible\",label:\"Disponible\"}]",597968,38,596032,146,"15px 0px 0px 10px;\"><img src=\"{Imagen}\" width=\"40px\" height=\"40px\"></span>",596143,35,"0 35px; width: 143",596304,35,"'<p style=\"margin: 0px;\">{CodigoArticulo}</p>','<p style=\"margin: 0px;\"><b>{NombreArticulo}</b></p>','<p style=\"margin: 0px; ",596396,56,"'<span style=\"width: 145px\">','<p style=\"margin: 0px;\">Precio: {Precio} </p>','<p style=\"margin: 0px;\">Disc: {PorcentajeDescuento}</p>','<p style=\"margin: 0px;\" class=\"total-product\"><b>Total: {importe}</b></p>'",596546,66,"display: table; text-align: left; font-size: 10px; z-index: 0;\"><div style=\"display: table-row;\"><div id=\"cliente_id\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">Transacci\ufffff\ufffffn: Orden de Venta</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">Fecha: '+Ext.DateExtras.dateFormat(new Date(),\"d/m/Y\")+'</div></div><div style=\"display: table-row;\"><div id=\"codigo_id\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">C\ufffff\ufffffdigo de Dispositivo: '+localStorage.getItem(\"CodigoDispositivo\")+'</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">C\ufffff\ufffffdigo de Usuario: '+localStorage.getItem(\"CodigoUsuario\")+'</div></div><div style=\"display: table-row;\"><div id=\"codigo_dispositivo\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">Nombre de Dispositivo: '+localStorage.getItem(\"NombreDispositivo\")+'</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">Nombre de Usuario: '+localStorage.getItem(\"NombreUsuario\")+\"</div></div></div>\"}",590736,66,599743,36,"rden",591536,40,601126,32,"vbox\",xtype:\"container\",docked:\"bottom\",items",601148,65,".2,height:50,itemId:\"descuento\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\",\"font-size\":\"12px\"}",601213,43,",itemId:\"subtotal\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"font-size\":\"12px\"}},{xtype:\"container\",html:\"Impuesto\",flex:1,itemId:\"tax\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"font-size\":\"12px\"}},{xtype:\"container\",html:\"Total\",flex:1,itemId:\"total\",style:{background:\"#A9A9A9\",color:\"black\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"font-size\":\"12px\"}}]}",603632,36,"Partida",591536,33,596761,106,"fit\"",596885,58,"7},{xtype:\"ordencontainer",601326,34,597014,413,"T",597428,54,"Correo",597486,43,"NombreListaPrecio",597536,53,"Limite",597598,54,"S",597653,613,598319,892,"},{xtype:\"numberfield\",name:\"LimiteCredito\",label:\"L\ufffff\ufffffmite de Cr\ufffff\ufffffdito\"},{xtype:\"textfield\",name:\"CondicionPago",599313,61,"Saldo\",label:\"Sald",599144,35,"ListaPrecio",597536,53,"CodigoV",599489,109,"Codigo",599604,357,599963,791,"tpl if=\"cantidad &gt; 0\">','<div class= \"ovalo\">{cantidad}</div>',\"</tpl>\"",600751,64,"'<div class=\"container\"> ",600813,33,600837,244,601372,398,603632,36,601807,476,594452,365,602278,511,"tpl for=\".\"><tpl if=\"Predeterminado == true\"><div class=\"imobile-cliente-tpl direc-selected\"><tpl else>",603757,33,"</tpl",602820,265,"</tpl",603084,33,"mode:\"SINGLE",603115,379,"Cls:\"logo",603525,233,"tpl for=\".\"><tpl if =\"Predeterminada == true\"><div class=\"imobile-cliente-tpl direc-selected\"><tpl else>",603757,33,"</tpl",603789,152,"</tpl",603940,86,"cobranza.Cobranza",591056,41,"branza",597773,112,"Cobranza de facturas\",action:\"cobranzaFacturas\"},{title:\"Anticipo de pedido\",action:\"anticipo\"},{title:\"Visualizar cobranzas\",action:\"visualizarCobranza",589536,33,"obranza.Factura",589584,40,"facturaslist\",requires:[],config:{itemTpl:['<div class=\"factura\">','<div> <p>N\ufffff\ufffffmero: <b>{Folio}</b> Saldo: <b>{saldoAMostrar}</b></div> ",603852,83,"','<div style=\"font-size: 90%\"> <div><p>Fecha: <b>{FechaCreacion}</b> Vencimiento: <b>{FechaFin}</b> </div>',\"</div>\"].join(\"\"),store:\"Factur",603965,32,",mode:\"MULTI\"",603136,69,"facturas pendientes</div>'}",590736,66,"});Ext.define(\"Imobile.view.cobranza.Factura",598016,53,"facturas",593629,72,"layout:\"vbox\",items:[{xtype:\"facturaslist\",flex:5},{xtype:\"button\",text:\"Aplicar pago\",ui:\"confirm\",itemId:\"aplicarPago\",margin:10",593518,33,"branza.FormasDePago",591056,39,"formasdepago",597773,90,"Nombre}\",store:\"FormasDePago\"}});Ext.define(\"Imobile.view.cobranza.TotalAPagar",601568,51,"totalapagarlist\",config:{itemCls:\"factura\",itemTpl:\"{tipo}: <b>{monto}</b>\",store:\"Total",601514,32,"cobranza.Total",598015,35,"xtype:\"totales",601131,59,"flex:1,itemId:\"aCobrar\",html:\"A cobrar\",cls:\"aCobrar2\"},{xtype:\"container\",html:\"Pagado\",flex:1,itemId:\"pagado\",style:{background:\"black\",color:\"green\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Pendiente\",flex:1,itemId:\"pendiente\",style:{background:\"black\",color:\"red\",\"margin-righ\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}",593518,33,"branza.TotalAPag",591534,35,"requires:[],xtype:\"totalapagarcontainer\",config:{layout:\"vbox\"",596885,42,"totalapagarlist\",flex:5},{xtype:\"totalescontainer\",flex:1},{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"button\",text:\"Terminar\",ui:\"confirm\",itemId:\"terminar\",margin:10,flex:1},{xtype:\"button\",text:\"Cancelar\",ui:\"decline\",itemId:\"cancelar\",margin:10,flex:1}]",597968,38,"Transac",591052,43,"transaccionlist\",config:{itemTpl:\"Folio: {NumeroDocumento} <br> Tipo de transacci\ufffff\ufffffn: {TipoTransaccion}\",store:\"Transacciones",594552,39,590087,77,"transaccion",590171,96,"ventas.Almacen",601568,51,"almacenlist\",config:{itemTpl:['<tpl for=\".\"><tpl if=\"Predeterminado == true\"><div class=\"imobile-cliente-tpl direc-selected\"><tpl else>",603757,33,"</tpl>',\"<span><p><b>{CodigoAlmacen}</b> {NombreAlmacen",603837,104,"</tpl>'].join(\"\")",603968,53,"form.prospectos.Prospe",594844,40,"prospectosform\",config:{padding:\"10 15 15 15\",scrollable:\"vertical\",",598716,137,"agregarProspecto",595058,81,"prospecto",588459,40,599019,71,"fecha\",label:\"Fecha\",required:false,disabled:true,value:Ext.Date.format(new Date(),\"d-m-Y\")},{xtype:\"textfield\",name:\"codig",597283,45,"razonSocial\",label:\"Raz\ufffff\ufffffn Social",599676,32,"Persona\",label:\"Tipo de persona\"},{xtype:\"textfield\",name:\"rfc\",label:\"RFC\",required:false}]},{xtype:\"fieldset\",itemId:\"direccion\",title:\"Direcci\ufffff\ufffffn",588459,40,599019,71,"calle\",label:\"Calle\"},{xtype:\"textfield\",name:\"noExt\",label:\"No. Ext\",required:false},{xtype:\"textfield\",name:\"noInt\",label:\"No.Int\",required:false},{xtype:\"textfield\",name:\"colonia\",label:\"Colonia\"},{xtype:\"textfield\",name:\"ciudad\",label:\"Ciudad\"},{xtype:\"textfield\",name:\"municipio\",label:\"Municipio\"},{xtype:\"textfield\",name:\"cp\",label:\"C.P.\"},{xtype:\"textfield\",name:\"estado\",label:\"Estado\"}]},{xtype:\"fieldset\",itemId:\"encargado\",title:\"Encargado",588459,40,599019,71,"nombre",597339,43,"telOficina\",label:\"Tel. Oficina\"},{xtype:\"textfield\",name:\"telMovil\",label:\"Tel. M\ufffff\ufffffvil\",required:false}]},{xtype:\"fieldset\",title:\"Productor\"},{xtype:\"fieldset\",itemId:\"cultivos\",defaults:{",599005,51,",hidden:true},items:[{xtype:\"checkboxfield\",name:\"cultivos\",label:\"Cultivos\",hidden:false,itemId:\"cultivos\"}]},{xtype:\"fieldset\",itemId:\"superficie\",defaults:{",599005,47,"70%\",hidden:true},items:[{xtype:\"checkboxfield\",name:\"superficie\",label:\"Superficie\",hidden",595409,37,"mpoAbierto\",label:\"Campo Abierto\",itemId:\"campoAbier",595678,32,"invernadero\",label:\"Invernadero\",itemId:\"invernadero\"},{xtype:\"numberfield\",name:\"macroTunel\",label:\"Macro T\ufffff\ufffffnel\",itemId:\"macroTunel",595757,35,"\",label:\"Total\",itemId:\"total",595086,32,"istribuidor\",title:\"Distribuidor\",defaults:{",599005,47,"6",599053,37,"zonaDeInfluencia\",label:\"Zona de influencia\"},{xtype:\"textfield\",name:\"comercializa\",label:\"Comercializa\"},{xtype:\"textfield\",name:\"encargadoCompras\",label:\"Encargado de compras\"},{xtype:\"textfield\",name:\"encargadoPagos\",label:\"Encargado de pagos\"},{xtype:\"textfield\",name:\"responsableTecnico\",label:\"Responsable T\ufffff\ufffffcnico\"}]},{xtype:\"fieldset\",itemId:\"productosUtilizados\",title:\"Productos utilizados\",defaults:{",599005,85,"productos\",label:\"Productos\"}]},{xtype:\"fieldset\",itemId:\"comentarios\",title:\"Comentarios\",defaults:{",599005,72,"areafield\"}]",590236,34,"spectos.Prospecto",589584,40,"prospecto",603732,62,"p>{codig",589737,45,"razonSocial",589793,40,"Prospe",590589,97,"spe",590688,207,"rProspectos\",placeHolder:\" Buscar prospecto...\",flex:12,cls:\"list-search\"},{xtype:\"button\",iconCls:\"add\",itemId:\"agregar\",flex:1",590175,61,",loadMoreText:\"Ver M\ufffff\ufffffs...",589536,33,"obranza.NavigationCobranza",589371,36,"navigationcobranza",603428,66,"Cls:\"logo",603525,63,"ago\"}]},items:[{xtype:\"totalapagar",593508,36,"form.cobranza.MontoAPagar",588384,36,"montoapagarform\",config:{padding:\"0 15 15 15\"",593700,33,"Title\",defaults:{labelWidth:\"40%\",required:true,labelCls:\"labels\",inputCls:\"labels\"},items:[{xtype:\"numberfield\",name:\"monto\",placeHolder:\"Ingrese el monto a pagar\",label:\"Monto\"}]",588669,54,"Pagar\",ui:\"action\",itemId:\"pagar",589536,33,"obranza.MontoAPagarForm",591536,33,"requires:[],xtype:\"montoapagarformcontainer\",config:{layout:{type:\"vbox\"},items:[{xtype:\"montoapagarform",601326,39,604026,205,"CodigoUsuario:undefined,CodigoSociedad:undefined,CodigoDispositivo:undefined,Contrasenia:undefined,Token:undefined,direccionEntrega:undefined,direccionFiscal:undefined,dirIP:\"25.15.241.121:88\",almacenes:undefined",604230,37,",menu:\"menu\",opcionesOrden:\"opcionesorden\",direcciones:\"direccionescontainer\",productosOrden:\"productosorden\",productosView:\"productosview\",navigationOrden:\"navigationorden\",totales:\"totalescontainer\",listaFacturas:\"facturaslist\",ordenContainer:\"ordencontainer\",partidaContainer:\"partidacontainer\",tituloContainer:\"titulocontainer\",fileLoadBtn:\"configuracioncontainer #fileLoadBtn\",loadedImage:\"configuracioncontainer #loadedImage\"",604267,43,",\"menu dataview\":{itemtap:\"onSelectMenu\"},\"main navigationview #agregarProductos\":{tap:\"onAgregarPartida\"},navigationorden:{pop:\"onPopNavigationOrden\",back:\"onBack\",push:\"onPushNavigationOrden\"},menu:{back:\"onBackMenu\"}}},onLoginUser:function(c){var b=this,a=c.getValues();Ext.data.JsonP.request({url:\"http://\"+b.dirIP+\"/iMobile/COK1_CL_UsuarioiMobile/Login\",params:{CodigoUsuario:a.usuario,CodigoSociedad:\"001\",CodigoDispositivo:\"004\",Contrasenia:a.password},callbackKey:\"callback\",success:function(d){var e=d.Procesada;if(e){localStorage.setItem(\"Token\",d.Token);localStorage.setItem(\"CodigoUsuario\",d.Usuario.Codigo);localStorage.setItem(\"CodigoSociedad\",\"001\");localStorage.setItem(\"CodigoDispositivo\",\"004\");localStorage.setItem(\"NombreUsuario\",d.Usuario.Nombre);localStorage.setItem(\"Contrasenia\",d.Usuario.Contrasenia);localStorage.setItem(\"NombreDispositivo\",d.ConfiguracionDispositivo.Nombre);b.getMain().setActiveItem(1);b.almacenes=d.ConfiguracionDispositivo.Almacenes}else{Ext.Msg.alert(\"Datos Incorrectos\",d.Descripcion,Ext.emptyFn)}}})},onSelectMenu:Ext.emptyFn,aleatorio:function(a,d){var c=d-a,b=Math.random()*c,b=Math.floor(b);return parseInt(a)+b},dameColorAleatorio:function(){var c=new Array(\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"),a=\"#\",b;for(i=0;i<6;i++){b=this.aleatorio(0,c.length);a+=c[b]}return a},onBack:function(b){var c=this,d=b.getActiveItem().getActiveItem();var a=Ext.getStore(\"Ordenes\");if(a.getData().items.length<=1){c.getPartidaContainer().down(\"list\").emptyTextCmp.show()}else{c.getPartidaContainer().down(\"list\").emptyTextCmp.hide()}if(d.isXType(\"partidacontainer\")||d.isXType(\"clientecontainer\")||d.isXType(\"editarpedidoform\")){b.getActiveItem().setActiveItem(0);b",612896,46,"show()}b.getNavigationBar().setTitle(c.idCliente)},onBackMenu:function(d){var e=this,c=Ext.getStore(\"Clientes\"),a=e.getMenu(),b,f={CodigoUsuario:e.CodigoUsuario,CodigoSociedad:e.CodigoSociedad,CodigoDispositivo:e.CodigoDispositivo,Token:e.Token};if(d.getActiveItem().isXType(\"clienteslist\")){b=a.down(\"toolbar\");a.remove(b,true);c.getProxy().setUrl(\"http://\"+e.dirIP+\"",618068,41,"iMobile\");c.setParams(f);c.load()}},onPushNavigationOrden:function(a){var b=this;a.getNavigationBar().setTitle(b.idCliente)},pushMenu:function(a){var b=this;if(a.getActiveItem().opcion!=undefined){a.getNavigationBar().setTitle(b.idCliente)}},launch:function(){var a",611636,32,"on(\"load\",a.estableceCantidadAProductos);Ext.getStore(\"Facturas\").on(\"load\",a.agregaSaldoAMostrar",606201,697,",{xtype:\"navigationcobranza",606896,141,"titulo:undefined,opcion:undefined,clienteSeleccionado:undefined,CodigoAlmacen:undefined,codigoImpuesto:undefined,tasaImpuesto:0,sujetoImpuesto:undefined,totalDeImpuesto:0,codigoMonedaPredeterminada:undefined,codigoMonedaSeleccinada:undefined,tipoCambio:1,aPagar:0,pagado:0,pendiente:0,actionOrden:undefined,config:{control:{\"productoslist #btnBuscarProductos\":{tap:\"onBuscaProductos\"},\"productoslist #buscarProductos\":{clearicontap:\"limpiaBusqued",607332,36,607312,59,"tidad\":{change:\"actualizaCantidad\"},\"agregarproductosform #almacenProducto\":{focus:\"onListAlmacen\"},\"clienteslist #buscarClientes\":{clearicontap:\"limpiaBusquedaClientes\"},\"clienteslist #btnBuscarClientes\":{tap:\"onBuscaClientes\"},clienteslist:{itemsingle",607510,65,"Cliente",607620,306,608076,130,",itemtap:\"editar",608198,37,"activate:\"confirmaTerminarOrden\"},\"clientecontainer #guardar\":{tap:\"guardaDatosDeCliente\"",608235,141,",cobranzalist:{itemtap:\"muestraFacturasPendientes\"},\"totalapagarcontainer #cancelar\":{tap:\"cancelaPago\"},\"totalapagarcontainer #terminar\":{tap:\"onTerminarCobranza\"},\"navigationcobranza #agregarPago\":{tap:\"onAgregarPago\"},navigationcobranza:{pop:\"onPopNavigationCobranza\"},\"facturascontainer #aplicarPago\":{tap:\"muestraCobranza\"},formasdepagolist:{itemtap:\"agregaPago\"},\"montoapagarform #pagar\":{tap:\"onPagar\"},totalapagarlist:{itemtap:\"editaPago\",itemswipe:\"eliminaPago\"},transaccionlist:{itemtap:\"onSeleccionarTransaccion\"},almacenlist:{itemtap:\"onSeleccionarAlmacen\"},\"prospe",607403,34,"Prospecto\"},\"prospectosform checkboxfield\":{change:\"toggleFieldSetItems\"},\"prospectosform numberfield\":{keyup:\"respondeAKeyUp\"},fileLoadBtn:{loadsuccess:\"onFileLoadSuccess\",loadfailure:\"onFileLoadFailure\"}}},onSelectMenu:function(b,c,f,a,d){var e=this,b=e.getMenu();e.opcion=a.get(\"action\");switch(e.opcion){",608560,88,"prospectoslist\"});e",608665,37,"case\"cobranza\":b.push({xtype:\"clienteslist\",opcion:e.opcion});Ext.getStore(\"Clientes\").resetCurrentPage();Ext.getStore(\"Clientes\").load();break;case\"salir\":e",608841,320,"f,d,g,c){var e=this,a=Ext.getStore(\"Direcciones\"),b=e.getMain().getActiveItem();a.each(function(k,h,j){k.set(\"Predeterminado\",false)});a.getAt(d).set(\"Predeterminado\",true);if(e.entrega){e.direccionEntrega=c.data.CodigoDireccion}else{e.direccionFiscal=c.data.CodigoDireccion;e.codigoImpuesto=c.data.CodigoImpuesto;e.tasaImpuesto=c.data.Tasa}b.pop()},seleccionaMoneda:function(g,d,f,c){var h=this,j=h.getMain().getActiveItem(),a=c.get(\"CodigoMoneda\"),e=h.getOpcionesOrden(),b=e.down(\"editarpedidoform\");if((h.codigoMonedaSeleccinada!=a)&&(h.codigoMonedaSeleccinada==h.codigoMonedaPredeterminada)){if(h.dameProductoConMonedaPredeterminada()!=\"No hay\"){h.mandaMensaje(\"Error\",\"No es posible cambiar la configuraci\ufffff\ufffffn debido a que la moneda del producto con c\ufffff\ufffffdigo \"+h.dameProductoConMonedaPredeterminada()+\" es \"+h.codigoMonedaPredeterminada+\". Elim\ufffff\ufffffnelo primero de la orden.\")}else{h.obtenerTipoCambio(a,c)}}else{if(a!=h.codigoMonedaSeleccinada){h.codigoMonedaSeleccinada=h.codigoMonedaPredeterminada;h.actualizaOrden(a);b.setValues({CodigoMoneda:h.codigoMonedaSeleccinada,tipoCambio:1});h.estableceMonedaPredeterminada(c)}}j.pop()},estableceMonedaPredeterminada:function(a){var b=Ext.getStore(\"Monedas\");b.each(function(e,c,d){e.set(\"Predeterminada\",false)});a.set(\"Predeterminada\",true)},dameProductoConMonedaPredeterminada:function(){var c=this,b,d=\"No hay\",a=Ext.getStore(\"Ordenes\");for(b=0;b<a.getCount();b++){if(a.getAt(b).get(\"moneda\")==c.codigoMonedaPredeterminada){d=a.getAt(b).get(\"CodigoArticulo\");break}}return d},actualizaOrden:function(c){var e=this,d,b,a=Ext.getStore(\"Ordenes\");switch(c){case\"$\":a.each(function(h,f,g){d=Imobile.core.FormatCurrency.formatCurrencytoNumber(h.get(\"Precio\"))*e.tipoCambio;b=Imobile.core.FormatCurrency.formatCurrencytoNumber(h.get(\"importe\"))*e.tipoCambio;d=Imobile.core.FormatCurrency.currency(d,c);b=Imobile.core.FormatCurrency.currency(b,c);h.set(\"Precio\",d);h.set(\"importe\",b);h.set(\"totalDeImpuesto\",h.get(\"totalDeImpuesto\")*e.tipoCambio)});e.actualizarTotales();break;case\"USD\":a.each(function(h,f,g){d=Imobile.core.FormatCurrency.formatCurrencytoNumber(h.get(\"Precio\"))/e.tipoCambio;b=Imobile.core.FormatCurrency.formatCurrencytoNumber(h.get(\"importe\"))/e.tipoCambio;d=Imobile.core.FormatCurrency.currency(d,c);b=Imobile.core.FormatCurrency.currency(b,c);h.set(\"Precio\",d);h.set(\"importe\",b);h.set(\"totalDeImpuesto\",h.get(\"totalDeImpuesto\")/e.tipoCambio)});e.actualizarTotales();break}",609543,69,609678,109,"e,c,f,a){var d=this,b=Ext.getStore(\"Ordenes\")",609806,118,"h){if(h==\"yes\"){var g=b.find(\"id\",a.data.id);b.removeAt(g);d.actualizarTotales();if(b.getData().items.length<2){d.getPartidaContainer().down(\"list\").emptyTextCmp.show()}else{d.getPartidaContainer().down(\"list\").emptyTextCmp.hide()}}})},cambiaItem:function(h,g,d){var f=this,c=f.getNavigationOrden(),b=c",612896,45,";if(g.xtype==\"clientecontainer\"){b.setText(\"Back\").show();b.setUi(\"back\");var e=g.down(\"clienteform\"),a=Ext.getStore(\"Direcciones\");e.setValues(f.clienteSeleccionado)}if(g.xtype==\"editarpedidoform\"){if(f.codigoMonedaSeleccinada==f.codigoMonedaPredeterminada){f.clienteSeleccionado.tipoCambio=1}else{f.clienteSeleccionado.tipoCambio=f.tipoCambio}f.clienteSeleccionado.CodigoMoneda=f.codigoMonedaSeleccinada;g.setValues(f.clienteSeleccionado);b.setText(\"Back\").show();b.setUi(\"back\")}if(g.xtype==\"partidacontainer\"){b.setText(\"Agregar\").show();b.setUi(\"normal\")}},muestraDirecciones:function(f,d,g,c){var e=this,b=e.getMain().getActiveItem(),a=Ext.getStore(\"Direcciones\");a.clearFilter();if(c.data.action==\"entrega\"){a.filter(\"TipoDireccion\",\"B\");e.entrega=true}else{a.filter(\"TipoDireccion\",\"S\");e.entrega=false}b",611477,32,"b",612896,52,611591,33,"){var a",611636,46,"a",611870,47,611763,40,"){var b",611815,34,"b.lista(true);b",611870,93,"e,c,d){e.set(\"color\",b",611985,32,"agregaProductos:function(d){var b,k,e,h,l,j=this,l=Ext.getStore(\"Ordenes\"),f=Ext.getStore(\"Productos\"),c=j.getMain().getActiveItem(),b=d.up(\"agregarproductosform\"),k=b.getValues(),e=k.NombreArticulo,h=k.cantidad,a=k.moneda,g=k.importe;console.log(b.getValues());Ext.getStore(\"Productos\").resetCurrentPage();if(Ext.isEmpty(e)||Ext.isEmpty(h)){j",612500,126,"if(b.modo!=\"edicion\"){if(a!=j.codigoMonedaSeleccinada){if(a==j.codigoMonedaPredeterminada){j.mandaMensaje(\"Imposible agregar\",\"No es posible agregar el producto a la orden debido a que la configuraci\ufffff\ufffffn de moneda actual es \"+j.codigoMonedaSeleccinada+\"  y la moneda del producto es \"+a+\". Cambie primero la configuraci\ufffff\ufffffn de moneda a \"+a+\".\")}else{j.ayudaAAgregar(b,\"cantidad\");j.obtenerTipoCambio(a)}}else{j.ayudaAAgregar(b,\"cantidad\");j.ayudaAAgregar(b,\"monedaIgual\")}}else{j.ayudaAAgregar(b,\"cantidad\");j.ayudaAAgregar(b,\"edicion\")}}},ayudaAAgregar:function(c,j){var c,e,k,s,p,l,o,h,b,m,t=this,p=Ext.getStore(\"Ordenes\"),n=Ext.getStore(\"Productos\"),a=t.getNavigationOrden(),e=c.getValues(),k=e.NombreArticulo,s=e.cantidad,d=e.moneda,g=e.importe,l=e.CodigoArticulo,o=n.find(\"CodigoArticulo\",l),h=n.getAt(o),b=h.get(\"cantidad\");console.log(n);switch(j){case\"monedaIgual\":e.totalDeImpuesto=t.totalDeImpuesto;e.Imagen=h.get(\"Imagen\");p.add(e);a.pop();t.actualizarTotales();break;case\"monedaDiferente\":m=Imobile.core.FormatCurrency.formatCurrencytoNumber(e.Precio)*t.tipoCambio;e.importe=m*s;m=Imobile.core.FormatCurrency.currency(m,t.codigoMonedaSeleccinada);e.Precio=m;e.importe=Imobile.core.FormatCurrency.currency(e.importe,t.codigoMonedaSeleccinada);e.totalDeImpuesto=t.totalDeImpuesto*t.tipoCambio;e.Imagen=h.get(\"Imagen\");p.add(e);a.pop();t.actualizarTotales();break;case\"edicion\":var q=c.ind,r=p.getAt(q),f,d=e.moneda;if(d!=t.codigoMonedaSeleccinada){m=Imobile.core.FormatCurrency.formatCurrencytoNumber(e.Precio)*t.tipoCambio;g=m*s;m=Imobile.core.FormatCurrency.currency(m,t.codigoMonedaSeleccinada);g=Imobile.core.FormatCurrency.currency(g,t.codigoMonedaSeleccinada);f=t.totalDeImpuesto*t.tipoCambio;r.set(\"Precio\",m);r.set(\"cantidad\",s);r.set(\"importe\",g);r.set(\"totalDeImpuesto\",t.totalDeImpuesto);a.pop();t.actualizarTotales()}else{r.set(\"cantidad\",s);r.set(\"importe\",g);r.set(\"totalDeImpuesto\",t.totalDeImpuesto);a.pop();t.actualizarTotales()}break;case\"cantidad\":var l=e.CodigoArticulo,o=n.find(\"CodigoArticulo\",l),h=n.getAt(o),b=h.get(\"cantidad\");h.set(\"cantidad\",b+s);break}},estaEnOrden:function(c){var a=Ext.getStore(\"Ordenes\"),b=a.find(\"CodigoArticulo\",c);return b",613316,54,"resetCurrentPage();Ext.getStore(\"Cliente",611664,32,613359,48,"Ext.getStore(\"Ordenes\").load()},onBuscaProductos:function(c,g,b",611808,40,",f=c.up(\"toolbar\").down(\"#buscarProductos\").getValue();Ext.getStore(\"Productos\").resetCurrentPage();a.setParams({Criterio:f,CardCode:d.idCliente});a.load()},limpiaBusquedaProductos:function(c,f,b",611808,41,"Ext.getStore(\"Productos\").resetCurrentPage();a.setParams({Criterio:\"\",CardCode:d.idCliente});a.load()},onBuscaClientes:function(c,f,b){var a=Ext.getStore(\"Clientes\"),d=c.up(\"toolbar\").down(\"#buscarClientes\").getValue();Ext.getStore(\"Clientes\").resetCurrentPage();a.setParams({Criterio:d});a.load()},limpiaBusquedaClientes:function(c,d,b){var a=Ext.getStore(\"Clientes\");Ext.getStore(\"Clientes\").resetCurrentPage();a.setParams({Criterio:\"\"});a.load()},lista:function(c",614258,33,",b=this;a.clearFilter();a.filter(\"DesplegarEnPanel\",c)",614433,78,"f,d,h,b){var e=this,a=e.getMenu(),c=b.get(\"NombreSocio\"),g=({xtype:\"toolbar\",docked:\"top\",title:\"titulo\"});e.idCliente=b.get(\"CodigoSocio\");e.titulo=c;g.title=e.titulo;e.opcion=f.opcion;switch(e.opcion){case\"venta\":console.log(a.getActiveItem().xtype);if(a.getActiveItem().xtype==\"opcionclientelist\"){return}a",614604,39,"e.idCliente});Ext.data.JsonP.request({url:\"http://\"+e.dirIP+\"/iMobile/COK1_CL_Socio/ObtenerSocioiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),CardCode:e.idCliente},callbackKey:\"callback\",success:function(j){var k=j.Procesada;e.clienteSeleccionado=j.Data[0];if(k){e.estableceDirecciones(a,g)}else{Ext.Msg.alert(\"Datos Incorrectos\",j.Descripcion,Ext.emptyFn)}}});break;case\"cobranza\":if(a.getActiveItem().xtype==\"cobranzalist\"){return}a.push({xtype:\"cobranzalist\",title:e.idCliente});a.add(g);break}this.muestralistaOrden()},estableceDirecciones:function(b,d){var c=this,a=Ext.getStore(\"Direcciones\");a.setData(c.clienteSeleccionado.Direcciones);a.clearFilter();a.filter(\"TipoDireccion\",\"S\");if(b.getActiveItem().xtype==\"clienteslist \"){return}if(a.getCount()>0){b.add(d);c.direccionFiscal=a.getAt(0).data.CodigoDireccion;c.codigoImpuesto=a.getAt(0).data.CodigoImpuesto;c.tasaImpuesto=a.getAt(0).data.Tasa;a.getAt(0).set(\"Predeterminado\",true);a.clearFilter();a.filter(\"TipoDireccion\",\"B\");if(a.getCount()>0){c.direccionEntrega=a.getAt(0).data.CodigoDireccion;a.getAt(0).set(\"Predeterminado\",true)}}else{c.mandaMensaje(\"Sin direcci\ufffff\ufffffn fiscal\",\"Este cliente no cuenta con direcci\ufffff\ufffffn fiscal, contacte a su administrador de SAP B1\");b.pop();a.removeAll()}",614687,33,"j,b,h",611808,40,",g=b.data;Ext.data.JsonP.request({url:\"http://\"+d.dirIP+\"",618895,33,"ArticuloiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),CardCode:d.idCliente,Criterio:g.CodigoArticulo},callbackKey:\"callback\",success:function(e){var k=e.Procesada;if(k){var l=a.find(\"CodigoArticulo\",g.CodigoArticulo),m=a.getAt(l);m.set(e.Data[0]);console.log(m);d.llenaAgregarProductos(e.Data[0])}else{Ext.Msg.alert(\"Datos Incorrectos\",e.Descripcion,Ext.emptyFn)}}})},llenaAgregarProductos:function(d){var m=this,n=m.getMain().getActiveItem(),g=m.almacenes,f,c,k,e,h,l,b,j,a=d.ListaPrecios[0].CodigoMoneda;if(n.getActiveItem().xtype==\"agregarproductosform\"){return}n",612141,35,",modo:\"agregar\"});Ext.Array.forEach(g,function(q,o){var p=q.Predeterminado;if(p){d.NombreAlmacen=q.NombreAlmacen;m.CodigoAlmacen=q.CodigoAlmacen}});c=n.getActiveItem();c.setValues(d);f=Imobile.core.FormatCurrency.currency(d.ListaPrecios[0].Precio,a),k=1;Ext.data.JsonP.request({url:\"http://\"+m.dirIP+\"/iMobile/COK1_CL_Consultas/ObtenerPrecioEspecialiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),ItemCode:d.CodigoArticulo,CardCode:m.idCliente,ListaPrecio:d.ListaPrecios[0].CodigoLista,Cantidad:k},callbackKey:\"callback\",success:function(p){var q=p.Procesada,o=Imobile.core.FormatCurrency.formatCurrencytoNumber(f);if(o==0){h=0}else{h=o-p.Data[0];h=h*100/o}if(q){l=p.Data[0];m.sujetoImpuesto=d.SujetoImpuesto;if(m.sujetoImpuesto){b=l*m.tasaImpuesto/100;m.totalDeImpuesto=b;console.log(m.totalDeImpuesto)}else{m.totalDeImpuesto=0}j=l*k;c.setValues({Precio:f,cantidad:k,moneda:a,PorcentajeDescuento:h+\"%\",importe:Imobile.core.FormatCurrency.currency(j,a),precioConDescuento:Imobile.core.FormatCurrency.currency(l,a),CodigoAlmacen:m.CodigoAlmacen});c.getValues();m.actualizaCantidad(null,k,null)}else{Ext.Msg.alert(\"Datos Incorrectos\",p.Descripcion,Ext.emptyFn)}}})},editarPartida:function(g,e,f,d){var h=this,j=h.getMain().getActiveItem(),b,k,m,l=d.data,a=d.data.id,n=Ext.getStore(\"Ordenes\"),c=n.find(\"id\",a);if(j.getActiveItem().xtype==\"agregarproductosform\"){return}j",612141,35,",modo:\"edicion\",ind:c});b=j.getActiveItem();k=b.down(\"fieldset\");k.setTitle(\"Editar producto\");k.down(\"#descripcion\").setDisabled(true);j",612896,53,"if(l.moneda!=h.codigoMonedaSeleccinada){m=h.ponValoresOriginalesAAgregarProductoForm(l,l.moneda);b.setValues(m);b.setValues({importe:m.importe})}else{b.setValues(l)}},ponValoresOriginalesAAgregarProductoForm:function(b,e){var g=this,f,d,c,a,c={Precio:b.Precio,importe:b.importe,totalDeImpuesto:b.totalDeImpuesto,CodigoArticulo:b.CodigoArticulo,CodigoSocio:b.CodigoSocio,Disponible:b.Disponible,Imagen:b.Imagen,NombreAlmacen:b.NombreAlmacen,CodigoAlmacen:b.CodigoAlmacen,NombreArticulo:b.NombreArticulo,cantidad:b.cantidad,PorcentajeDescuento:b.PorcentajeDescuento,id:b.id,moneda:b.moneda,precioConDescuento:b.precioConDescuento};if(e!=g.codigoMonedaSeleccinada){if(e==\"USD\"&&g.codigoMonedaSeleccinada==\"$\"){f=Imobile.core.FormatCurrency.formatCurrencytoNumber(b.Precio)/g.tipoCambio;d=Imobile.core.FormatCurrency.formatCurrencytoNumber(b.importe)/g.tipoCambio;totalDeImpuesto=b.totalDeImpuesto;c.Precio=Imobile.core.FormatCurrency.currency(f,e);c.importe=Imobile.core.FormatCurrency.currency(d,e);c.totalDeImpuesto=totalDeImpuesto/g.tipoCambio;if(e!=g.codigoMonedaSeleccinada){if(e==\"USD\"&&g.codigoMonedaSeleccinada==\"$\"){f=Imobile.core.FormatCurrency.formatCurrencytoNumber(b.Precio)/g.tipoCambio;d=Imobile.core.FormatCurrency.formatCurrencytoNumber(b.importe)/g.tipoCambio;a=b.totalDeImpuesto;c.Precio=Imobile.core.FormatCurrency.currency(f,e);c.importe=Imobile.core.FormatCurrency.currency(d,e);c.totalDeImpuesto=a/g.tipoCambio}}}}return c},actualizaCantidad:function(h",614719,47,"f=a.getActiveItem().getValues(),d=Imobile.core.FormatCurrency.formatCurrencytoNumber(f.precioConDescuento)*g,c=d;if(e.sujetoImpuesto){totaldeimpuesto=d*e.tasaImpuesto/100;e.totalDeImpuesto=totaldeimpuesto}a.getActiveItem().setValues({importe:Imobile.core.FormatCurrency.currency(c,f.moneda)})},guardaDatosDeCliente:function(a){var b=this;b.mandaMensaje(\"C\ufffff\ufffffdigos de direcci\ufffff\ufffffn\",\"Entrega: \"+b.direccionEntrega+\"\\nFiscal: \"+b.direccionFiscal)},onOpcionesCliente:function(f,d,e,c){var g=this,h=g.getMenu(),b=g.getMain(),k=c.get(\"action\"),l=({xtype:\"toolbar\",docked:\"top\",title:g.titulo});switch(k){case\"orden\":g.actionOrden=\"crear\";b.setActiveItem(2);g.getNavigationOrden().getNavigationBar().setTitle(g.idCliente);b",615103,56,"g.getPartidaContainer().down(\"list\").emptyTextCmp.show();var a=Ext.getStore(\"Monedas\");a.load({callback:function(n,m){Ext.Array.each(n,function(p,o,r){var q=p.get(\"Predeterminada\");if(q){g.codigoMonedaPredeterminada=p.get(\"CodigoMoneda\");g.codigoMonedaSeleccinada=g.codigoMonedaPredeterminada}g.actualizarTotales()})}});b.getActiveItem().add(l);break;case\"visualizar\":if(h.getActiveItem().xtype==\"transaccionlist\"){return}g.actionOrden=\"actualizar\";var j=Ext.getStore(\"Transacciones\");Ext.getStore(\"Transacciones\").resetCurrentPage();j.setParams({CardCode:g.idCliente});j.load();h.push({xtype:\"transaccionlist\",title:g.idCliente});break}},onEliminarOrden:function(c,d){var b=this,a=Ext.getStore(\"Ordenes\")",615685,131,"h){if(h==\"yes\"){var f=b.getMain().getActiveItem(),g=f.down(\"toolbar\");a.removeAll();b.getMain().setActiveItem(1);f.remove(g,true)}else{d",615949,48,"c",616231,42,",e=d.getOpcionesOrden().getActiveItem(),b=Ext.getStore(\"Productos\");if(e.isXType(\"partidacontainer\")){Ext.getStore(\"Productos\").resetCurrentPage();b.setParams({CardCode:d.idCliente}",616106,35,"b.clearFilter();b.load();a",612896,52,"}else{a.getActiveItem().setActiveItem(0)}},estableceCantidadAProductos:function(a){var c=Ext.getStore(\"Ordenes\"),f,e,b,d;if(c.getCount()>0){c.each(function(j,g,h){f=j.get(\"CodigoArticulo\");d=j.get(\"cantidad\");e=a.find(\"CodigoArticulo\",f);if(e!=-1){b=a.getAt(e).get(\"cantidad\");a.getAt(e).set(\"cantidad\",b+d)}})}",616194,35,616231,42,",f=d.getOpcionesOrden(),e=c.getActiveItem().getActiveItem();if(e.isXType(\"clientecontainer\")||e.isXType(\"editarpedidoform\")){a",612896,46,"show()}if(e.isXType(\"partidacontainer\")&&b.isXType(\"agregarproductosform\")){a",612896,46,"show()}c.getNavigationBar().setTitle(d.idCliente)},confirmaTerminarOrden:function(e,c,a,b){var d=this;if(d.actionOrden==\"crear\"){Ext.Msg.confirm(\"Terminar orden\",\"\ufffff\ufffffDesea terminar la orden de venta?\",function(f){if(f==\"yes\"){d.onTerminarOrden()}else{d.getOpcionesOrden().setActiveItem(0)}})}else{Ext.Msg.confirm(\"Actualizar orden\",\"\ufffff\ufffffDesea actualizar la orden de venta?\",function(f){if(f==\"yes\"){d.onTerminarOrden()}else{d.getOpcionesOrden().setActiveItem(0)}})}},onTerminarOrden:function(){var e=this,d=0,a=Ext.getStore(\"Ordenes\"),h=a.getData().items,b,g,c=e.clienteSeleccionado;console.log(c);if(h.length>0){var f={CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),\"Orden.CodigoSocio\":e.idCliente,\"Orden.NombreSocio\":e.titulo,\"Orden.FechaCreacion\":Ext.DateExtras.dateFormat(new Date(),\"Y-m-d\"),\"Orden.FechaEntrega\":Ext.DateExtras.dateFormat(new Date(),\"Y-m-d\"),\"Orden.CodigoMoneda\":\"$\",\"Orden.CodigoImpuesto\":e.codigoImpuesto,\"Orden.RFCSocio\":c.RFC,\"Orden.DireccionEntrega\":e.direccionEntrega,\"Orden.DireccionFiscal\":e.direccionFiscal};Ext.Array.forEach(h,function(l,j,k){d+=(Imobile.core.FormatCurrency.formatCurrencytoNumber(l.get(\"precioConDescuento\"))*l.get(\"cantidad\"))+l.get(\"totalDeImpuesto\");f[\"Orden.Partidas[\"+j+\"].CodigoArticulo\"]=l.get(\"CodigoArticulo\");f[\"Orden.Partidas[\"+j+\"].Cantidad\"]=l.get(\"cantidad\");f[\"Orden.Partidas[\"+j+\"].Precio\"]=Imobile.core.FormatCurrency.formatCurrencytoNumber(l.get(\"Precio\"));f[\"Orden.Partidas[\"+j+\"].CodigoAlmacen\"]=l.get(\"CodigoAlmacen\");f[\"Orden.Partidas[\"+j+\"].Linea\"]=j;f[\"Orden.Partidas[\"+j+\"].Moneda\"]=l.get(\"moneda\");f[\"Orden.Partidas[\"+j+\"].Importe\"]=Imobile.core.FormatCurrency.formatCurrencytoNumber(l.get(\"precioConDescuento\"))*l.get(\"cantidad\");f[\"Orden.Partidas[\"+j+\"].PorcentajeDescuento\"]=Imobile.core.FormatCurrency.formatCurrencytoNumber(l.get(\"PorcentajeDescuento\"))});f[\"Orden.TotalDocumento\"]=parseFloat(d).toFixed(2);if(e.actionOrden==\"crear\"){b=\"http://\"+e.dirIP+\"/iMobile/COK1_CL_OrdenVenta/AgregarOrdenMobile\";g=\"Se agrego la orden correctamente con folio: \"}else{f[\"Orden.NumeroDocumento\"]=e.NumeroDocumento;b=\"http://\"+e.dirIP+\"/iMobile/COK1_CL_OrdenVenta/ActualizarOrdenVentaiMobile\";g=\"Se acualizo la orden correctamente con folio: \"}console.log(f,\"paramss actualizar\");Ext.data.JsonP.request({url:b,params:f,callbackKey:\"callback\",success:function(j){console.log(j,\"akhkahahajhajdh\");if(j.Procesada){e.getMain().setActiveItem(1);Ext.Msg.alert(\"Orden Procesada\",g+j.CodigoUnicoDocumento);a.clearData();e.getNavigationOrden().remove(e.getNavigationOrden().down(\"toolbar\"),true);e.getMenu().remove(e.getMenu().down(\"toolbar\"),true);e.getMain().getActiveItem().pop()}else{Ext.Msg.alert(\"Orden No Procesada\",\"No se proceso la orden correctamente: \"+j.Descripcion);e.getOpcionesOrden().setActiveItem(0)}}})}else{e.getOpcionesOrden().setActiveItem(0);Ext.Msg.alert(\"Productos\",\"Selecciona al menos un Producto\")}},onSeleccionarTransaccion:function(k,b,c,a,d,f){var g=this,h=g.getMenu(),j=Ext.getStore(\"Ordenes\");barraTitulo=({xtype:\"toolbar\",docked:\"top\",title:\"titulo\"});Ext.data.JsonP.request({url:\"http://\"+g.dirIP+\"/iMobile/COK1_CL_Consultas/RegresarOrdenVentaiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),Criterio:a.get(\"NumeroDocumento\")},callbackKey:\"callback\",success:function(e){var e=e.Data[0],l=e.Partidas;g.codigoMonedaSeleccinada=e.CodigoMoneda;g.NumeroDocumento=a.get(\"NumeroDocumento\");if(l.length<2){g.getPartidaContainer().down(\"list\").emptyTextCmp.show()}else{g.getPartidaContainer().down(\"list\").emptyTextCmp.hide()}l.forEach(function(n,m){console.log(n,\"itemmmmm\");l[m].cantidad=l[m].Cantidad;l[m].importe=Imobile.core.FormatCurrency.currency(parseFloat(l[m].Importe));l[m].totalDeImpuesto=l[m].TotalImpuesto;l[m].Imagen=\"http://25.15.241.121:88\"+l[m].Imagen;l[m].moneda=l[m].Moneda;l[m].precioConDescuento=Imobile.core.FormatCurrency.currency(parseFloat(l[m].PrecioDescuento));l[m].Precio=Imobile.core.FormatCurrency.currency(parseFloat(l[m].Precio));l[m].CodigoAlmacen=l[m].CodigoAlmacen;l[m].PorcentajeDescuento=\"%\"+l[m].PorcentajeDescuento});j.setData(l);Ext.getStore(\"Productos\").setData(l);",614982,85,"g.idClient",615089,70,"g.actualizarTotales();barraTitulo.title=g.titulo;g.getMain().getActiveItem().add(barraTitulo)}})},actualizarTotales:function(){var e=this,b=Ext.getStore(\"Ordenes\"),f=0,a=0,d=0,c=0;b.each(function(g){f+=Imobile.core.FormatCurrency.formatCurrencytoNumber(g.get(\"Precio\"))*g.get(\"cantidad\");c+=g.get(\"totalDeImpuesto\")});e.getOrdenContainer().down(\"#descuento\").setItems({xtype:\"container\",html:'<div style=\"top: 6px; position: relative;\">'+e.codigoMonedaSeleccinada+\"0.00</div>\"});e.getOrdenContainer().down(\"#subtotal\").setItems({xtype:\"container\",html:'<div style=\"top: 6px; position: relative;\">'+Imobile.core.FormatCurrency.currency(parseFloat(f),e.codigoMonedaSeleccinada)+\"</div>\"});e.getOrdenContainer().down(\"#tax\").setItems({xtype:\"container\",html:'<div style=\"top: 6px; position: relative;\">'+Imobile.core.FormatCurrency.currency(parseFloat(c),e.codigoMonedaSeleccinada)+\"</div>\"});e.getOrdenContainer().down(\"#total\").setItems({xtype:\"container\",html:'<div style=\"top: 6px; position: relative;\">'+Imobile.core.FormatCurrency.currency(parseFloat(f+c),e.codigoMonedaSeleccinada)+\"</div>\"})},onListAlmacen:function(c,g,b",616231,42,",f=a.down(\"agregarproductosform\").getValues();a.push({xtype:\"almacenlist\",codigoArticulo:f.CodigoArticulo});a.down(\"almacenlist\").setData(d.almacenes)},onSeleccionarAlmacen:function(f,c,j,b,h,d){var g=this,a=g.getMain().getActiveItem();Ext.Array.forEach(g.almacenes,function(k,e){k.Predeterminado=false});g.almacenes[c].Predeterminado=true;Ext.data.JsonP.request({url:\"http://\"+g.dirIP+\"/iMobile/COK1_CL_Consultas/ObtenerDisponibleiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:\"001\",CodigoDispositivo:\"004\",ItemCode:f.codigoArticulo,Token:localStorage.getItem(\"Token\"),Almacen:b.get(\"CodigoAlmacen\")},callbackKey:\"callback\",success:function(e){var k={Disponible:parseFloat(e.Data[0]).toFixed(2),NombreAlmacen:b.get(\"NombreAlmacen\"),CodigoAlmacen:b.get(\"CodigoAlmacen\")};a.down(\"agregarproductosform\").setValues(k);console.log(a.down(\"agregarproductosform\").getValues());a.pop()}})},obtenerTipoCambio:function(c,b){var e=this,d=e.getOpcionesOrden().down(\"editarpedidoform\"),a=e.getNavigationOrden().getActiveItem();Ext.data.JsonP.request({url:\"http://\"+e.dirIP+\"/iMobile/COK1_CL_Consultas/RegresarTipoCambio\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:\"001\",CodigoDispositivo:\"004\",Token:localStorage.getItem(\"Token\"),Criterio:c},callbackKey:\"callback\",success:function(f){if(f.Procesada){e.tipoCambio=f.Data[0];if(a.isXType(\"agregarproductosform\")){e.ayudaAAgregar(a,\"monedaDiferente\")}else{e.codigoMonedaSeleccinada=c;d.setValues({CodigoMoneda:c,tipoCambio:f.Data[0]});e.estableceMonedaPredeterminada(b);e.actualizaOrden(c)}}else{var g=f.Descripcion;e.mandaMensaje(\"Error\",g)}}})},muestraFacturasPendientes:function(){var c=this,a=c.getMenu(),b=Ext.getStore(\"Facturas\");a.push({xtype:\"facturascontainer\",title:c.idCliente});params={CardCode:c.idCliente};b.clearFilter();b.setParams(params);b.load()},agregaSaldoAMostrar:function(d){var c=this,a,b;d.each(function(g,e,f){a=g.get(\"CodigoMoneda\");b=Imobile.core.FormatCurrency.currency(g.get(\"Saldo\"),a);g.set(\"saldoAMostrar\",b)})},aplicaPago:function(){view.push({xtype:\"formasdepagolist\",title:me.idCliente})},cancelaPago:function(e){var f=this,a=f.getMain(),d=a.getActiveItem(),b=d.down(\"toolbar\"),c=Ext.getStore(\"Totales\"),g=Ext.getStore(\"Facturas\");d.remove(b,true);c.removeAll();f.pagado=0;g.clearFilter();a.setActiveItem(1)},onAgregarPago",612102,32,"ain().getActiveItem();a.push({xtype:\"formasdepagolist\",title:c.idCliente});a",612896,35,"ago\").hide()},onPopNavigationCobranza:function(c){var d=this,b=c.getNavigationBar(),a=c.getActiveItem();if(a.isXType(\"totalapagarcontainer\")){b.down(\"#agregarPago\").show()}b.setTitle(d.idCliente)},agregaPago:function(e,c,f,b){var d=this,a=e.up(\"navigationcobranza\");a.push({xtype:\"montoapagarform\",title:d.idCliente,datos:b.data});d.determinaVistaMontoAPagar(b.data.TipoFormaPago,a);a.down(\"fieldset\").setTitle(b.data.Nombre)},determinaVistaMontoAPagar:function(b,a){switch(b){case\"0\":a.down(\"fieldset\").add([{xtype:\"numberfield\",name:\"NumeroCheque\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de cheque\",label:\"No. Cheque\"},{xtype:\"numberfield\",name:\"NumeroCuenta\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de cuenta\",label:\"No. Cuenta\"},{xtype:\"textfield\",name:\"Banco\",placeHolder:\"Ingrese el nombre del banco\",label:\"Banco\"}]);break;case\"2\":a.down(\"fieldset\").add([{xtype:\"numberfield\",name:\"NumeroAutorizacion\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de autorizaci\ufffff\ufffffn\",label:\"No. Autorizaci\ufffff\ufffffn\"},{xtype:\"numberfield\",name:\"NumeroCuenta\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de cuenta\",label:\"No. Cuenta\"}]);break}},onPagar:function(m){var t=this,o=m.up(\"navigationcobranza\"),a=o.down(\"montoapagarform\"),b,n=t.aPagar-t.pagado,p=a.datos.Nombre,f=a.getValues().monto,j=a.datos.Codigo,e=a.datos.TipoFormaPago,k=false,r=a.getValues(),d=r.numeroCheque,h=r.numeroCuenta,c=r.banco,q=r.numeroAutorizacion,s=a.getInnerItems(),g=a.modo===\"edicion\"?true:false,l=a.datos.PermiteCambio;b=Ext.getStore(\"Facturas\").getAt(0).CodigoMoneda;console.log(s[0].innerItems[0]._label);console.log(Ext.getStore(\"Facturas\").getAt(0));Ext.Object.each(r,function(u,w,v){console.log(u+\":\"+w);if(w===null){k=true;t.mandaMensaje(\"Datos incompletos\",\"Ingrese todos los datos.\");return false}});if(k){}else{if(l===\"false\"){if(f>n){t.mandaMensaje(\"Sin cambio\",\"Esta forma de pago no permite dar cambio, disminuya la cantidad.\")}else{t.sumaCobros(a,b);o.pop(2)}}else{t.sumaCobros(a,b);o.pop(2)}}},muestraCobranza:function(){var f=this,h=f.getMain(),e,d,g=0,c=h.getActiveItem().down(\"facturaslist\").getSelection(),a,b=Ext.getStore(\"Facturas\"),j=({xtype:\"toolbar\",docked:\"top\",title:f.titulo});if(c.length>0){a=c[0].data.CodigoMoneda;for(d=0;d<c.length;d++){g+=c[d].data.Saldo;c[d].data.aPagar=true}b.clearFilter();b.filter(\"aPagar\",true);f.aPagar=g;h.setActiveItem(3);e=h.getActiveItem();e.getNavigationBar().setTitle(f.idCliente);e.add(j);f.getTotales().down(\"#aCobrar\").setItems({xtype:\"container\",html:Imobile.core.FormatCurrency.currency(f.aPagar,a)});f.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:Imobile.core.FormatCurrency.currency(f.pagado,a)});f.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:Imobile.core.FormatCurrency.currency(f.aPagar-f.pagado,a)})}else{f.mandaMensaje(\"Sin selecci\ufffff\ufffffn\",\"Seleccione al menos una factura para continuar.\")}},eliminaPago:function(e,c,f,a){var d=this,b=Ext.getStore(\"Totales\");Ext.Msg.confirm(\"Eliminar pago\",\"Se va a eliminar el pago, \ufffff\ufffffest\ufffff\ufffff seguro?\",function(g){if(g==\"yes\"){b.removeAt(c);d.pagado-=Imobile.core.FormatCurrency.formatCurrencytoNumber(a.data.monto);d.actualizaCobranza(a.data.moneda)}})},editaPago",611199,35,"d.up(\"navigationcobranza\"),valores=a.data;console.log(a.data);view.push({xtype:\"montoapagarform\",modo:\"edicion\",ind:a.data.id,montoAnterior:a.data.monto,datos:a.data});c.determinaVistaMontoAPagar(a.data.tipoFormaPago,view);view.down(\"fieldset\").setTitle(a.data.tipo);console.log(view.getActiveItem().xtype);view",614844,35,";view",612896,35,"ago\").hide()},actualizaCobranza:function(a){var b=this;b.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:Imobile.core.FormatCurrency.currency(b.pagado,a)});b.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:Imobile.core.FormatCurrency.currency(b.aPagar-b.pagado,a)})},sumaCobros:function(a,b){var u=this,p=a.datos.Nombre,g=a.getValues().monto,k=a.datos.Codigo,f=a.datos.TipoFormaPago,l=false,s=a.getValues(),e=s.NumeroCheque,j=s.NumeroCuenta,d=s.Banco,q=s.NumeroAutorizacion,t=a.getInnerItems(),h=a.modo===\"edicion\"?true:false,n=a.datos.PermiteCambio,r,c=Imobile.core.FormatCurrency.currency(g,b),o=a.ind,m=Ext.getStore(\"Totales\");console.log(a);if(h){var o=m.find(\"id\",o);pagoACambiar=m.getAt(o);pagoACambiar.set(\"monto\",c);u.pagado-=Imobile.core.FormatCurrency.formatCurrencytoNumber(a.montoAnterior);r=g}else{m.add({tipo:p,monto:c,codigoFormaPago:k,tipoFormaPago:f,NumeroCheque:e,NumeroCuenta:j,Banco:d,NumeroAutorizacion:q,moneda:b});r=Imobile.core.FormatCurrency.formatCurrencytoNumber(m.getAt(m.getCount()-1).get(\"monto\"))}u.pagado+=parseFloat(r);u.actualizaCobranza(b)},onTerminarCobranza:function(){var f=this,g=0,j=Ext.getStore(\"Facturas\"),l=Ext.getStore(\"Totales\"),e=j.getData().items,k=new Date(Ext.Date.now()),k=Ext.Date.format(k,\"d-m-Y\"),h=f.getMain().getActiveItem(),b,c;if(l.getCount()>0){var a=parseInt(localStorage.getItem(\"FolioInterno\"))+100;var d={CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),\"Cobranza.Fecha\":k,\"Cobranza.CodigoVendedor\":localStorage.getItem(\"CodigoUsuario\"),\"Cobranza.Tipo\":\"C\",\"Cobranza.CodigoCliente\":f.idCliente};Ext.Array.forEach(e,function(o,m,n){d[\"Cobranza.CobranzaFacturas[\"+m+\"].NumeroFactura\"]=o.data.NumeroDocumento;d[\"Cobranza.CobranzaFacturas[\"+m+\"].Monto\"]=o.get(\"Saldo\")});l.each(function(n,m){console.log(n.data);d[\"Cobranza.CobranzaDetalles[\"+m+\"].NumeroLinea\"]=m;d[\"Cobranza.Detalles[\"+m+\"].CodigoFormaPago\"]=n.data.codigoFormaPago;d[\"Cobranza.Detalles[\"+m+\"].MontoNeto\"]=Imobile.core.FormatCurrency.formatCurrencytoNumber(n.data.monto);switch(n.tipoFormaPago){case 0:d[\"Cobranza.Detalles[\"+m+\"].NumeroCheque\"]=n.NumeroCheque;d[\"Cobranza.Detalles[\"+m+\"].NumeroCuenta\"]=n.NumeroCuenta;d[\"Cobranza.Detalles[\"+m+\"].Banco\"]=n.Banco;d[\"Cobranza.Detalles[\"+m+\"].Fecha\"]=k;break;case 1:break;case 2:d[\"Cobranza.Detalles[\"+m+\"].NumeroAutorizacion\"]=n.NumeroAutorizacion;d[\"Cobranza.Detalles[\"+m+\"].NumeroCuenta\"]=n.NumeroCuenta;break}});console.log(d);b=\"http://\"+f.dirIP+\"/iMobile/COK1_CL_Cobranza/AgregarCobranza\";c=\"Se realiz\ufffff\ufffff el cobro exitosamente.\";Ext.data.JsonP.request({url:b,params:d,callbackKey:\"callback\",success:function(m){if(m.Procesada){f.getMain().setActiveItem(1);Ext.Msg.alert(\"Cobro procesado\",c+m.CodigoUnicoDocumento);j.removeAll();l.removeAll();h.remove(h.down(\"toolbar\"),true);f.getMain().getActiveItem().pop()}else{Ext.Msg.alert(\"Cobro no procesado\",\"No se proceso el cobro correctamente: \"+m.Descripcion)}}})}else{Ext.Msg.alert(\"Sin pago\",\"Agrega por lo menos un pago.\")}},onAgregarProspecto",612102,53,"prospectosform\"})},toggleFieldSetItems:function(a,e){var b=a.up(\"fieldset\").getItems().items,c,d=undefined;Ext.each(b,function(g,f){if(!e&&f!=0){g.disable();g.hide()}else{g.enable();g.show();if(g.isXType(\"numberfield\")){d=d||f;if(d===f){c=g;setTimeout(function(){c.focus()},200)}}}})},respondeAKeyUp:function(e){var f=e.getParent(),b=f.getItemId();switch(b){case\"superficie\":var c=f.getItems().items,d,a=0;for(d=1;d<c.length-1;d++){a+=c[d].getValue()}f.down(\"#total\").setValue(a).setDisabled(true);break}},onFileLoadSuccess:function(a,d){console.log(\"File loaded\");var b=this;var c=b.getLoadedImage();console.log(a);localStorage.setItem(\"image\",a);c.setSrc(a)},onFileLoadFailure:function(a){Ext.device.Notification.show({title:\"Loading error\",message:a,buttons:Ext.MessageBox.OK,callback:Ext.emptyFn})",606300,32,616739,690,617485,247,"Telefono\",type:\"string\"},{name:\"Correo\",type:\"string\"},{name:\"ListaPrecios\",type:\"string\"},{name:\"LimiteCredito\",type:\"string\"},{name:\"S",617864,54,",{name:\"CodigoVendedor\",type:\"string\"},{name:\"CondicionPago\",type:\"string\"},{name:\"NombreListaPrec",619892,32,620451,53,"Clientes\",{extend:Imobile.core",620237,41,"Cliente\",proxy:{url:\"http://25.15.241.121",618065,44,"i",620667,84,",extraParams:{format:\"json",619018,33,618218,171,"float\",defaultValue:0},{name:\"P",619247,76,"string",618485,106,"string\"},{name:\"NombreAlmacen\",type:\"string\"},{name:\"Disponible\",type:\"float\",convert:function(a){return parseFloat(a).toFixed(2)}},{name:\"DesplegarEnPanel\",type:\"boolean\"},{name:\"ListaPrecios\",type:\"array\"},{name:\"SujetoImpuesto\",type:\"boolean\"},{name:\"color\",type:\"string\"},{name:\"Imagen\",type:\"string\",mapping:\"Imagen\",convert:function(a){return\"http://25.15.241.121:88\"+a}",619504,32,"Productos\",{extend:Imobile.core",620237,41,"Producto\",proxy:{url:\"http://25.15.241.121:88",618895,47,"i",620667,84,",extraParams:{format:\"json",619018,109,617635,35,618297,92,"float\"},{name:\"Precio\",type:\"string",618422,40,"PorcentajeD",618463,128,"string\"},{name:\"NombreAlmacen\",type:\"string\"},{name:\"Disponible\",type:\"float\"},{name:\"Imagen\",type:\"string\"},{name:\"CodigoAlmacen\",type:\"S",588336,32,619530,73,619617,321,"string",619941,127,",{name:\"CodigoImpuesto\",type:\"string\"},{name:\"Tasa\",type:\"string\"},{name:\"CodigoDireccion\",type:\"string\"},{name:\"Predeterminado\",type:\"boolean",619503,33,"Direccion",620222,66,620175,298,",{name:\"Predeterminada\",type:\"boolean",619503,33,"Monedas\",{extend:Imobile.core",620237,41,"Moneda\",proxy:{url:\"http://25.15.241.121",620618,49,"i",620667,84,",extraParams:{type:\"json",619018,33,"Factura",619056,48,"Folio\",type:\"int\"},{name:\"Saldo\",type:\"float\",convert:function(a){var b=Ext.Number.toFixed(a,2);return Ext.Number.from(b,1)}},{name:\"FechaCreacion\",type:\"string\",convert:function(a){return Ext.Date.format(new Date(a),\"d-m-Y\")}},{name:\"FechaFin\",type:\"string\",convert:function(a){return Ext.Date.format(new Date(a),\"d-m-Y\")}",620400,45,"saldoAMostrar\",type:\"string\"},{name:\"aPagar\",type:\"boolean\"},{name:\"NumeroDocumento",620457,47,"Facturas\",{extend:Imobile.core",620237,41,"Factura\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/ObtenerFacturasAbiertasi",620667,93,"define(\"Imobile.model.Total",619056,71,"tipo\",type:\"string\"},{name:\"monto\",type:\"string\"},{name:\"codigoFormaPago\",type:\"string\"},{name:\"NumeroCheque\",type:\"string\"},{name:\"NumeroCuenta\",type:\"string\"},{name:\"Banco\",type:\"string\"},{name:\"Fecha\",type:\"string\",convert:function(a){return Ext.Date.format(new Date(a),\"d-m-Y\")}},{name:\"NumeroAutorizacion\",type:\"string",618422,40,"tipoFormaPago",620457,47,"Tot",620220,58,"Total",620287,45,"Transaccio",619055,49,"Fol",619892,32,617641,35,"Cliente\",type:\"string\"},{name:\"TipoTransaccion\",type:\"int\"},{name:\"NumeroDocumento",620457,47,"Transacciones\",{extend:Imobile.core",620237,41,"Transaccion\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaAbiertai",620667,84,",extraParams:{format:\"json",619018,33,"Prospe",618223,74,"fecha\",type:\"string\"},{name:\"codigo\",type:\"string\"},{name:\"razonSocial\",type:\"string\"},{name:\"tipoPersona\",type:\"string\"},{name:\"rfc\",type:\"string\"},{name:\"direcciones\",type:\"array\"},{name:\"encargado\",type:\"object\"},{name:\"productor\",type:\"object\"},{name:\"productosUtilizados\",type:\"object\"},{name:\"comentarios",620457,47,"Prospecto",620223,55,"Prospecto",620287,45,"FormaDePago",619056,71,"Codigo\",type:\"string\"},{name:\"Nombre\",type:\"string\"},{name:\"PermiteCambio\",type:\"string\"},{name:\"TipoFormaPago\",type:\"string\"},{name:\"UIDTransaccion\",type:\"string\"},{name:\"TipoTransa",620047,52,"FormasDePago\",{extend:Imobile.core",620237,41,"FormaDePag",618843,36,"25.15.241.121",620618,37,"FormasPagoi",620667,230,",\"Facturas\",\"Totales\",\"Transacciones\",\"Prospectos\",\"FormasDePago",620896,765]