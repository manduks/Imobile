["function _60b40ad673feea321ba37279e72e101282b99c83",50,289262,"abel",443767,32,"abel",309664,37,"label\"",289291,145092,"JsonP",384644,34,"ternateClassName:\"Ext.data.ScriptTagProxy\",alias:[\"proxy.jsonp\",\"proxy.scripttag\"],config:{defaultWriterType:\"base\",callbackKey:\"callback\",recordParam:\"records\",autoAppendParams:true",384921,39,"c=d.buildRequest(a),e=c.getParams();c.setConfig({callbackKey:d.getCallbackKey(),timeout:d.getTimeout(),scope:d",385076,42,"});if(d.getAutoAppendParams()){c.setParams({})}c.setJsonP(Ext.data.JsonP.request(c.getCurrentConfig()));c.setParams(e);a.setStarted();d.lastRequest=c;return c",385453,69,"h,f,g){delete c.lastRequest;",385529,32,",setException:function(b,a){b.setException(b.getRequest().getJsonP().errorType)},buildUrl:function(f){var e=this,a=e.callParent(arguments),h=Ext.apply({},f.getParams()),d=h.filters,c,b,g;delete h.filters;if(e.getAutoAppendParams()){a=Ext.urlAppend(a,Ext.Object.toQueryString(h))}if(d&&d.length){for(b=0;b<d.length;b++){c=d[b];g=c.getValue();if(g){a=Ext.urlAppend(a,c.getProperty()+\"=\"+g)}}}return a},destroy:function(){this.abort",358312,32,"bort:function(){var a=this.lastRequest;if(a){Ext.data.JsonP.abort(a.getJsonP())}",441999,152584,"core.data.Store",615018,37,"Load:false,listeners:{beforeload:function(b,a,c){b.getProxy().setExtraParams({Token:localStorage.getItem(\"Token\"),CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\")})}}",594559,185,595248,148,"textfield\",name:\"usuario\",placeHolder:\"Codigo de Usuario\",value:\"1",595468,55,"Contrase\ufffff\ufffffa\",value:\"12345",595548,80,"itemId:\"login",595626,727,"iconCls:\"logo",596366,219,"CodigoSocio",596589,44,"NombreSocio}",597376,39,"Cliente",597423,91,596775,498,"CodigoArticulo}</p>\",\"<span><b>{NombreArticulo",603101,109,597415,354,597824,3751,601576,102,601679,138,"container\",padding:\"0 0 0 200",602709,108,"Guardar\",ui:\"confirm",605496,36,601840,153,"textfield\",name:\"CodigoArticulo",602016,61,"NombreArticulo",602088,47,"numb",602140,68,"itemId:\"cantidad\"},{xtype:\"numberfield\",name:\"P",602250,355,"NombreAlmacen\",label:\"Almacen\",disabled:false,itemId:\"almacenProduc",602522,32,"Disponible\",label:\"Existencia",599919,34,602920,82,"itemCls:\"partida\",itemTpl:[\"<div>\",'<span style=\"float: left; padding: 15px 0px 0px 10px;\"><i class=\"fa fa-shopping-cart\" style=\"font-size: 30px;\"></i></span><span style=\"float: left; padding: 0 35px; width: 180px;\" class=\"imobile-cliente-tpl\">','<p style=\"margin: 0px;\">{CodigoArticulo}</p>','<p style=\"margin: 0px;\"><b>{NombreArticulo}</b></p>','<p style=\"margin: 0px; color: red;\">Quantity: <b>{cantidad}</b></p>',\"</span>\",\"<span>\",'<p style=\"margin: 0px;\">Precio: {Precio}</p>','<p style=\"margin: 0px;\">Disc: {descuento}</p>','<p style=\"margin: 0px;\" class=\"total-product\"><b>Total: {importe}</b></p>',\"</span>",603185,57,"display: table; text-align: left; font-size: 12px; z-index: 0;\"><div style=\"display: table-row;\"><div id=\"cliente_id\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">Transacci\ufffff\ufffffn: Orden de Venta</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">Fecha: 04/06/2014</div></div><div style=\"display: table-row;\"><div id=\"codigo_id\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">C\ufffff\ufffffdigo de Dispositivo: '+localStorage.getItem(\"CodigoDispositivo\")+'</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">C\ufffff\ufffffdigo de Usuario: '+localStorage.getItem(\"CodigoUsuario\")+'</div></div><div style=\"display: table-row;\"><div id=\"codigo_dispositivo\" style=\"display: table-cell;  padding-left: 10px; padding-right: 10px;\">Nombre de Dispositivo: '+localStorage.getItem(\"CodigoDispositivo\")+'</div><div style=\"display: table-cell;  padding-left: 15px; padding-right: 5px;\">Nombre de Usuario: '+localStorage.getItem(\"NombreUsuario\")+\"</div></div></div>\"}",597567,66,602892,40,599392,40,"ordencontainer\",config:{layout:\"vbox\",xtype:\"container\",docked:\"bottom\",items:{layout:\"hbox\",items:[{xtype:\"container\",html:\"Descuento\",flex:1.2,height:50,itemId:\"descuento\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}},{xtype:\"container\",html:\"Subtotal\",flex:1,itemId:\"subtotal\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"TAX\",flex:1,itemId:\"tax\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Total\",flex:1,itemId:\"total\",style:{background:\"#A9A9A9\",color:\"black\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}}]}",602891,36,"Partida",599392,33,603391,106,"fit\",items:[{style:{background:\"gray\"},xtype:\"ordenlist\",flex:7},{xtype:\"ordencontainer\",flex:1}]",604655,88,601788,52,604795,44,"disabl",604845,93,"CodigoSocio\",label:\"C\ufffff\ufffffdigo\"},{xtype:\"textfield\",name:\"NombreSocio\",label:\"Nombre\"},{xtype:\"textfield\",name:\"RFC\",label:\"RFC\"},{xtype:\"numberfield\",name:\"Telefono\",label:\"Tel\ufffff\uffffffono\"},{xtype:\"emailfield\",name:\"Correo\",label:\"Correo\"},{xtype:\"textfield\",name:\"ListaPrecios\",label:\"Lista de Precios\"},{xtype:\"textfield\",name:\"LimiteCredito\",label:\"Cr\ufffff\ufffffdi",602522,32,"Saldo\",label:\"Saldo",599919,34,"ventas.Direccion",596441,41,"direcciones",606585,84,"Tpl:\"{title}\",data:[{title:\"Direcci\ufffff\ufffffn de entrega\",action:\"entrega\"},{title:\"Direcci\ufffff\ufffffn fiscal\",action:\"fiscal",606479,32,"ventas.Direcciones",599392,33,"requires:[],xtype:\"direccionescontainer",601417,38,"direccioneslist",606479,32,"ventas.Cliente",599392,33,"requires:[],xtype:\"cliente",599440,72,"layout:\"vbox\",items:[{xtype:\"container\",flex:1,padding:\"0 0 0 200\",defaults:{xtype:\"button\"",605919,38,"xtype:\"spacer\",docked:\"top\",padding:5},{itemId:\"guardar\",text:\"Guardar\",ui:\"confirm\"}]},{xtype:\"clienteform\",flex:6},{xtype:\"direccionescontainer\",flex:1.5",601679,32,"edidos.EditarPedido",595264,36,"editarpedidoform\",config:{items:[{xtype:\"container\",padding:\"0 0 0 200",602709,93,"guardar\",text:\"Guardar\",ui:\"confirm",605496,36,"\",title:\"Editar Pedido",601866,127,"textfield\",name:\"CodigoSocio\",label:\"C\ufffff\ufffffdigo de Cliente",602032,45,"NombreSocio\",label:\"Nombre de Cliente\"},{xtype:\"numberfield\",name:\"LimiteCredito\",label:\"L\ufffff\ufffffmite de Cr\ufffff\ufffffdito\"},{xtype:\"textfield\",name:\"CondicionPago\",label:\"Condici\ufffff\ufffffn de Cr\ufffff\ufffffdi",602522,32,"Saldo\",label:\"Saldo\"},{xtype:\"textfield\",name:\"NombreListaPrecio\",label:\"Lista de Precios\"},{xtype:\"textfield\",name:\"CodigoVendedor\",label:\"Vendedor",602319,68,"textfield\",name:\"CodigoMoneda\",label:\"Moneda\",disabled:false,itemId:\"moneda\",inputCls:\"fa-check\"},{xtype:\"textfield\",name:\"tipoCambio\",label:\"Tipo de Cambio",599919,34,606083,150,",background:\"#000\"},items:[{title:\"Orden",606435,46,606298,47,"container\"},{title:\"Editar\",iconCls:\"fa fa-pencil-square-o\",xtype:\"editarpedidoform\"},{title:\"Eliminar\",iconCls:\"fa fa-times\",itemId:\"eliminar\"},{title:\"Terminar\",iconCls:\"action\",itemId:\"termina",606478,191,606758,144,604075,97,"padding:\"10 10 10 17\"",604171,50,"tpl if=\"cantidad &gt; 0\">','<div class= \"ovalo\">{cantidad}</div>',\"</tpl>\",'<div class=\"product-list\" style=\"background-color: {color}\">','<div class=\"container\"> ',\"{NombreArticulo}\",\"</div>\"",604295,212,602891,36,"DireccionEntrega",596443,32,"requires:[],xtype:\"direccionentregalist\",config:{itemTpl:\"{calle}, {colonia}\",store:\"Direcciones\"",602891,36,"DireccionFiscal",596443,32,"requires:[],xtype:\"direccionfiscallist\",config:{itemTpl:\"{calle}, {colonia}\",store:\"DireccionesFiscales\"",597567,66,602891,36,"DireccionEntrega",599392,33,"requires:[],xtype:\"direccionentrega",599440,72,"layout:\"fit\",items:[{xtype:\"direccionentregalist",606479,32,"ventas.DireccionFiscal",599392,33,"requires:[],xtype:\"direccionfiscal",599440,72,"layout:\"fit\",items:[{xtype:\"direccionfiscallist",606479,32,"productos.ProductosOrden\",{extend:",601325,42,",xtype:\"productosorden\",config:{layout:\"fit\",itemId:\"principal",601438,102,"Lista\",itemId:\"listaProductos\",pressed:true},{text:\"Panel\",itemId:\"panelProductos\"",601633,45,602889,38,"TplDirecciones",596447,35,"tpldirecciones\",config:{",596518,64,"span><p>{Calle} {NoExterior} {NoInterior} {Colonia} {Municipio}</p></span>\",\"<span><b>{cp} {Ciudad} {Estado",603101,47,"{Pais} </span>','<i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i></div>'].join(\"\"),store:\"Direccione",597423,91,"direcciones con esos datos</div>',selectedCls:\"direc-selected\"",597023,88,"ventas.NavigationOrden",596251,36,"navigationorden",596291,62,"iconCls:\"logo",603939,32,"\",align:\"left\",itemId:\"agregarProductos\"}]},items:[{xtype:\"opcionesorden",606479,32,"ventas.Moneda",596442,33,"requires:[],xtype:\"monedaslist\",config:{",603018,47,"span><p><b>{CodigoMoneda}</b> {NombreMoneda}</p></span>\",'<i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i></div>'].join(\"\"),store:\"Monedas\",selectedCls:\"direc-selected\"}});Ext.define(\"Imobile.view.cobranza.Cobranza",596443,40,"obranza",606585,84,"Tpl:\"{title}\",data:[{title:\"Cobranza de facturas\",action:\"cobranzaFacturas\"},{title:\"Anticipo de pedido\",action:\"anticipo\"},{title:\"Visualizar cobranzas\",action:\"visualizarCobranza",606479,33,"obranza.Factura",596442,40,"facturaslist\",requires:[],config:{itemTpl:['<div class=\"factura\">','<div> <p>N\ufffff\ufffffmero: <b>{id}</b> Saldo: <b>{saldo}</b></div> <i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i>','<div style=\"font-size: 90%\"> <div><p>Fecha: <b>{fecha}</b> Vencimiento: <b>{vencimiento}</b> </div>',\"</div>\"].join(\"\"),store:\"Facturas\",selectedCls:\"direc-selected\",mode:\"MULTI\"",597445,69,"facturas pendientes</div>'}",597567,66,"});Ext.define(\"Imobile.view.cobranza.Facturas",599392,33,"requires:[],xtype:\"facturas",599440,72,"layout:\"vbox\",items:[{xtype:\"facturaslist\",flex:5},{xtype:\"button\",text:\"Aplicar pago\",ui:\"confirm\",itemId:\"aplicarPago\",margin:10",606480,32,"obranza.FormasDePago",596443,39,"formasdepago",606585,84,"Tpl:\"{title}\",data:[{title:\"Efectivo\",action:\"efectivo\"},{title:\"Tarjeta de Cr\ufffff\ufffffdito\",action:\"credito\"},{title:\"Tarjeta de Regalo\",action:\"regalo",606479,33,"obranza.TotalAPagar",596443,32,"requires:[],xtype:\"totalapagarlist\",config:{itemCls:\"factura\",itemTpl:\"{tipo}: <b>{monto}</b>\",store:\"Totales\"}});Ext.define(\"Imobile.view.cobranza.Totales",599392,40,"totalescontainer\",config:{layout:\"hbox\",items:[{xtype:\"container\",html:\"A cobrar\",flex:1,itemId:\"aCobrar\",style:{background:\"black\",color:\"yellow\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}},{xtype:\"container\",html:\"Pagado\",flex:1,itemId:\"pagado\",style:{background:\"black\",color:\"green\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Pendiente\",flex:1,itemId:\"pendiente\",style:{background:\"black\",color:\"red\",\"margin-righ\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}",606480,32,"obranza.TotalAPaga",599391,34,"requires:[],xtype:\"totalapaga",599439,73,"layout:\"vbox\",items:[{style:{background:\"gray\"},xtype:\"totalapagarlist\",flex:5},{xtype:\"totalescontainer\",flex:1},{xtype:\"button\",text:\"Terminar\",ui:\"confirm\",margin:10",602889,38,"Transaccion",596443,39,"transaccion",596490,45,"useSimpleItems:true,itemTpl:\"Folio: {Folio} <br> Tipo de transacci\ufffff\ufffffn: {TipoTransaccion} <br> Cliente: {CodigoCliente} - {NombreCliente}\",store:\"Transacciones",601438,39,596931,77,"transaccion...\"",597823,92,"ventas.Almacen",596443,32,"requires:[],xtype:\"almacenlist\",config:{",603018,47,"span><p><b>{CodigoAlmacen}</b> {NombreAlmacen}</p></span>\",'<i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i></div>'].join(\"\"),selectedCls:\"direc-selected\"",606873,234,"CodigoUsuario:undefined,CodigoSociedad:undefined,CodigoDispositivo:undefined,Contrasenia:undefined,Token:undefined,direccionEntrega:undefined,direccionFiscal:undefined,dirIP:\"25.15.241.121:88\",almacenes:undefined",607106,37,",menu:\"menu\",opcionesOrden:\"opcionesorden\",opcionCliente:\"opcionclientelist\",seleccionadorProFav:\"seleccionadorprofav\",direcciones:\"direccionescontainer\",productosOrden:\"productosorden\",productosView:\"productosview\",navigationOrden:\"navigationorden\",totales:\"totalescontainer\",listaFacturas:\"facturaslist\",ordenContainer:\"ordencontainer\",partidaContainer:\"partidacontainer\"",607143,43,",\"menu dataview\":{itemtap:\"onSelectMenu\"},\"main navigationview #agregarProductos\":{tap:\"onAgregarPartida\"},navigationorden:{pop:\"onPopNavigationOrden\",back:\"onBack\"},menu:{back:\"onBackMenu\"}}},onLoginUser:function(c){var b=this,a=c.getValues();Ext.data.JsonP.request({url:\"http://\"+b.dirIP+\"/iMobile/COK1_CL_UsuarioiMobile/Login\",params:{CodigoUsuario:a.usuario,CodigoSociedad:\"001\",CodigoDispositivo:\"004\",Contrasenia:a.password},callbackKey:\"callback\",success:function(d){var e=d.Procesada;if(e){localStorage.setItem(\"Token\",d.Token);localStorage.setItem(\"CodigoUsuario\",d.Usuario.Codigo);localStorage.setItem(\"CodigoSociedad\",\"001\");localStorage.setItem(\"CodigoDispositivo\",\"004\");localStorage.setItem(\"NombreUsuario\",d.Usuario.Nombre);localStorage.setItem(\"Contrasenia\",d.Usuario.Contrasenia);localStorage.setItem(\"FolioInterno\",d.ConfiguracionDispositivo.FolioOrden);b.getMain().setActiveItem(1);b.almacenes=d.ConfiguracionDispositivo.Almacenes}else{Ext.Msg.alert(\"Datos Incorrectos\",d.Descripcion,Ext.emptyFn)}}})},onSelectMenu:Ext.emptyFn,aleatorio:function(a,d){var c=d-a,b=Math.random()*c,b=Math.floor(b);return parseInt(a)+b},dameColorAleatorio:function(){var c=new Array(\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"),a=\"#\",b;for(i=0;i<6;i++){b=this.aleatorio(0,c.length);a+=c[b]}return a},onBack:function(c){var d=this,a=d.getMain().getActiveItem(),e=c.getActiveItem().getActiveItem();var b=Ext.getStore(\"Ordenes\");if(b.getData().items.length<=1){d.getPartidaContainer().down(\"list\").emptyTextCmp.show()}else{d.getPartidaContainer().down(\"list\").emptyTextCmp.hide()}if(e.isXType(\"partidacontainer\")||e.isXType(\"clientecontainer\")||e.isXType(\"editarpedidoform\")){c.getActiveItem().setActiveItem(0);a.getNavigationBar().down(\"#agregarProductos\").show()}},onBackMenu:function(){var b=this,a=Ext.getStore(\"Clientes\"),c={CodigoUsuario:b.CodigoUsuario,CodigoSociedad:b.CodigoSociedad,CodigoDispositivo:b.CodigoDispositivo,Token:b.Token};a.getProxy().setUrl(\"http://\"+b.dirIP+\"/iMobile/COK1_CL_Socio/ObtenerListaSociosiMobile\");a.setParams(c);a.load()",607039,35,609113,635,",{xtype:\"navigationorden\"}]",607039,35,"phone",609119,39,609828,41,"entrega:undefined,titulo:undefined,opcion:undefined,aPagar:0,pagado:0,pendiente:0,clienteSeleccionado:undefined,CodigoAlmacen:undefined,codigoImpuesto:undefined,tasaImpuesto:0",609868,362,"agregarproductosform #cantidad\":{change:\"actualizaCantidad\"},\"agregarproductosform #almacenProducto\":{focus:\"onListAlmacen",610313,138,"Cliente\"},\"opcionesorden #eliminar\":{activate:\"onEliminarOrden\"},\"productosorden #listaProductos\":{tap:\"mostrarListaProductos\"},\"productosorden #panelProductos\":{tap:\"mostrarPanelProductos\"},\"productosorden productoslist\"",610285,32,"productosorden productosview\"",610285,32,"opcionesorden #addOrden\":{activate:\"onAddOrden\"},opcionesorden:{activeitemchange:\"cambiaItem\"},direccioneslist:{itemtap:\"muestraDirecciones\"},ordenlist:{itemswipe:\"eliminaPartida\",itemtap:\"onAgregarProducto\"},\"opcionesorden #terminar\":{activate:\"onTerminarOrden\"},\"clientecontainer #guardar\":{tap:\"guardaDatosDeCliente\"},\"editarpedidoform #moneda\":{focus:\"muestraMonedas\"},tpldirecciones:{itemtap:\"seleccionaDireccion\"},monedaslist:{itemtap:\"seleccionaMoneda\"},cobranzalist:{itemtap:\"muestraFacturasPendientes\"},\"facturascontainer #aplicarPago\":{tap:\"aplicaPago\"},formasdepagolist:{itemtap:\"muestraCobranza\"},transaccionlist:{itemtap:\"onSeleccionarTransaccion\"},almacenlist:{itemtap:\"onSeleccionarAlmac",610454,33,"f,a,d){var e=this,b=e.getMenu();e.opcion=a.get(\"action\");switch(e.opcion",610545,77,"e",610623,123,"e",610747,37,"case\"cobranza\":b.push({xtype:\"clienteslist\",opcion:e.opcion});Ext.getStore(\"Clientes\").load();this.esFavorito=false;break;case\"salir\":e",610876,291,"seleccionaDireccion:function(e,c,f,b){var d=this,a=d.getMain().getActiveItem();if(d.entrega){d.direccionEntrega=b.data.CodigoDireccion;d.mandaMensaje(\"Direcci\ufffff\ufffffn de entrega\",\"Direcci\ufffff\ufffffn de entrega seleccionada\")}else{d.direccionFiscal=b.data.CodigoDireccion;d.mandaMensaje(\"Direcci\ufffff\ufffffn fiscal\",\"Direcci\ufffff\ufffffn fiscal seleccionada\");d.codigoImpuesto=b.data.CodigoImpuesto;d.tasaImpuesto=b.data.Tasa}a.pop()},seleccionaMoneda:function(e,c,f,b){var d=this,a=d.getMain().getActiveItem();moneda=b.data.CodigoMoneda,tabOpciones=d.getOpcionesOrden(),form=tabOpciones.down(\"editarpedidoform\");form.setValues({CodigoMoneda:moneda});a.pop()},muestraMonedas:function(){var b=this,a=b.getMain().getActiveItem();b.ponParametros(\"Monedas\",b.CodigoUsuario,b.CodigoSociedad,b.CodigoDispositivo,\"\",b.Token);a.push({xtype:\"monedaslist\"});a.getNavigationBar().down(\"#agregarProductos\").hide()},eliminaPartida:function(e,c,f,a){var d=this,b=Ext.getStore(\"Ordenes\")",612250,35," de la orden\",\"Se va a eliminar el producto de la orden, \ufffff\ufffffest\ufffff\ufffff seguro?\",function(j){if(j==\"yes\"){var h=b.find(\"CodigoArticulo\",a.data.CodigoArticulo);b.removeAt(h);d.actualizarTotales();var g=Ext.getStore(\"Ordenes\");if(g.getData().items.length<=2){d.getPartidaContainer().down(\"list\").emptyTextCmp.show()}else{d.getPartidaContainer().down(\"list\").emptyTextCmp.hide()}}})},cambiaItem:function(f,j,b){var g=this,h=g.getMain().getActiveItem(),d=h.getNavigationBar().down(\"#agregarProductos\"),e=g.getOpcionCliente().clienteSeleccionado;if(j.xtype==\"clientecontainer\"){d.setText(\"Back\").show();d.setUi(\"back\");var c=j.down(\"clienteform\"),a=Ext.getStore(\"Direcciones\");c.setValues(e)}if(j.xtype==\"editarpedidoform\"){console.log(e);j.setValues(e);d.setText(\"Back\").show();d.setUi(\"back\")}if(j.xtype==\"partidacontainer\"){d.setText(\"Agregar\").show();d.setUi(\"normal\")}},traeCliente:function(){var b=this,d=Ext.getStore(\"Clientes\"),c=d.find(\"CodigoSocio\",b.idCliente),a=d.getAt(c).data;return a},muestraDirecciones:function(f,d,g,c){var e=this,b=e.getMain().getActiveItem(),a=Ext.getStore(\"Direcciones\");a.clearFilter();if(c.data.action==\"entrega\"){a.filter(\"TipoDireccion\",\"B\");e.entrega=true}else{a.filter(\"TipoDireccion\",\"S\");e.entrega=false}b.push({xtype:\"tpldirecciones\"});b.getNavigationBar().down(\"#agregarProductos\").hide()},mostrarListaProductos:function(a,b,d){var c=this;Ext.getStore(\"Productos\").clearFilter();c.getProductosOrden().setItems({xtype:\"productoslist\"})},mostrarPanelProductos:function(){var b=this,a=Ext.getStore(\"Productos\");b.getProductosOrden().setItems({xtype:\"productosview\"});setTimeout(function(){a.each(function(e,c,d){e.set(\"color\",b.dameColorAleatorio())})},100)",611165,78,"agregaProductos:function(c){var a,o,e,k,p,l=this,p=Ext.getStore(\"Ordenes\"),g=Ext.getStore(\"Productos\"),b=l.getMain().getActiveItem(),a=c.up(\"agregarproductosform\"),o=a.getValues(),e=o.NombreArticulo,k=o.cantidad,j=o.importe;if(Ext.isEmpty(e)||Ext.isEmpty(k)){l",611646,126,"var n=o.CodigoArticulo,d=p.find(\"CodigoArticulo\",n),f=g.find(\"CodigoArticulo\",n),h=g.getAt(f);h.set(\"cantidad\",k);if(d==-1){p.add(o)}else{var m=p.getAt(d);m.set(\"cantidad\",k);m.set(\"NombreArticulo\",e);m.set(\"importe\",j)}b.pop()}l.actualizarTotales()},muestraProductos:function(){Ext.getStore(\"Productos\").load()},muestraClientes:function(){Ext.getStore(\"Clientes\").load(",612680,32,"Ext.getStore(\"Ordenes\").load()},busca:function(a){},buscaCliente:function(a){",613278,169,"g,c,j,a,h,d){var f=this;a.set(\"favorite\",!a.get(\"favorite\"));if(a.get(\"favorite\")){var b=f.dameColorAleatorio();a.set(\"color\",b)}},lista:function(c){var a=Ext.getStore(\"Productos\"),b=this;a.clearFilter();a.filter(\"DesplegarEnPanel\",c",613823,79,"g,e,f,d,h){var j=this,k=j.getMenu(),b=d.get(\"NombreSocio\");j.idCliente=d.get(\"CodigoSocio\");j.titulo=j.idCliente+\" \"+b;switch(g.opcion){case\"venta\":k",613957,32,",title:j.titulo,clienteSeleccionado:d.data});var c=j.getOpcionCliente().clienteSeleccionado,a=Ext.getStore(\"Direcciones\");a.setData(c.Direcciones);a.filter(\"TipoDireccion\",\"S\");if(a.getCount()>0){j.direccionFiscal=a.getAt(0).data.CodigoDireccion;j.codigoImpuesto=a.getAt(0).data.CodigoImpuesto;j.tasaImpuesto=a.getAt(0).data.Tasa;a.clearFilter();a.filter(\"TipoDireccion\",\"B\");j.direccionEntrega=a.getAt(0).data.CodigoDireccion}else{j.mandaMensaje(\"Sin direcci\ufffff\ufffffn fiscal\",\"Este cliente no cuenta con direcci\ufffff\ufffffn fiscal, solicite una al SAP.\");k.pop()}break;case\"cobranza\":k.push({xtype:\"cobranzalist\",title:j.titulo});break}this.muestralistaOrden()},onAgregarProducto:function(k,h,j,f){var n=this,o=n.getMain().getActiveItem(),c=f.data,d,e=n.almacenes,g,m,b,l,d;Ext.Array.forEach(e,function(r,p){var q=r.Predeterminado;n.CodigoAlmacen=r.CodigoAlmacen;if(q){c.NombreAlmacen=r.NombreAlmacen}});o",611291,37,";var a=o.getActiveItem();a.setValues(c);a.setValues({Precio:c.ListaPrecios[0].Precio,moneda:c.ListaPrecios[0].CodigoMoneda,cantidad:1});d=a.getValues();Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/ObtenerPrecioEspecialiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),ItemCode:c.CodigoArticulo,CardCode:n.idCliente,ListaPrecio:c.ListaPrecios[0].CodigoLista,Cantidad:d.cantidad},callbackKey:\"callback\",success:function(p){var q=p.Procesada,r=p.Data[0]*100/d.Precio;if(q){a.setValues({descuento:r});m=d.Precio-r,b=m*n.tasaImpuesto/100,l=m*d.cantidad+b,a.setValues({descuento:r,totalDeImpuesto:b,importe:l,precioConDescuento:m});if(c.cantidad>0){a.down(\"fieldset\").setTitle(\"Editar producto\");o.getNavigationBar().down(\"#agregarProductos\").hide()}}else{Ext.Msg.alert(\"Datos Incorrectos\",p.Descripcion,Ext.emptyFn)}}})},actualizaCantidad:function(h,g,b){var d=this,a=d.getMain().getActiveItem(),f=a.getActiveItem().getValues(),c=f.precioConDescuento*g,e=g*f.totalDeImpuesto;a.getActiveItem().setValues({importe:c+e,totalDeImpuesto:e})},guardaDatosDeCliente:function(a){var b=this;b.mandaMensaje(\"C\ufffff\ufffffdigos de direcci\ufffff\ufffffn\",\"Entrega: \"+b.direccionEntrega+\"\\nFiscal: \"+b.direccionFiscal)},onOpcionesCliente:function(l,c,d,b,f){var g=this,h=g.getMenu(),k=b.get(\"action\");switch(k){case\"orden\":g.getMain().setActiveItem(2);g.getMain().getActiveItem().getNavigationBar().setTitle(g.titulo);g.getMain().getActiveItem().down(\"opcionesorden\").setActiveItem(0);g.actualizarTotales();g.getPartidaContainer().down(\"list\").emptyTextCmp.show();break;case\"visualizar\":var j=Ext.getStore(\"Transacciones\"),a={CardCode:\"C00001\"};j.setParams(a);j.load();h.push({xtype:\"transaccionlist\"});break}},onTapFavorito:function(c,b,f,a,d,g){},onEliminarOrden:function(c,d){var b=this,a=Ext.getStore(\"Ordenes\");Ext.Msg.confirm(\"Eliminar orden\",\"Se va a eliminar la orden, todos los productos agregados se perder\ufffff\ufffffn \ufffff\ufffffest\ufffff\ufffff seguro?\",function(f){if(f==\"yes\"){a.removeAll();b.getMain().setActiveItem(1)}else{d.setActiveItem(0)}})},onAgregarPartida:function(c){var e=this,a=e.getMain().getActiveItem(),d=c.up(\"navigationorden\"),f=d.getActiveItem().getActiveItem(),b=Ext.getStore(\"Productos\");if(f.isXType(\"partidacontainer\")){var g={CardCode:e.idCliente};b.setParams(g);a.push({xtype:\"productosorden\"});b.load();a.getNavigationBar().down(\"#agregarProductos\").hide()}else{d.getActiveItem().setActiveItem(0)}},onPopNavigationOrden:function(c,b){var d=this,a=d.getMain().getActiveItem(),e=c.getActiveItem().getActiveItem();if(e.isXType(\"clientecontainer\")||e.isXType(\"editarpedidoform\")){a.getNavigationBar().down(\"#agregarProductos\").show()}if(e.isXType(\"partidacontainer\")&&b.isXType(\"agregarproductosform\")){a.getNavigationBar().down(\"#agregarProductos\").show()}},onAddOrden:function(){var a=this;a.getMain().setActiveItem(1)},ponParametros:function(d,a,f,e,g,c){var b=Ext.getStore(d);params={CodigoUsuario:a,CodigoSociedad:f,CodigoDispositivo:e,Contrasenia:g,Token:c,Elementos:10};b.setParams(params);b.load()},onTerminarOrden:function(){var d=this,c=0,a=Ext.getStore(\"Ordenes\"),f=a.getData().items;if(f.length>0){var b=parseInt(localStorage.getItem(\"FolioInterno\"))+1;var e={CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),\"Orden.FolioInterno\":b,\"Orden.CodigoCliente\":d.idCliente,\"Orden.FechaCreacion\":\"2014-06-04\",\"Orden.FechaEntrega\":\"2014-06-04\",\"Orden.CodigoMoneda\":\"$\"};localStorage.setItem(\"FolioInterno\",b);Ext.Array.forEach(f,function(j,g,h){c+=j.get(\"precioConDescuento\");e[\"Orden.Partidas[\"+g+\"].CodigoArticulo\"]=j.get(\"CodigoArticulo\");e[\"Orden.Partidas[\"+g+\"].Cantidad\"]=j.get(\"cantidad\");e[\"Orden.Partidas[\"+g+\"].Precio\"]=j.get(\"Precio\");e[\"Orden.Partidas[\"+g+\"].CodigoAlmacen\"]=d.CodigoAlmacen;e[\"Orden.Partidas[\"+g+\"].Linea\"]=g;e[\"Orden.Partidas[\"+g+\"].Moneda\"]=j.get(\"moneda\");e[\"Orden.Partidas[\"+g+\"].Importe\"]=j.get(\"importe\")});e[\"Orden.TotalDocumento\"]=parseFloat(c).toFixed(2);console.log(e);Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_OrdenVenta/AgregarOrdenMobile\",params:e,callbackKey:\"callback\",success:function(g){console.log(g);d.getMain().setActiveItem(1);a.clearData();if(g.Procesada){Ext.Msg.alert(\"Orden Procesada\",\"Se proceso la orden correctamente\")}else{Ext.Msg.alert(\"Orden No Procesada\",\"No se proceso la orden correctamente\")}}})}else{d.getMain().setActiveItem(1);Ext.Msg.alert(\"Productos\",\"Selecciona al menos un Producto\")}},muestraFacturasPendientes:function(){var b=this,a=b.getMenu();a.push({xtype:\"facturascontainer\",title:b.titulo})},aplicaPago:function(){var e=this,b=e.getMenu(),c,d=0,a=b.getActiveItem().down(\"facturaslist\").getSelection();for(c=0;c<a.length;c++){d+=a[c].data.saldo}e.aPagar=d;b.push({xtype:\"formasdepagolist\",title:e.titulo})},muestraCobranza:function(e,c,f,b){var d=this,a=d.getMenu(),g=b.get(\"title\");a.push({xtype:\"totalapagarcontainer\",title:d.titulo});Ext.Msg.prompt(g,\"Ingrese el monto a pagar:\",function(k,j){if(k==\"ok\"){var h=Ext.getStore(\"Totales\");h.add({tipo:g,monto:j});d.pagado=0;h.each(function(l){d.pagado+=parseFloat(l.get(\"monto\"))});d.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:d.pagado});d.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:d.aPagar-d.pagado})}else{}});d.getTotales().down(\"#aCobrar\").setItems({xtype:\"container\",html:d.aPagar});d.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:d.pagado});d.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:d.aPagar-d.pagado})},onSeleccionarTransacc",361011,33,"Menu();Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),Criterio:2},callbackKey:\"callback\",success:function(c){b.getMain().setActiveItem(2);b.getMain().getActiveItem().getNavigationBar().setTitle(b.titulo);b.getMain().getActiveItem().down(\"opcionesorden\").setActiveItem(0);b.actualizarTotales();b.getPartidaContainer().down(\"list\").emptyTextCmp.show()}})},actualizarTotales:function(){var e=this,b=Ext.getStore(\"Ordenes\").getData().items,f=0,a=0,d=0,c=0;Ext.Array.forEach(b,function(h,g){console.log(h);f+=h.get(\"Precio\")*h.get(\"cantidad\");a+=h.get(\"descuento\")*h.get(\"cantidad\");c+=h.get(\"totalDeImpuesto\");d+=h.get(\"importe\")});e.getOrdenContainer().down(\"#descuento\").setItems({xtype:\"container\",html:a});e.getOrdenContainer().down(\"#subtotal\").setItems({xtype:\"container\",html:parseFloat(f).toFixed(2)});e.getOrdenContainer().down(\"#tax\").setItems({xtype:\"container\",html:parseFloat(c).toFixed(2)});e.getOrdenContainer().down(\"#total\").setItems({xtype:\"container\",html:parseFloat(d).toFixed(2)})},onListAlmacen:function(c,g,b){var d=this,a=d.getMain().getActiveItem(),f=a.down(\"agregarproductosform\").getValues();a.push({xtype:\"almacenlist\",codigoArticulo:f.CodigoArticulo});a.down(\"almacenlist\").setData(d.almacenes)},onSeleccionarAlmacen:function(f,c,j,b,h,d){var g=this,a=g.getMain().getActiveItem();g.CodigoAlmacen=b.get(\"CodigoAlmacen\");Ext.data.JsonP.request({url:\"http://192.168.15.9:88/iMobile/COK1_CL_Consultas/ObtenerDisponibleiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:\"001\",CodigoDispositivo:\"004\",ItemCode:f.codigoArticulo,Token:localStorage.getItem(\"Token\"),Almacen:b.get(\"CodigoAlmacen\")},callbackKey:\"callback\",success:function(e){var k={Disponible:e.Data[0],NombreAlmacen:b.get(\"NombreAlmacen\")};a.down(\"agregarproductosform\").setValues(k);a.pop()}})",614728,928,"CodigoSocio\",type:\"string\"},{name:\"NombreSocio\",type:\"string\"},{name:\"RFC\",type:\"string\"},{name:\"Telefono\",type:\"string\"},{name:\"Correo\",type:\"string\"},{name:\"ListaPrecios\",type:\"string\"},{name:\"LimiteCredito\",type:\"string\"},{name:\"Saldo\",type:\"double\"},{name:\"Direcciones\",type:\"array\"},{name:\"CodigoVendedor\",type:\"string\"},{name:\"CondicionPago\",type:\"string\"},{name:\"NombreListaPrecio\",type:\"string\"},{name:\"CodigoMoneda",594703,41,"store.Clientes\",{extend:Imobile.core",615775,50,"proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Socio/ObtenerListaSociosiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"},extraParams:{format:\"json\"}}",615839,109,"CodigoArticulo\",type:\"string\"},{name:\"NombreArticulo",615984,40,"float\",defaultValue:0},{name:\"P",616038,235,"Disponible\",type:\"float\"},{name:\"DesplegarEnPanel\",type:\"boolean\"},{name:\"ListaPrecios\",type:\"array\"},{name:\"SujetoImpuesto\",type:\"boolean\"},{name:\"color",594703,41,"store.Productos\",{extend:Imobile.core",615775,41,"Producto\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Articulo/ObtenerListaArticulosiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"},extraParams:{format:\"json\"}}",594720,106,"CodigoSocio\",type:\"string\"},{name:\"CodigoArticulo\",type:\"string\"},{name:\"NombreArticulo",615984,40,"float\"},{name:\"P",616038,253,"float\"}]",616484,98,"}});Ext.define(\"Imobile.model.Direccion",615877,71,"idCliente\",type:\"int\"},{name:\"Calle\",type:\"string\"},{name:\"NoExterior\",type:\"string\"},{name:\"NoInterior\",type:\"string\"},{name:\"Colonia\",type:\"string\"},{name:\"Municipio\",type:\"string\"},{name:\"CodigoPostal\",type:\"string\"},{name:\"Ciudad\",type:\"string\"},{name:\"Estado\",type:\"string\"},{name:\"Pais\",type:\"string\"},{name:\"TipoDireccion\",type:\"string\"},{name:\"CodigoImpuesto\",type:\"string\",},{name:\"Tasa\",type:\"string\"},{name:\"CodigoDirecc",594700,44,"store.Direccion",615760,56,"Direccion\"}});Ext.define(\"Imobile.store.DireccionesFiscal",615760,56,"Direccion",616469,39,"model.Moneda",615877,71,"CodigoMoneda\",type:\"string\"},{name:\"NombreMoneda",594703,41,"store.Monedas\",{extend:Imobile.core",615775,41,"Moneda\",autoLoad:true,proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Catalogos/ObtenerListaMonedasiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"},extraParams:{type:\"json\"}}}});Ext.define(\"Imobile.model.Factura",615877,71,"saldo\",type:\"float\"},{name:\"fecha\",type:\"string\"},{name:\"vencimiento",594703,41,"store.Facturas",615018,33,"model:\"Imobile.model.Factura\",autoLoad:true,data:[{id:\"0001\",fecha:\"23-May-2014\",saldo:10000,vencimiento:\"12-Dic-2014\"},{id:\"0002\",fecha:\"12-Abr-2014\",saldo:20000,vencimiento:\"14-Jun-2014\"},{id:\"0003\",fecha:\"28-Ene-2014\",saldo:30000,vencimiento:\"23-Jul-2014\"},{id:\"0004\",fecha:\"30-Mar-2013\",saldo:40000,vencimiento:\"13-Ago-2014\"},{id:\"0005\",fecha:\"23-Oct-2013\",saldo:50000,vencimiento:\"15-Dic-2014",594717,33,"Total",615877,71,"tipo\",type:\"string\"},{name:\"monto\",type:\"double\"}]}});Ext.define(\"Imobile.store.Total",615760,56,"Total",616469,39,"model.Transaccion",615877,48,"Folio\",type:\"string\"},{name:\"CodigoCliente\",type:\"string\"},{name:\"NombreCliente\",type:\"string\"},{name:\"TipoTransaccion\",type:\"int\"}]}});Ext.define(\"Imobile.store.Transacciones\",{extend:Imobile.core",615775,41,"Transaccion\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaAbiertaiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"},extraParams:{format:\"json\"}}",616595,50,616653,49,",\"Direcciones\",\"DireccionesFiscales\",\"Monedas\",\"Facturas\",\"Totales\",\"Transaccio",616698,768]