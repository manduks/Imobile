["function _193e442241f87317925e2b2746487b09fe1f74c9",50,289262,"abel",443767,32,"abel",309664,37,"label\"",289291,145092,"JsonP",384644,34,"ternateClassName:\"Ext.data.ScriptTagProxy\",alias:[\"proxy.jsonp\",\"proxy.scripttag\"],config:{defaultWriterType:\"base\",callbackKey:\"callback\",recordParam:\"records\",autoAppendParams:true",384921,39,"c=d.buildRequest(a),e=c.getParams();c.setConfig({callbackKey:d.getCallbackKey(),timeout:d.getTimeout(),scope:d",385076,42,"});if(d.getAutoAppendParams()){c.setParams({})}c.setJsonP(Ext.data.JsonP.request(c.getCurrentConfig()));c.setParams(e);a.setStarted();d.lastRequest=c;return c",385453,69,"h,f,g){delete c.lastRequest;",385529,32,",setException:function(b,a){b.setException(b.getRequest().getJsonP().errorType)},buildUrl:function(f){var e=this,a=e.callParent(arguments),h=Ext.apply({},f.getParams()),d=h.filters,c,b,g;delete h.filters;if(e.getAutoAppendParams()){a=Ext.urlAppend(a,Ext.Object.toQueryString(h))}if(d&&d.length){for(b=0;b<d.length;b++){c=d[b];g=c.getValue();if(g){a=Ext.urlAppend(a,c.getProperty()+\"=\"+g)}}}return a},destroy:function(){this.abort",358312,32,"bort:function(){var a=this.lastRequest;if(a){Ext.data.JsonP.abort(a.getJsonP())}",441999,152584,"core.data.Store",623584,33,"autoLoad:false,listeners:{beforeload:function(b,a,c){b.getProxy().setExtraParams({Token:localStorage.getItem(\"Token\"),CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\")})}}",594559,333,"textfield\",name:\"usuario\",placeHolder:\"Codigo de Usuario\",value:\"1",594964,55,"Contrase\ufffff\ufffffa\",value:\"12345",595044,80,"itemId:\"login",595122,727,"iconCls:\"logo",595887,219,"CodigoSocio",596110,44,"NombreSocio",596158,636,"CodigoArticulo}</p>\",\"<span><b>{NombreArticulo",596827,4454,604710,122,"agreg",604480,43,604880,32,601313,144,"textfield\",name:\"CodigoArticulo",601480,61,"NombreArticulo",601552,119,"itemId:\"cantidad\"},{xtype:\"numberfield\",name:\"P",601727,441,602318,112,"itemCls:\"partida\",itemTpl:[\"<div>\",'<span style=\"float: left; padding: 15px 0px 0px 10px;\"><i class=\"fa fa-shopping-cart\" style=\"font-size: 30px;\"></i></span><span style=\"float: left; padding: 0 35px;\" class=\"imobile-cliente-tpl\">','<p style=\"margin: 0px;\">{CodigoArticulo}</p>','<p style=\"margin: 0px;\"><b>{NombreArticulo}</b></p>','<p style=\"margin: 0px; color: red;\">Quantity: <b>{cantidad}</b></p>',\"</span>\",\"<span>\",'<p style=\"margin: 0px;\">Precio: {Precio}</p>','<p style=\"margin: 0px;\">Disc: {descuento}</p>','<p style=\"margin: 0px;\" class=\"total-product\"><b>Total: {importe}</b></p>',\"</span>",602613,57,"float: left;\"><div id=\"cliente_id\" style=\"margin-left: 34px;\"></div><div id=\"codigo_id\"></div></div>'}",597088,66,602320,40,597888,40,"ordencontainer\",config:{layout:\"vbox\",xtype:\"container\",docked:\"bottom\",items:{layout:\"hbox\",items:[{xtype:\"container\",html:\"Descuento\",flex:1.2,height:50,itemId:\"descuento\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}},{xtype:\"container\",html:\"Subtotal\",flex:1,itemId:\"subtotal\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"TAX\",flex:1,itemId:\"tax\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Total\",flex:1,itemId:\"total\",style:{background:\"#A9A9A9\",color:\"black\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}}]}",602319,36,602779,146,"fit\",items:[{style:{background:\"gray\"},xtype:\"ordenlist\",flex:7},{xtype:\"ordencontainer\",flex:1",602969,251,603221,34,"CodigoSocio",603259,44,"NombreSocio\",label:\"N",603317,33,"RFC\",label:\"RFC\"},{xtype:\"numberfield\",name:\"T",603407,54,"Correo\",label:\"Correo\"},{xtype:\"textfield\",name:\"L",605406,64,"Limite",603577,54,"S",603632,1420,"textfield\",name:\"CodigoSocio",605081,72,"NombreSocio\",label:\"Nombre de Cliente\"},{xtype:\"numberfield\",name:\"LimiteCredito\",label:\"L\ufffff\ufffffmite de Cr\ufffff\ufffffdito\"",605259,97,"Saldo\",label:\"Saldo\"},{xtype:\"textfield\",name:\"L",605406,174,"NombreMoneda\",label:\"Moneda\",disabled:false,itemId:\"moneda\",inputCls:\"fa-check\"",605617,244,",background:\"#000\"},items:[{title:\"Orden",605885,130,"fa fa-pencil-square-o",606024,55,"fa fa-times",606084,503,"padding:\"10 10 10 17\"",606586,50,"tpl if=\"cantidad &gt; 0\">','<div class= \"ovalo\">{cantidad}</div>',\"</tpl>\"",606633,64,"'<div class=\"container\"> ',\"{NombreArticulo}\",\"</div>",606711,249,607139,145,607103,45,"Fiscal",597408,32,607932,34,607468,136,607103,52,597888,33,607690,552,"Id:\"principal\"",596414,38,600943,63,608338,302,"span><p>{Calle} {NoExterior} {NoInterior} {Colonia} {Municipio}</p></span>\",\"<span><b>{cp} {Ciudad} {E",608703,53,"Pais} </span>','<i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i></div>'",608779,153,"selectedCls:\"direc-selected\"",596544,88,"ventas.NavigationOrden",595747,36,"navigationorden",595787,62,"iconCls:\"logo",612043,108,602320,35,"Monedas",597408,32,"requires:[],xtype:\"monedaslist\",config:{",602446,47,"span><p><b>{CodigoMoneda}</b> {NombreMoneda}</p></span>\",'<i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i></div>'].join(\"\"),store:\"Monedas\",selectedCls:\"direc-selected\"}});Ext.define(\"Imobile.view.cobranza.Cobranza",597408,41,"branza",603752,112,"Cobranza de facturas\",action:\"cobranzaFacturas\"},{title:\"Anticipo de pedido\",action:\"anticipo\"},{title:\"Visualizar cobranzas\",action:\"visualizarCobranza",608464,32,"cobranza.Facturas",597408,39,"facturaslist\",requires:[],config:{itemTpl:['<div class=\"factura\">','<div> <p>N\ufffff\ufffffmero: <b>{id}</b> Saldo: <b>{saldo}</b></div> <i style=\"font-size: 30px;float: right;margin-top: -25px;\" class=\"fa fa-check\"></i>','<div style=\"font-size: 90%\"> <div><p>Fecha: <b>{fecha}</b> Vencimiento: <b>{vencimiento}</b> </div>',\"</div>\"].join(\"\"),store:\"Facturas\",selectedCls:\"direc-selected\",mode:\"MULTI\"",608829,69,"facturas pendientes</div>'}",597088,66,"});Ext.define(\"Imobile.view.cobranza.Facturas",597888,33,"requires:[],xtype:\"facturas",607966,80,"vbox\",items:[{xtype:\"facturaslist\",flex:5},{xtype:\"button\",text:\"Aplicar pago\",ui:\"confirm\",itemId:\"aplicarPago\",margin:10",599870,33,"branza.FormasDePago",597408,39,"formasdepago",603752,112,"Efectivo\",action:\"efectivo\"},{title:\"Tarjeta de Cr\ufffff\ufffffdito\",action:\"credito\"},{title:\"Tarjeta de Regalo\",action:\"regalo",608464,32,"cobranza.TotalAPagar",597408,32,"requires:[],xtype:\"totalapagarlist\",config:{itemCls:\"factura\",itemTpl:\"{tipo}: <b>{monto}</b>\",store:\"Totales\"}});Ext.define(\"Imobile.view.cobranza.Totales",597888,40,"totalescontainer\",config:{layout:\"hbox\",items:[{xtype:\"container\",html:\"A cobrar\",flex:1,itemId:\"aCobrar\",style:{background:\"black\",color:\"yellow\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}},{xtype:\"container\",html:\"Pagado\",flex:1,itemId:\"pagado\",style:{background:\"black\",color:\"green\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Pendiente\",flex:1,itemId:\"pendiente\",style:{background:\"black\",color:\"red\",\"margin-righ\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}",599870,33,"branza.TotalAPag",597886,35,"requires:[],xtype:\"totalapagar",607966,80,"vbox\",items:[{style:{background:\"gray\"},xtype:\"totalapagarlist\",flex:5},{xtype:\"totalescontainer\",flex:1},{xtype:\"button\",text:\"Terminar\",ui:\"confirm\",margin:10",605680,38,"Transac",597404,43,"transaccion",596011,45,"useSimpleItems:true,itemTpl:\"Folio: {Folio} <br> Tipo de transacci\ufffff\ufffffn: {TipoTransaccion} <br> Cliente: {CodigoCliente} - {NombreCliente}\",store:\"Transacciones\"",596414,115,"transaccion",596536,96,609107,205,"CodigoUsuario:undefined,CodigoSociedad:undefined,CodigoDispositivo:undefined,Contrasenia:undefined,Token:undefined,direccionEntrega:undefined,direccionFiscal:undefined,dirIP:\"25.15.241.121:88\"",609311,37,",menu:\"menu\",opcionesOrden:\"opcionesorden\",opcionCliente:\"opcionclientelist\",seleccionadorProFav:\"seleccionadorprofav\",direcciones:\"direccionescontainer\",productosOrden:\"productosorden\",productosView:\"productosview\",navigationOrden:\"navigationorden\",totales:\"totalescontainer\",listaFacturas:\"facturaslist\",ordenContainer:\"ordencontainer\",partidaContainer:\"partidacontainer\"",609348,43,",\"menu dataview\":{itemtap:\"onSelectMenu\"},\"main navigationview #agregarProductos\":{tap:\"onAgregarPartida\"},navigationorden:{pop:\"onPopNavigationOrden\",back:\"onBack\"},menu:{back:\"onBackMenu\"}}},onLoginUser:function(c){var b=this,a=c.getValues();Ext.data.JsonP.request({url:\"http://\"+b.dirIP+\"/iMobile/COK1_CL_UsuarioiMobile/Login\",params:{CodigoUsuario:a.usuario,CodigoSociedad:\"001\",CodigoDispositivo:\"004\",Contrasenia:a.password},callbackKey:\"callback\",success:function(d){console.log(d);var e=d.Procesada;if(e){localStorage.setItem(\"Token\",d.Token);localStorage.setItem(\"CodigoUsuario\",d.Usuario.Codigo);localStorage.setItem(\"CodigoSociedad\",\"001\");localStorage.setItem(\"CodigoDispositivo\",\"004\");localStorage.setItem(\"Contrasenia\",d.Usuario.Contrasenia);b",620644,33,"Ext.Msg.alert(\"Datos Incorrectos\",d.Descripcion,Ext.emptyFn)}}})},onSelectMenu:Ext.emptyFn,aleatorio:function(a,d){var c=d-a,b=Math.random()*c,b=Math.floor(b);return parseInt(a)+b},dameColorAleatorio:function(){var c=new Array(\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"),a=\"#\",b;for(i=0;i<6;i++){b=this.aleatorio(0,c.length);a+=c[b]}return a},onBack",616261,32,"ain().getActiveItem(),d=b.getActiveItem().getActiveItem();c.getPartidaContainer().down(\"list\").emptyTextCmp.show();if(d.isXType(\"partidacontainer\")||d.isXType(\"clientecontainer\")||d.isXType(\"editarpedidoform\")){b.getActiveItem().setActiveItem(0);a",615758,46,"show()}},onBackMenu:function(){var b=this,a=Ext.getStore(\"Clientes\"),c={CodigoUsuario:b.CodigoUsuario,CodigoSociedad:b.CodigoSociedad,CodigoDispositivo:b.CodigoDispositivo,Token:b.Token};a.getProxy().setUrl(\"http://\"+b.dirIP+\"/iMobile/COK1_CL_Socio/ObtenerListaSociosiMobile\");a.setParams(c);a.load()",609244,35,"tablet",612192,39,611363,609,"orden\"}]",609244,35,612187,85,"entrega:undefined,titulo:undefined,opcion:undefined,aPagar:0,pagado:0,pendiente:0,partida",612261,372,"agregarproductosform #cantidad\":{change:\"actualizaCantidad",612672,138,"Cliente",612855,360,613262,179,",itemtap:\"onAgregarProducto\"},\"opcionesorden #terminar\":{activate:\"onTerminarOrden\"},\"clientecontainer #guardar\":{tap:\"guardaDatosDeCliente\"},\"editarpedidoform #moneda\":{focus:\"muestraMonedas\"},tpldirecciones:{itemtap:\"seleccionaDireccion\"},monedaslist:{itemtap:\"seleccionaMoneda\"},cobranzalist:{itemtap:\"muestraFacturasPendientes\"},\"facturascontainer #aplicarPago\":{tap:\"aplicaPago\"},formasdepagolist:{itemtap:\"muestraCobranza\"},transaccionlist:{itemtap:\"onSeleccionarTransaccion\"}}},onSelectMenu:function(b,c,f,a,d){var e=this,b=e.getMenu();e.opcion=a.get(\"action\");switch(e.opcion",613529,77,"e",613607,123,"e",613731,37,"case\"cobranza\":b.push({xtype:\"clienteslist\",opcion:e.opcion}",617655,33,";this.esFavorito=false;break;case\"salir\":e",613860,291,"seleccionaDireccion:function(e,c,f,b){var d=this,a=d.getMain().getActiveItem();if(d.entrega){d.direccionEntrega=b.data.Colonia;d.mandaMensaje(\"Direcci\ufffff\ufffffn de entrega\",\"Direcci\ufffff\ufffffn de entrega seleccionada\")}else{d.direccionFiscal=b.data.Ciudad;d.mandaMensaje(\"Direcci\ufffff\ufffffn fiscal\",\"Direcci\ufffff\ufffffn fiscal seleccionada\")}a.pop()},seleccionaMoneda:function(e,c,f,b){var d=this,a=d.getMain().getActiveItem();moneda=b.data.NombreMoneda,tabOpciones=d.getOpcionesOrden(),form=tabOpciones.down(\"editarpedidoform\");form.setValues({NombreMoneda:moneda});a.pop()},muestraMonedas",620716,55,"ponParametros(\"Monedas\",b.CodigoUsuario,b.CodigoSociedad,b.CodigoDispositivo,\"\",b.Token);a.push({xtype:\"monedaslist\"});a",615758,54,"eliminaPartida:function(e,c,f,a){var d=this,b=Ext.getStore(\"Ordenes\")",617224,35,614229,83,"h){if(h==\"yes\"){var g=b.find(\"CodigoArticulo\",a.data.CodigoArticulo);b.removeAt(g);d.actualizarTotales()}})},cambiaItem:function(h,f,d){var e=this,b=e.getMain().getActiveItem(),a=b",615758,45,";if(f.xtype==\"clientecontainer\"){a.setText(\"Back\").show();a.setUi(\"back\");var c=Ext.getStore(\"Clientes\"),g={CodigoUsuario:e.CodigoUsuario,CodigoSociedad:e.CodigoSociedad,CodigoDispositivo:e.CodigoDispositivo,Criterio:e.idCliente,Token:e.Token};c.getProxy().setUrl(\"http://\"+e.dirIP+\"/iMobile/COK1_CL_Socio/ObtenerSocioiMobile\");c.setParams(g);c.load({callback:function(k,l){var m=f.down(\"clienteform\"),j=Ext.getStore(\"Direcciones\");m.setValues(k[0].data);j.setData(k[0].data.Direcciones);j.clearFilter();j.filter(\"TipoDireccion\",\"B\");e.direccionEntrega=j.getAt(0).data.Calle;j.clearFilter();j.filter(\"TipoDireccion\",\"S\");e.direccionFiscal=j.getAt(0).data.Calle}})}if(f.xtype==\"editarpedidoform\"){f.setValues(e.traeCliente());a.setText(\"Back\").show();a.setUi(\"back\")}if(f.xtype==\"partidacontainer\"){a.setText(\"Agregar\").show();a.setUi(\"normal\")}},traeCliente:function(){var b=this,d=Ext.getStore(\"Clientes\"),c=d.find(\"CodigoSocio\",b.idCliente),a=d.getAt(c).data;return a},muestraDirecciones:function(f,d,g,c){var e=this,b=e.getMain().getActiveItem(),a=Ext.getStore(\"Direcciones\");a.clearFilter();if(c.data.action==\"entrega\"){a.filter(\"TipoDireccion\",\"B\");e.entrega=true}else{a.filter(\"TipoDireccion\",\"S\");e.entrega=false}b",615722,32,"b",615758,129,"Ext.getStore(\"Productos\").clearFilter(",615957,90,"){var b=this,a=Ext.getStore(\"Productos\");b",615960,47,"view\"});setTimeout(function(){a.each(function(e,c,d){e.set(\"color\",b.dameColorAleatorio());console.log(e.get(\"cantidad\"))})},100",616173,79,"agregaProductos:function(c){var a,o,e,k,p,l=this,p=Ext.getStore(\"Ordenes\"),g=Ext.getStore(\"Productos\"),b=l.getMain().getActiveItem(),a=c.up(\"agregarproductosform\"),o=a.getValues(),e=o.NombreArticulo,k=o.cantidad,j=o.importe;if(Ext.isEmpty(e)||Ext.isEmpty(k)){l",616659,126,"var n=o.CodigoArticulo,d=p.find(\"CodigoArticulo\",n),f=g.find(\"CodigoArticulo\",n),h=g.getAt(f);h.set(\"cantidad\",k);if(d==-1){p.add(o);console.log(\"La del producto es: \"+h.get(\"cantidad\"))}else{var m=p.getAt(d);m.set(\"cantidad\",k);m.set(\"NombreArticulo\",e);m.set(\"importe\",j)}b.pop()}l.actualizarTotales()},muestraProductos:function(){Ext.getStore(\"Productos\").load()},muestraClientes:function(){",617657,62,"Ext.getStore(\"Ordenes\").load()},busca:function(a){},buscaCliente:function(a){",618285,169,"g,c,j,a,h,d){var f=this;a.set(\"favorite\",!a.get(\"favorite\"));if(a.get(\"favorite\")){var b=f.dameColorAleatorio();a.set(\"color\",b)}},lista:function(c){var a=Ext.getStore(\"Productos\"),b=this;a.clearFilter();a.filter(\"DesplegarEnPanel\",c",618830,79,"g,d,h,b,e){var f=this,a=f.getMenu(),c=b.get(\"NombreSocio\");f.idCliente=b.get(\"CodigoSocio\");f.titulo=f.idCliente+\" \"+c;switch(g.opcion){case\"venta\":a",618978,40,".titulo});break;case\"cobranza\":a.push({xtype:\"cobranzalist\",title:f.titulo});break}",619054,53,"e,c,h,b){var d=this,a=d.getMain().getActiveItem(),g=b.data,f",619179,68,"g);a.getActiveItem().setValues({precioConDescuento:g.Precio-g.descuento,cantidad:1});f=a.getActiveItem().getValues();a.getActiveItem().setValues({importe:f.precioConDescuento*f.cantidad});if(g.cantidad>0){a.getActiveItem().down(\"fieldset\").setTitle(\"Editar producto\");a",615758,53,"},actualizaCantidad:function(f,e,b){var c=this,a=c.getMain().getActiveItem(),d=a.getActiveItem().getValues();a.getActiveItem().setValues({importe:d.precioConDescuento*e})},guardaDatosDeCliente:function(a){var b=this;b.mandaMensaje(\"C\ufffff\ufffffdigos de direcci\ufffff\ufffffn\",\"Entrega: \"+b.direccionEntrega+\"\\nFiscal: \"+b.direccionFiscal)},onOpcionesCliente:function(n,f,g,d,h){var j=this,k=j.getMenu(),m=d.get(\"action\");switch(m){case\"orden\":j.getMain().setActiveItem(2);j",619705,55,"j.titulo);j",619786,66,"j.actualizarTotales();j.getPartidaContainer().down(\"list\").emptyTextCmp.show();var c=j.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#cliente_id\"),a=j.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#codigo_id\");console.log(c);c.setText(\"Transacci\ufffff\ufffffn: Orden de Venta\");a.setText(\"Codigo de Dispositivo: \"+j.CodigoUsuario);a.setText(\"Nombre de Dispositivo:: \"+j.CodigoUsuario);break;case\"visualizar\":var l=Ext.getStore(\"Transacciones\");var b={CodigoUsuario:j.CodigoUsuario,CodigoSociedad:j.CodigoSociedad,CodigoDispositivo:j.CodigoDispositivo,Token:j.Token,CardCode:\"C00001\"};l.setParams(b);l.load();k.push({xtype:\"transaccionlist\"}",619850,33,"c,b,f,a,d,g){},onEliminarOrden:function(c,d){var b=this,a=Ext.getStore(\"Ordenes\")",620378,147,"a.removeAll();b",620644,33,"d",620678,48,"b){var d=this,a=d.getMain().getActiveItem(),c=b.up(\"navigationorden\"),e=c.getActiveItem().getActiveItem();console.log(e.xtype);d.ponParametros(\"Productos\",d.CodigoUsuario,d.CodigoSociedad,d.CodigoDispositivo,\"\",d.Token);if(e.isXType(\"partidacontainer\")){",620790,87,"else{c.getActiveItem().setActiveItem(0)}",620876,32,"c,b){var d=this,a=d.getMain().getActiveItem(),e=c.getActiveItem().getActiveItem();if(e.isXType(\"clientecontainer\")||e.isXType(\"editarpedidoform\")){a",615758,46,"show()}if(e.isXType(\"partidacontainer\")&&b.isXType(\"agregarproductosform\")){a",615758,46,"show()}",621004,64,",ponParametros:function(d,a,f,e,g,c){var b=Ext.getStore(d);params={CodigoUsuario:a,CodigoSociedad:f,CodigoDispositivo:e,Contrasenia:g,Token:c,Elementos:10};b.setParams(params);b.load()},onTerminarOrden:function(){var c=this,b=0,a=Ext.getStore(\"Ordenes\"),e=a.getData().items,d={CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),\"Orden.FolioInterno\":100,\"Orden.CodigoCliente\":\"C00001\",\"Orden.FechaCreacion\":\"2014-06-04\",\"Orden.FechaEntrega\":\"2014-06-04\",\"Orden.CodigoMoneda\":\"$\"};Ext.Array.forEach(e,function(h,f,g){b+=h.get(\"precioConDescuento\");d[\"Orden.Partidas[\"+f+\"].CodigoArticulo\"]=h.get(\"CodigoArticulo\");d[\"Orden.Partidas[\"+f+\"].Cantidad\"]=h.get(\"cantidad\");d[\"Orden.Partidas[\"+f+\"].Precio\"]=h.get(\"Precio\");d[\"Orden.Partidas[\"+f+\"].CodigoAlmacen\"]=\"01\";d[\"Orden.Partidas[\"+f+\"].Linea\"]=f;d[\"Orden.Partidas[\"+f+\"].Moneda\"]=h.get(\"moneda\");d[\"Orden.Partidas[\"+f+\"].Importe\"]=h.get(\"importe\")});d[\"Orden.TotalDocumento\"]=parseFloat(b).toFixed(2);console.log(d);Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_OrdenVenta/AgregarOrdenMobile\",params:d,callbackKey:\"callback\",success:function(f){console.log(f);c.getMain().setActiveItem(1);a.clearData();if(f.Procesada){Ext.Msg.alert(\"Orden Procesada\",\"Se proceso la orden correctamente\")}else{Ext.Msg.alert(\"Orden No Procesada\",\"No se proceso la orden correctamente\")}}})},muestraFacturasPendientes:function(){var b=this,a=b.getMenu();a.push({xtype:\"facturascontainer\",title:b.titulo})},aplicaPago:function(){var e=this,b=e.getMenu(),c,d=0,a=b.getActiveItem().down(\"facturaslist\").getSelection();for(c=0;c<a.length;c++){d+=a[c].data.saldo}e.aPagar=d;b.push({xtype:\"formasdepagolist\",title:e.titulo})},muestraCobranza:function(e,c,f,b){var d=this,a=d.getMenu(),g=b.get(\"title\");a.push({xtype:\"totalapagarcontainer\",title:d.titulo});Ext.Msg.prompt(g,\"Ingrese el monto a pagar:\",function(k,j){if(k==\"ok\"){var h=Ext.getStore(\"Totales\");h.add({tipo:g,monto:j});d.pagado=0;console.log(d.pagado);h.each(function(l){d.pagado+=parseFloat(l.get(\"monto\"))});d.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:d.pagado});d.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:d.aPagar-d.pagado})}else{}});d.getTotales().down(\"#aCobrar\").setItems({xtype:\"container\",html:d.aPagar});d.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:d.pagado});d.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:d.aPagar-d.pagado})},onSeleccionarTransacc",361011,33,"Menu();Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),Criterio:2},callbackKey:\"callback\",success:function(c){b.getMain().setActiveItem(2);b",619705,57,"titulo);b",619786,67,".actualizarTotales();b.getPartidaContainer().down(\"list\").emptyTextCmp.show();var d=b.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#cliente_id\"),e=b.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#codigo_id\");console.log(d);d.setText(\"Transacci\ufffff\ufffffn: Orden de Venta\");e.setText(\"Codigo de Dispositivo: \"+b.CodigoUsuario);e.setText(\"Nombre de Dispositivo:: \"+b.CodigoUsuario)}})},actualizarTotales:function(){var d=this,b=Ext.getStore(\"Ordenes\").getData().items,e=0,a=0,c=0;Ext.Array.forEach(b,function(g,f){e+=g.get(\"Precio\");a+=g.get(\"descuento\");c+=g.get(\"precioConDescuento\")});d.getOrdenContainer().down(\"#descuento\").setItems({xtype:\"container\",html:a});d.getOrdenContainer().down(\"#subtotal\").setItems({xtype:\"container\",html:parseFloat(e).toFixed(2)});d.getOrdenContainer().down(\"#total\").setItems({xtype:\"container\",html:parseFloat(c).toFixed(2)}",621066,929,"CodigoSocio\",type:\"string\"},{name:\"NombreSocio\",type:\"string\"},{name:\"RFC\",type:\"string\"},{name:\"Telefono\",type:\"string\"},{name:\"Correo\",type:\"string\"},{name:\"ListaPrecios\",type:\"string\"},{name:\"LimiteCredito\",type:\"string\"},{name:\"Saldo\",type:\"double\"},{name:\"Direcciones\",type:\"array\"}]",622255,48,"Imobile.core",623597,41,"Cliente\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Socio/ObtenerListaSociosiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"},extraParams:{format:\"json\"}}",622369,109,"CodigoArticulo\",type:\"string\"},{name:\"NombreArticulo",623215,40,"float\",defaultValue:0},{name:\"P",622568,253,"float\"},{name:\"DesplegarEnPanel\",type:\"boolean\"},{name:\"color",594703,41,622951,92,",data:[{CodigoArticulo:\"A010\",NombreArticulo:\"Producto 1 con nombre muy, muy largo\",DesplegarEnPanel:true,Precio:3.5,descuento:1,importe:22,almacen:22,existencia:1,moneda:\"$\",totalDeImpuesto:100},{CodigoArticulo:\"P03\",NombreArticulo:\"Producto 2\",DesplegarEnPanel:false,Precio:13.5,descuento:4,importe:34,almacen:22,existencia:4,moneda:\"$\",totalDeImpuesto:140},{CodigoArticulo:\"P02\",NombreArticulo:\"Producto 3\",DesplegarEnPanel:true,Precio:13.5,descuento:2,importe:56,almacen:22,existencia:7,moneda:\"$\",totalDeImpuesto:12},{CodigoArticulo:\"P0156\",NombreArticulo:\"Product 4\",DesplegarEnPanel:false,Precio:11.87,descuento:3,importe:67,almacen:22,existencia:8,moneda:\"$\",totalDeImpuesto:12},{CodigoArticulo:\"P0141\",NombreArticulo:\"Producto 5\",DesplegarEnPanel:true,Precio:17.7,descuento:5,importe:78,almacen:22,existencia:10,moneda:\"$\",totalDeImpuesto:23},{CodigoArticulo:\"P0128\",NombreArticulo:\"Producto 6\",DesplegarEnPanel:true,Precio:16.5,descuento:0.5,importe:78,almacen:22,existencia:10,moneda:\"$\",totalDeImpuesto:23",621885,32,"Orde",623696,72,"CodigoSocio\",type:\"string\"},{name:\"CodigoArticulo\",type:\"string\"},{name:\"NombreArticulo",623215,40,"float\"},{name:\"P",622568,253,"float\"}]",623547,251,"Calle\",type:\"string\"},{name:\"NoExterior\",type:\"string\"},{name:\"NoInterior\",type:\"string\"},{name:\"Colonia\",type:\"string\"},{name:\"M",623859,32,"CodigoPostal\",type:\"string\"},{name:\"Ciudad\",type:\"string\"},{name:\"Estado\",type:\"string\"},{name:\"Pais\",type:\"string\"},{name:\"TipoDirecc",594700,44,624038,81,624014,41,624174,94,"define(\"Imobile.model.Moneda",622407,71,"CodigoMoneda\",type:\"string\"},{name:\"NombreMoneda",594703,41,"store.Moneda",623583,55,"Moneda\",autoLoad:true,proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Catalogos/ObtenerListaMonedasiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"}}}});Ext.define(\"Imobile.model.Factura",622407,71,"saldo\",type:\"float\"},{name:\"fecha\",type:\"string\"},{name:\"vencimiento",594703,41,"store.Factura",623583,55,"Factura\",autoLoad:true,data:[{id:\"0001\",fecha:\"23-May-2014\",saldo:10000,vencimiento:\"12-Dic-2014\"},{id:\"0002\",fecha:\"12-Abr-2014\",saldo:20000,vencimiento:\"14-Jun-2014\"},{id:\"0003\",fecha:\"28-Ene-2014\",saldo:30000,vencimiento:\"23-Jul-2014\"},{id:\"0004\",fecha:\"30-Mar-2013\",saldo:40000,vencimiento:\"13-Ago-2014\"},{id:\"0005\",fecha:\"23-Oct-2013\",saldo:50000,vencimiento:\"15-Dic-2014",621884,33,"Total",622407,71,"tipo\",type:\"string\"},{name:\"monto\",type:\"double\"}]}});Ext.define(\"Imobile.store.Total",623582,56,"Total",624118,39,"model.Transa",623692,53,"Folio\",type:\"string\"},{name:\"CodigoCliente\",type:\"string\"},{name:\"NombreCliente\",type:\"string\"},{name:\"TipoTransaccion\",type:\"int\"}]}});Ext.define(\"Imobile.store.Transa",624048,61,"Transaccion\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaAbiertaiMobile\",type:\"jsonp\",callbackKey:\"callback\",reader:{type:\"json\",rootProperty:\"Data\"}}",624260,135,",\"Monedas\",\"Facturas\",\"Totales\",\"Transaccion",624392,767]