["function _193e442241f87317925e2b2746487b09fe1f74c9",50,588261,"core.data.Store",624702,33,"autoLoad:false,listeners:{beforeload:function(b,a,c){b.getProxy().setExtraParams({Token:localStorage.getItem(\"Token\"),CodigoUsuario:",609160,37,",CodigoSociedad:",609215,38,",CodigoDispositivo:",609274,41,"})",623472,32,588317,7274,"itemId:\"cantidad\"},{xtype:\"numberfield\",name:\"P",595647,1009,"Preci",596471,33,596694,164,"float: left;\"><div id=\"cliente_id\" style=\"margin-left: 34px;\"></div><div id=\"codigo_id\"></div>",596924,186,"vbox\",xtype:\"container\",docked:\"bottom\",items",606299,48,"Descuento\",flex:1.2,height:50,itemId:\"descuento\",style:{background:\"#696969\",color:\"white",606608,65,606485,54,"Subtotal\",flex:1,itemId:\"subtotal\",style:{background:\"#696969\",color:\"white",606608,93,"TAX\",flex:1,itemId:\"tax\",style:{background:\"#696969\",color:\"white",606608,93,"Total\",flex:1,itemId:\"total\",style:{background:\"#A9A9A9\",color:\"black",606608,67,"]}",598592,36,"Partid",602207,53,"partida",593232,79,"\"fit",607037,43,"ordenlist\",flex:7",597574,700,"S",598275,1587,"LimiteCredito",599868,126,"S",599995,46,598149,65,600101,1264,"tpl if=\"cantidad &gt; 0\">','<div class= \"ovalo\">{cantidad}</div>',\"</tpl>\"",601391,136,601528,5608,"1",607139,237,"F",607377,34,"TipoTransaccion} <br> Cliente: {CodigoCliente} - {NombreC",607440,572,"direccionEntrega:undefined,direccionFiscal:undefined,dirIP:\"25.15.241.121:88\"",608011,342,",ordenContainer:\"ordencontainer\",partidaContainer:\"partidacontainer",608352,168,"pop:\"onPopNavigationOrden\",",608520,129,"\"+b.dirIP+\"",608664,183,"console.log(d);",608847,296,609403,467,".getPartidaContainer().down(\"list\").emptyTextCmp.show(",609910,395,"\"+b.dirIP+\"",610320,973,"partida:undefined",611292,362,"agregarproductosform #cantidad\":{change:\"actualizaCantidad",611650,770,"clientecontainer #guardar\":{tap:\"guardaDatosDeCliente",612416,698,613206,47,"Ext.getStore(\"Clientes\").load(",613251,372,619578,40,";if(d.entrega){d.direccionEntrega=b.data.Colonia;d",613657,81,"d.direccionFiscal=b.data.Ciudad;d",613755,68,"a.pop()},seleccionaMoned",620304,39,"ain().getActiveItem();moneda=b.data.NombreMoneda,tabOpciones=d.getOpcionesOrden(),form=tabOpciones.down(\"editarpedidoform\");form.setValues({NombreMoneda:moneda});a.pop(",613969,515,";d.actualizarTotales()}})},cambiaItem:function(h,f,d",615287,45,615534,46,";if(f.xtype==\"clientecontainer\"){a.setText(\"Back\").show();a.setUi(\"back\");var c=Ext.getStore(\"Clientes\"),g={CodigoUsuario:e.CodigoUsuario,CodigoSociedad:e",610208,34,"e.CodigoDispositivo,Criterio:e.idCliente,Token:e.Token};c.getProxy().setUrl(\"http://\"+e.dirIP+\"",614856,45,"c.setParams(g);c",618210,36,"f.down(\"clienteform\"),j=Ext.getStore(\"Direcciones\");m.setValues(k[0].data);j.setData(k[0].data.Direcciones);j.clearFilter();j.filter(\"TipoDireccion\",\"B\");e.direccionEntrega=j.getAt(0).data.Calle;j.clearFilter();j.filter(\"TipoDireccion\",\"S\");e.direccionFiscal=j.getAt(0).data.Calle}})}if(f.xtype==\"editarpedidoform\"){f.setValues(e.traeCliente());a.setText(\"Back\").show();a.setUi(\"back\")}if(f.xtype==\"partidacontainer\"){a.setText(\"Agregar\").show();a.setUi(\"normal\"",615123,581,615737,88,"){var b",615837,34,"b",615738,47,615939,46,"e,c,d){e.set(\"color\",b.dameColorAleatorio());console.log(e.get(\"cantidad\"",616027,88,616202,34,"o,e,k,p,l=this,p=Ext.getStore(\"Ordenes\"),g=Ext.getStore(\"Productos\"),b=l.getMain().getActiveItem(),a=c.up(\"agregarproductosform\"),o=a.getValues(),e=o.NombreArticulo,k=o.cantidad,j=o.importe",616389,32,"k)){l",616426,130,"n=o.CodigoArticulo,d=p.find(\"CodigoArticulo\",n),f=g.find(\"CodigoArticulo\",n),h=g.getAt(f);h.set(\"cantidad\",k);if(d==-1){p.add(o);console.log(\"La del producto es: \"+h.get(\"cantidad\"))}else{var m=p.getAt(d);m.set(\"cantidad\",k);m.set(\"NombreArticulo\",e);m.set(\"importe\",j)}b.pop()}l.actualizarTotales()",616753,613,"DesplegarEnPanel\",c)",617404,407,"h,b",619576,43,"g=b.data,f;a",617881,38,"a.getActiveItem().setValues(g);a.getActiveItem().setValues({precioConDescuento:g.Precio-g.descuento,cantidad:1});f=a.getActiveItem().getValues();a.getActiveItem().setValues({importe:f.precioConDescuento*f.cantidad});if(g.cantidad>0){a",618318,62,614160,54,"},actualizaCantidad:function(f,e,",609789,46,"a.getActiveItem().getValues();a.getActiveItem().setValues({importe:d.precioConDescuento*e})},guardaDatosDeCliente:function(a){var b=this;b.mandaMensaje(\"C\ufffff\ufffffdigos de direcci\ufffff\ufffffn\",\"Entrega: \"+b.direccionEntrega+\"\\nFiscal: \"+b.direccionFiscal)},onOpcionesCliente:function(n,f,g,d,h){var j=this,k=j.getMenu(),m=d.get(\"action\");switch(m){case\"orden\":j.getMain().setActiveItem(2);j",618569,55,"j.titulo);j",618635,66,"j.actualizarTotales();j.getPartidaContainer().down(\"list\").emptyTextCmp.show();var c=j.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#cliente_id\"),a=j.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#codigo_id\");console.log(c);c.setText(\"Transacci\ufffff\ufffffn: Orden de Venta\");a.setText(\"Codigo de Dispositivo: \"+j.CodigoUsuario);a.setText(\"Nombre de Dispositivo:: \"+j.CodigoUsuario);break;case\"visualizar\":var l",618729,35,"b={CodigoUsuario:j.CodigoUsuario,CodigoSociedad:j",610208,34,"j.CodigoDispositivo,Token:j.Token,CardCode:\"C00001\"};l.setParams(b);l.load();k",618928,389,"b",619576,43,"c=b.up(\"navigationorden\"),e=c",609836,45,"e.xtype);d.ponParametros(\"Productos\",d.CodigoUsuario,d.CodigoSociedad,d.CodigoDispositivo,\"\",d.Token);if(e.isXType(\"partidacontainer\")){",619453,87,"else{c",610009,33,"}",619539,35,619576,43,"e=c",609836,33,"if(e.isXType(\"clientecontainer\")||e.isXType(\"editarpedidoform\")){",614160,47,"show()}if(e.isXType(\"partidacontainer\")&&b.isXType(\"agregarproductosform\")){",614160,47,"show()}},onAdd",619904,58,"ponParametros:function(d,a,f,e,g,c){var b=Ext.getStore(d);params",619778,67,"g",619846,35,"params",619882,43,"c=this,b=0,a=Ext.getStore(\"Ordenes\"),e=a.getData().items,d={CodigoUsuario:",609160,37,",CodigoSociedad:",609215,38,",CodigoDispositivo:",609274,41,",Token:localStorage.getItem(\"Token\"),\"Orden.FolioInterno\":100,\"Orden.CodigoCliente\":\"C00001\",\"Orden.FechaCreacion\":\"2014-06-04\",\"Orden.FechaEntrega\":\"2014-06-04\",\"Orden.CodigoMoneda\":\"$\"};Ext.Array.forEach(e,function(h,f,g){b+=h.get(\"precioConDescuento\");d[\"Orden.Partidas[\"+f+\"].CodigoArticulo\"]=h.get(\"CodigoArticulo\");d[\"Orden.Partidas[\"+f+\"].Cantidad\"]=h.get(\"cantidad\");d[\"Orden.Partidas[\"+f+\"].Precio\"]=h.get(\"Precio\");d[\"Orden.Partidas[\"+f+\"].CodigoAlmacen\"]=\"01\";d[\"Orden.Partidas[\"+f+\"].Linea\"]=f;d[\"Orden.Partidas[\"+f+\"].Moneda\"]=h.get(\"moneda\");d[\"Orden.Partidas[\"+f+\"].Importe\"]=h.get(\"importe\")});d[\"Orden.TotalDocumento\"]=parseFloat(b).toFixed(2);console.log(d",608611,38,"25.15.241.121:88/iMobile/COK1_CL_OrdenVenta/AgregarOrdenMobile\",params:d",608803,41,"f){console.log(f);c.getMain().setActiveItem(1);a.clearData();if(f.Procesada){Ext.Msg.alert(\"Orden Procesada\",\"Se proceso la orden correctamente\")}else{Ext.Msg.alert(\"Orden No Procesada\",\"No se proceso la orden correctamente\")}}}",619959,1148,608613,36,"25.15.241.121",626614,55,"\",params:{CodigoUsuario:",609160,37,",CodigoSociedad:",609215,38,",CodigoDispositivo:",609274,41,",Token:localStorage.getItem(\"Token\"),Criterio:2",608802,42,"c){b.getMain().setActiveItem(2);b",618569,55,"b.titulo);b",618635,67,".actualizarTotales();b.getPartidaContainer().down(\"list\").emptyTextCmp.show();var d=b.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#cliente_id\"),e=b.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#codigo_id\");console.log(d);d.setText(\"Transacci\ufffff\ufffffn: Orden de Venta\");e.setText(\"Codigo de Dispositivo: \"+b.CodigoUsuario);e.setText(\"Nombre de Dispositivo:: \"+b.CodigoUsuario)}})},actualizarTotales:function(",614246,38,".getData().items,e=0,a=0,c=0;Ext.Array.forEach(b,function(g,f){e+=g.get(\"Precio\");a+=g.get(\"descuento\");c+=g.get(\"precioConDescuento\")});d.getOrdenContainer().down(\"#descuent",620910,37,"a});d.getOrdenContainer().down(\"#subtotal",620911,36,"parseFloat(e).toFixed(2)});d.getOrdenContainer().down(\"#total",620911,36,"parseFloat(c).toFixed(2)})",610492,32,621173,1128,"S",622302,103,"Imobile.core",624032,41,"Cliente\",proxy:{url:\"http://25.15.241.121",610317,52,626671,77,",extraParams:{format:\"json",623471,33,"Producto",624816,77,626367,86,"float\",defaultValue:0},{name:\"P",622848,268,"DesplegarEnPanel\",type:\"boolean\"",623158,148,"data:[{CodigoArticulo:\"A010\",NombreArticulo:\"Producto 1 con nombre muy, muy largo\",DesplegarEnPanel:true,Precio:3.5,descuento:1,importe:22,almacen:22,existencia:1,moneda:\"$\",totalDeImpuesto:100},{CodigoArticulo:\"P03\",NombreArticulo:\"Producto 2\",DesplegarEnPanel:false,Precio:13.5,descuento:4,importe:34,almacen:22,existencia:4,moneda:\"$\",totalDeImpuesto:140},{CodigoArticulo:\"P02\",NombreArticulo:\"Producto 3\",DesplegarEnPanel:true,Precio:13.5,descuento:2,importe:56,almacen:22,existencia:7,moneda:\"$\",totalDeImpuesto:12},{CodigoArticulo:\"P0156\",NombreArticulo:\"Product 4\",DesplegarEnPanel:false,Precio:11.87,descuento:3,importe:67,almacen:22,existencia:8,moneda:\"$\",totalDeImpuesto:12},{CodigoArticulo:\"P0141\",NombreArticulo:\"Producto 5\",DesplegarEnPanel:true,Precio:17.7,descuento:5,importe:78,almacen:22,existencia:10,moneda:\"$\",totalDeImpuesto:23},{CodigoArticulo:\"P0128\",NombreArticulo:\"Producto 6\",DesplegarEnPanel:true,Precio:16.5,descuento:0.5,importe:78,almacen:22,existencia:10,moneda:\"$\",totalDeImpuesto:23",625979,32,623504,203,"float\"},{name:\"P",622848,260,623981,1084,"proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Catalogos/ObtenerListaMoneda",623387,117,"Factur",624815,72,625425,823,626249,89,"Fol",624368,32,"Cliente\",type:\"string\"},{name:\"NombreCliente\",type:\"string\"},{name:\"TipoTransaccion",626445,124,"proxy:{url:\"http://25.15.241.121",626614,48,"Abierta",623388,94,626757,938]