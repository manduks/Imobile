["function _b662ffb0810ea357c1704629ca49ad12167a1154",50,588592,",Elementos:500",588642,668,"=b.toFixed(2)",589314,60,"parseFloat(x[0]).toString()",589378,66,".00",589444,207,".toFixed(2",589650,3239,593046,3025,596441,976,597486,131,"text",597623,251,"mg src=\"{Imagen}\" width=\"50px\" height=\"50px\"",597931,8040,596076,365,605966,511,611118,154,606521,252,"</tpl",606772,33,"mode:\"SINGLE",592109,90,606893,531,"tpl for=\".\"><tpl if =\"Predeterminada",611153,129,607478,129,"</tpl",607606,592,"Folio}</b> Saldo: <b>{saldoAMostrar",608222,146,"FechaCreacion}</b> Vencimiento: <b>{FechaFin",608407,753,"Nombre}\",store:\"FormasDePago\"",610144,49,591040,32,609383,261,"flex:1,itemId:\"aCobrar\",html:\"A cobrar\",cls:\"aCobrar2\",",609815,460,610328,122,"container\",layout:\"hbox\",items:[",610442,54,",flex:1},{xtype:\"button\",text:\"Cancelar\",ui:\"decline\",itemId:\"cancelar\",margin:10,flex:1}]",610496,232,610776,707,"form.prospectos.Prospectos",600877,36,"prospectosform\",config:{padding:\"10 15 15 15\",scrollable:\"vertical\",",596538,144,"Prospecto\",text:\"Agreg",596695,68,"prospecto",589927,40,596845,71,"fecha\",label:\"Fecha\",required:false,disabled:true,value:Ext.Date.format(new Date(),\"d-m-Y\")},{xtype:\"textfield\",name:\"codig",601125,45,"razonSocial\",label:\"Raz\ufffff\ufffffn Social",603545,32,"Persona\",label:\"Tipo de persona\"},{xtype:\"textfield\",name:\"rfc\",label:\"RFC\",required:false}]},{xtype:\"fieldset\",itemId:\"direccion\",title:\"Direcci\ufffff\ufffffn",589927,40,596845,71,"calle\",label:\"Calle\"},{xtype:\"textfield\",name:\"noExt\",label:\"No. Ext\",required:false},{xtype:\"textfield\",name:\"noInt\",label:\"No.Int\",required:false},{xtype:\"textfield\",name:\"colonia\",label:\"Colonia\"},{xtype:\"textfield\",name:\"ciudad\",label:\"Ciudad\"},{xtype:\"textfield\",name:\"municipio\",label:\"Municipio\"},{xtype:\"textfield\",name:\"cp\",label:\"C.P.\"},{xtype:\"textfield\",name:\"estado\",label:\"Estado\"}]},{xtype:\"fieldset\",itemId:\"encargado\",title:\"Encargado",589927,40,596845,71,"nombre",601181,43,"telOficina\",label:\"Tel. Oficina\"},{xtype:\"textfield\",name:\"telMovil\",label:\"Tel. M\ufffff\ufffffvil\",required:false}]},{xtype:\"fieldset\",title:\"Productor\"},{xtype:\"fieldset\",itemId:\"cultivos\",defaults:{",596831,51,",hidden:true},items:[{xtype:\"checkboxfield\",name:\"cultivos\",label:\"Cultivos\",hidden:false,itemId:\"cultivos\"}]},{xtype:\"fieldset\",itemId:\"superficie\",defaults:{",596831,47,"70%\",hidden:true},items:[{xtype:\"checkboxfield\",name:\"superficie\",label:\"Superficie\",hidden",597057,37,"mpoAbierto\",label:\"Campo Abierto\",itemId:\"campoAbier",601471,32,"invernadero\",label:\"Invernadero\",itemId:\"invernadero\"},{xtype:\"numberfield\",name:\"macroTunel\",label:\"Macro T\ufffff\ufffffnel\",itemId:\"macroTunel\"},{xtype:\"numberfield\",name:\"total\",label:\"Total\",itemId:\"total",596710,32,"istribuidor\",title:\"Distribuidor\",defaults:{",596831,47,"6",596879,37,"zonaDeInfluencia\",label:\"Zona de influencia\"},{xtype:\"textfield\",name:\"comercializa\",label:\"Comercializa\"},{xtype:\"textfield\",name:\"encargadoCompras\",label:\"Encargado de compras\"},{xtype:\"textfield\",name:\"encargadoPagos\",label:\"Encargado de pagos\"},{xtype:\"textfield\",name:\"responsableTecnico\",label:\"Responsable T\ufffff\ufffffcnico\"}]},{xtype:\"fieldset\",itemId:\"productosUtilizados\",title:\"Productos utilizados\",defaults:{",596831,85,"productos\",label:\"Productos\"}]},{xtype:\"fieldset\",itemId:\"comentarios\",title:\"Comentarios\",defaults:{",596831,72,"areafield\"}]",591774,34,"spectos.Prospe",591820,46,"spe",591868,68,"codig",591161,45,"razonSocial",592060,43,"specto",591264,91,"prospe",592204,211,"spectos\",placeHolder:\" Buscar prospecto...\",flex:12,cls:\"list-search\"},{xtype:\"button\",iconCls:\"add\",itemId:\"agregar\",flex:1}]}]",606955,57,592595,60,"branza.NavigationCobranza",590848,36,"navigationcobranza",607116,138,"ago\"}]},items:[{xtype:\"totalapagar",595132,36,"form.cobranza.MontoAPagar",600877,36,"montoapagarform\",config:{padding:\"0 15 15 15\"",595324,33,"Title\",defaults:{labelWidth:\"40%\",required:true,labelCls:\"labels\",inputCls:\"labels\"},items:[{xtype:\"numberfield\",name:\"monto\",placeHolder:\"Ingrese el monto a pagar\",label:\"Monto\"}]",590131,54,"Pagar\",ui:\"action\",itemId:\"pagar",593103,34,"branza.MontoAPagarForm",595200,33,"requires:[],xtype:\"montoapagarformcontainer\",config:{layout:{type:\"vbox\"},items:[{xtype:\"montoapagarform",600822,34,611483,502,612061,549,612626,285,612926,937,"b){var c=this,d=b",613910,33,"console.log(d.xtype);var a=Ext.getStore(\"Ordenes\");if(a.getData().items.length<=1){c",627648,55,"}else{c",627648,49,"hide()}",628385,32,"||d.isXType(\"clientecontainer\")||d.isXType(\"editarpedidoform\")){b",614221,34,"b",614256,53,"b.getNavigationBar().setTitle(c",614340,531,"a.getActiveItem().opcion!=undefined",614938,46,614985,60,"load",615052,32,";Ext.getStore(\"Facturas\").on(\"load\",a.agregaSaldoAMostrar",615083,697,",{xtype:\"navigationc",608013,34,615805,148,615983,94,"sujetoImpuesto:undefined,totalDeImpuesto:0,codigoMonedaPredeterminada:undefined,codigoMonedaSeleccinada:undefined,tipoCambio:1,aPagar:0,pagado:0,pendiente:0,actionOrden:undefined,config:{control:{",616290,217,616559,625,617234,466,"totalapagarcontainer #cancelar\":{tap:\"cancelaPago\"},\"navigationcobranza #agregarPago\":{tap:\"onAgregarPago\"},navigationcobranza:{pop:\"onPopNavigationCobranza",617696,42,"muestraCobranza\"},formasdepagolist:{itemtap:\"agregaPago\"},\"montoapagarform #pagar\":{tap:\"onPagar",617793,100,",\"prospectoslist #agregar\":{tap:\"onAgregarProspecto\"},\"prospectosform checkboxfield\":{change:\"toggleFieldSetItems\"},\"prospectosform numberfield\":{keyup:\"respondeAKeyUp",617891,110,618096,83,"prospecto",618186,141,618349,339,"f,d,g,c){var e=this,a=Ext.getStore(\"Direcciones\"),b=e.getMain().getActiveItem();a.each(function(k,h,j){k.set(\"Predeterminado\",false)});a.getAt(d).set(\"Predeterminado\",true);if(e.entrega){e.direccionEntrega=c.data.CodigoDireccion}else{e.direccionFiscal=c.data.CodigoDireccion;e.codigoImpuesto=c.data.CodigoImpuesto;e.tasaImpuesto=c.data.Tasa}b",618907,88,"get(\"CodigoMoneda\")",619012,53,"if((h.codigoMonedaSeleccinada!=a)&&(h.codigoMonedaSeleccinada==h.codigoMonedaPredeterminada)){if(h.dameProductoConMonedaPredeterminada()!=\"No hay\"){h.mandaMensaje(\"Error\",\"No es posible cambiar la configuraci\ufffff\ufffffn debido a que la moneda del producto con c\ufffff\ufffffdigo \"+h.dameProductoConMonedaPredeterminada()+\" es \"+h.codigoMonedaPredeterminada+\". Elim\ufffff\ufffffnelo primero de la orden.\")}else{h.obtenerTipoCambio(a,c)}}else{if(a!=h.codigoMonedaSeleccinada){h.codigoMonedaSeleccinada=h.codigoMonedaPredeterminada;h.actualizaOrden(a);b.setValues({CodigoMoneda:h.codigoMonedaSeleccinada,tipoCambio:1});h.estableceMonedaPredeterminada(c)}}j.pop()},estableceMonedaPredeterminada:function(a){var b=Ext.getStore(\"Monedas\");b.each(function(e,c,d){e.set(\"Predeterminada\",false)});a.set(\"Predeterminada\",true)},dameProductoConMonedaPredeterminada:function(){var c=this,b,d=\"No hay\",a=Ext.getStore(\"Ordenes\");for(b=0;b<a.getCount();b++){if(a.getAt(b).get(\"moneda\")==c.codigoMonedaPredeterminada){d=a.getAt(b).get(\"CodigoArticulo\");break}}return d},actualizaOrden:function(c){var e=this,d,b,a=Ext.getStore(\"Ordenes\");switch(c){case\"$\":a.each(function(h,f,g){d",633615,59,"Precio\"))*e.tipoCambio;b",633615,59,"importe\"))*e.tipoCambio;d=",625984,37,"d,c);b=",625984,37,"b,c);h.set(\"Precio\",d);h.set(\"importe\",b);h.set(\"totalDeImpuesto\",h.get(\"totalDeImpuesto\")*e.tipoCambio)});e.actualizarTotales();break;case\"USD\":a.each(function(h,f,g){d",633615,59,"Precio\"))/e.tipoCambio;b",633615,59,"importe\"))/e.tipoCambio;d=",625984,37,"d,c);b=",625984,37,"b,c);h.set(\"Precio\",d);h.set(\"importe\",b);h.set(\"totalDeImpuesto\",h.get(\"totalDeImpuesto\")/e.tipoCambio)});e.actualizarTotales();break}",619102,69,619202,272,"h){if(h==\"yes\"){var g=b.find(\"id\",a.data.id);b.removeAt(g);d.actualizarTotales();if(b.getData().items.length<2){d",627648,55,614061,63,"}})},cambiaItem:function(h,g,d){var f=this,c=f.getNavigationOrden(),b=c",614256,45,";if(g.xtype==\"clientecontainer\"){b.setText(\"Back\").show();b.setUi(\"back\");var e=g",620000,51,"e.setValues(f.clienteSeleccionado)}if(g.xtype==\"editarpedidoform\"){if(f.codigoMonedaSeleccinada==f.codigoMonedaPredeterminada){f.clienteSeleccionado.tipoCambio=1}else{f.clienteSeleccionado.tipoCambio=f.tipoCambio}f.clienteSeleccionado.CodigoMoneda=f.codigoMonedaSeleccinada;g.setValues(f.clienteSeleccionado);b.setText(\"Back\").show();b.setUi(\"back\")}if(g.xtype==\"partidacontainer\"){b.setText(\"Agregar\").show();b.setUi(\"normal\")}",620960,370,615002,39,"clearFilter();a",621518,47,621436,83,"lista(true",621515,150,"agregaProductos:function(d){var b,j,e,g,k,h=this,k=Ext.getStore(\"Ordenes\"),f=Ext.getStore(\"Productos\"),c=h.getMain().getActiveItem(),b=d.up(\"agregarproductosform\"),j=b.getValues(),e=j.NombreArticulo,g=j.cantidad,a=j.moneda;importe=j",621956,40,"g)){h",622001,126,"if(b.modo!=\"edicion\"){if(a!=h.codigoMonedaSeleccinada){if(a==h.codigoMonedaPredeterminada){h.mandaMensaje(\"Imposible agregar\",\"No es posible agregar el producto a la orden debido a que la configuraci\ufffff\ufffffn de moneda actual es \"+h.codigoMonedaSeleccinada+\"  y la moneda del producto es \"+a+\". Cambie primero la configuraci\ufffff\ufffffn de moneda a \"+a+\".\")}else{h.ayudaAAgregar(b,\"cantidad\");h.obtenerTipoCambio(a)}}else{h.ayudaAAgregar(b,\"cantidad\");h.ayudaAAgregar(b,\"monedaIgual\")}}else{h.ayudaAAgregar(b,\"cantidad\");h.ayudaAAgregar(b,\"edicion\")}}},ayudaAAgregar:function(c,h){var c,e,j,s,o,k,n,g,b,l,t=this,o=Ext.getStore(\"Ordenes\"),m=Ext.getStore(\"Productos\"),a=t.getNavigationOrden(),e=c.getValues(),j=e.NombreArticulo,s=e.cantidad,d=e.moneda,f=e.importe,k=e.CodigoArticulo,n=m.find(\"CodigoArticulo\",k),g=m.getAt(n),b=g.get(\"cantidad\");switch(h){case\"monedaIgual\":e.totalDeImpuesto=t.totalDeImpuesto;e.Imagen=g.get(\"Imagen\");o.add(e);a.pop();t.actualizarTotales();break;case\"monedaDiferente\":l",633615,52,"e.Precio)*t.tipoCambio;e.importe=l*s;l=",625984,37,"l,t.codigoMonedaSeleccinada);e.Precio=l;e.importe=",625984,37,"e.importe,t.codigoMonedaSeleccinada);e.totalDeImpuesto=t.totalDeImpuesto*t.tipoCambio;e.Imagen=g.get(\"Imagen\");o.add(e);a.pop();t.actualizarTotales();break;case\"edicion\":var p=c.ind,r=o.getAt(p),q,d=e.moneda;if(d!=t.codigoMonedaSeleccinada){l",633615,52,"e.Precio)*t.tipoCambio;f=l*s;l=",625984,37,"l,t.codigoMonedaSeleccinada);f=",625984,37,"f,t.codigoMonedaSeleccinada);q=t.totalDeImpuesto*t.tipoCambio;r.set(\"Precio\",l);r.set(\"cantidad\",s);r.set(\"importe\",f);r.set(\"totalDeImpuesto\",q);a.pop();t.actualizarTotales()}else{r.set(\"cantidad\",s);r.set(\"importe\",f);r.set(\"totalDeImpuesto\",t.totalDeImpuesto);a.pop();t.actualizarTotales()}break;case\"cantidad\":var k=e.CodigoArticulo,n=m.find(\"CodigoArticulo\",k),g=m.getAt(n),b=g.get(\"cantidad\");g.set(\"cantidad\",b+s);break}",622428,102,622592,45,"clearFilter(",618293,33,622643,655,623596,176,"f,d,h,b){var e=this,a=e.getMenu(),c=b.get(\"NombreSocio\"),g",632672,49,"e.idCliente=b.get(\"CodigoSocio\");e.titulo=c;g.title=e.titulo;e.opcion=f.opcion;switch(e.opcion){case\"venta\":a",623970,39,"e.idCliente",632718,39,614659,41,"Socio",635094,84,588544,98,625593,37,"Criterio:e.idCliente",625738,42,"j){var k=j.Procesada;e.clienteSeleccionado=j.Data[0];if(k){e.estableceDirecciones(a,g)",613477,40,"j.Descripcion,Ext.emptyFn)}}});break;case\"cobranza\":a.push({xtype:\"cobranzalist\",title:e.idCliente});a.add(g",624672,34,"estableceDirecciones:function(b,d){var c=this",620020,32,"onsole.log(c.clienteSeleccionado);a.setData(c.clienteSeleccionado",624138,79,"b.add(d);c",624227,49,"c",624277,47,"c",624325,37,"getAt(0).set(\"Predeterminado\",true)",624359,66,"c",624426,49,";a.getAt(0).set(\"Predeterminado\",true)}}else{c",624483,108,"b.pop();a.removeAll()}},onAgregarProducto:function(d,b,h,a,g){var c=this,f=a.data",632720,37,"\"+c.dirIP+\"",637923,33,"Articulo",635094,84,588544,98,625593,37,"CardCode:c.idCliente,Criterio:f.CodigoArticulo",625738,42,"e){var j=e.Procesada;if(j){c.llenaAgregarProductos(e.data)",613477,40,"e.Descripcion,Ext.emptyFn)}}})},llenaAgregarProductos:function(d){var m=this,n=m.getMain().getActiveItem(),g=m.almacenes,f,c,k,e,h,l,b,j,a=d.ListaPrecios[0].CodigoMoneda;if(n",626478,55,"n",624950,35,",modo:\"agregar\"});Ext.Array.forEach(g,function(q,o){var p=q.Predeterminado;if(p){d.NombreAlmacen=q.NombreAlmacen;m.CodigoAlmacen=q.CodigoAlmacen}});c=n.getActiveItem();c.setValues(d);f=",625984,37,"d.ListaPrecios[0].Precio,a),k=1",632720,37,"\"+m.dirIP+\"",635050,34,625397,268,"m",625666,62,"k",625738,42,"p){var q=p.Procesada,o",633615,52,"f),r=o-p.Data[0];r=r*100/o;if(q){l=p.Data[0];m.sujetoImpuesto=d.SujetoImpuesto;if(m.sujetoImpuesto){b=l*m.tasaImpuesto/100;m.totalDeImpuesto=b}else{m.totalDeImpuesto=0}j=l*k;c.setValues({Precio:f,cantidad:k,moneda:a,descuento:r+\"%\"",626087,46,"j,a",626138,58,"l,a)})",613477,40,"p.Descripcion,Ext.emptyFn)}}})},editarPartida",623762,38,"ain().getActiveItem(),b,k,m,l=d.data,a=d.data.id,n=Ext.getStore(\"Ordenes\"),c=n.find(\"id\",a);console.log(d,\"editarPartida\");if(j",626478,55,"j",624950,35,",modo:\"edicion\",ind:c});b=j.getActiveItem();k=b.down(\"fieldset\");k.setTitle(\"Editar producto\");k",626644,40,"j",614256,46,"hide();console.log(l.moneda);console.log(h.codigoMonedaSeleccinada);if(l.moneda!=h.codigoMonedaSeleccinada){console.log(\"poniendo valores\");m=h.ponValoresOriginalesAAgregarProductoForm(l,l.moneda);console.log(m);b.setValues(m);b.setValues({importe:m.importe})}else{b.setValues(l)}},ponValoresOriginalesAAgregarProductoForm:function(a,d){var f=this,e,c,b,g;b={Precio:a.Precio,importe:a.importe,totalDeImpuesto:a.totalDeImpuesto,CodigoArticulo:a.CodigoArticulo,CodigoSocio:a.CodigoSocio,Disponible:a.Disponible,Imagen:a.Imagen,NombreAlmacen:a.NombreAlmacen,NombreArticulo:a.NombreArticulo,cantidad:a.cantidad,descuento:a.descuento,id:a.id,moneda:a.moneda,precioConDescuento:a.precioConDescuento};if(d!=f.codigoMonedaSeleccinada){if(d==\"USD\"&&f.codigoMonedaSeleccinada==\"$\"){e",633615,52,"a.Precio)/f.tipoCambio;c",633615,52,"a.importe)/f.tipoCambio;g=a.totalDeImpuesto;b.Precio=",625984,37,"e,d);b.importe=",625984,37,"c,d);b.totalDeImpuesto=g/f.tipoCambio}}return b},actualizaCantidad:function(h,g,b){var e=this,a=e.getMain().getActiveItem(),f=a.getActiveItem().getValues(),d",633615,52,"f.precioConDescuento)*g,c=d;if(e.sujetoImpuesto){totaldeimpuesto=d*e.tasaImpuesto/100;e.totalDeImpuesto=totaldeimpuesto}a",627019,73,"c,f.moneda",627157,180,623772,36,"h.getMain(),l=d.get(\"action\"),m",632672,38,"h.titulo});switch(l){case\"orden\":h.actionOrden=\"crear\";b.setActiveItem(2);h",627505,50,"h.idCliente);b",627569,56,"h",627648,56,"var a=Ext.getStore(\"Monedas\");a.load({callback:function(o,n){Ext.Array.each(o,function(q,p,s){var r=q.get(\"Predeterminada\");if(r){h.codigoMonedaPredeterminada=q.get(\"CodigoMoneda\");h.codigoMonedaSeleccinada=h.codigoMonedaPredeterminada}h.actualizarTotales()})}});b.getActiveItem().add(m);break;case\"visualizar\":h.actionOrden=\"actualizar\";var k=Ext.getStore(\"Transacciones\"),c={CardCode:h.idCliente};k.setParams(c);k.load();j.push({xtype:\"transaccionlist\",title:h.idCliente});break}",627887,383,"c",628877,43,"e=d",628317,35,",b=Ext.getStore(\"Productos\");",614124,32,"){var f={CardCode:d.idCliente,page:1};b.setParams(f",628472,35,"b.clearFilter();b",628512,142,"){var c=Ext.getStore(\"Ordenes\"),f,e,b,d;if(c.getCount()>0){c",628714,50,"j.get(\"cantidad\");e=a.find(\"CodigoArticulo\",f);if(e!=-1){b=a.getAt(e).get(\"cantidad\");a.getAt(e).set(\"cantidad\",b+d)}",628839,426,"confirmaTerminarOrden:function(e,c,a,b){var d=this;console.log(d.getMain().getActiveItem(0))",629371,81,"f){if(f==\"yes\"){d.onTerminarOrden(",631485,44,629530,36,"e=this,d=0,a=Ext.getStore(\"Ordenes\"),h=a.getData().items,b,g;if(h.length>0){var c",629643,49,"00;var f={",588477,165,629865,58,"c,\"Orden.CodigoSocio\":e.idCliente,\"Orden.NombreSocio\":e.titl",629957,95,",\"Orden.CodigoImpuesto\":e.codigoImpuesto};console.log(f",613247,38,"c);Ext.Array.forEach(h,function(l,j,k){console.log(l,\"terminarr....\");d+=(",633616,51,"l.get(\"precioConDescuento\"))*l.get(\"cantidad\"))+l.get(\"totalDeImpuesto\");f[\"Orden.Partidas[\"+j+\"].CodigoArticulo\"]=l.get(\"CodigoArticulo\");f[\"Orden.Partidas[\"+j+\"].Cantidad\"]=l.get(\"cantidad\");f[\"Orden.Partidas[\"+j+\"].Precio",630720,54,"l.get(\"Precio\"));f[\"Orden.Partidas[\"+j+\"].CodigoAlmacen\"]=e.CodigoAlmacen;f[\"Orden.Partidas[\"+j+\"].Linea\"]=j;f[\"Orden.Partidas[\"+j+\"].Moneda\"]=l.get(\"moneda\");f[\"Orden.Partidas[\"+j",630709,65,"l.get(\"precioConDescuento\"))*l.get(\"cantidad\")});f",630824,36,"d).toFixed(2);if(e.actionOrden==\"crear\"){b=",614651,36,"OrdenVenta/AgregarOrdenMobile\";g=",631118,46,"}else{b=\"http://\"+e.dirIP+\"iMobile/COK1_CL_OrdenVenta/ActualizarOrdenVentaiMobile\";g=\"Se acualiz",631127,37,"}Ext.data.JsonP.request({url:b,params:f",625739,41,"j){if(j.Procesada){e.getMain().setActiveItem(1);",631086,32,"g+j",631166,37,"e.getNavigationOrden().remove(e",631234,44,"e.getMenu().remove(e",631298,33,"e",631332,110,": \"+j.Descripcion);e",631446,46,"e",629494,36,631529,64,632610,34,"k,b,c,a,d,f){var g=this,h=g.getMenu(),j=Ext.getStore(\"Ordenes",627400,52,632710,47,"\"+g.dirIP+\"",641271,45,635094,84,588544,98,625593,37,"Criterio:a.get(\"FolioUID\")",625738,42,"e){var e=e.Data[0],l=e.Partidas;g.codigoMonedaSeleccinada=e.CodigoMoneda;if(l.length<2){",627647,56,"}else{console.log(",627647,36,627645,52,"hide()}l.forEach(function(n,m){l[m].cantidad=l[m].Cantidad;l[m].importe=l[m].Importe;l[m].totalDeImpuesto=l[m].TotalImpuesto});j.setData(l);g.getMain().setActiveItem(2);g",633122,55,"g.idCliente);g",633191,66,"g.actualizarTotales();barraTitulo.title=g.titulo;g.getMain().getActiveItem().add(barraTitulo",633386,71,",f=0,a=0,d=0,c=0;b.each(function(g){console.log(g);f",633614,53,"g.get(\"Precio\"))*g.get(\"cantidad\");c+=g.get(\"totalDeImpuesto\"",633855,124,"e.codigoMonedaSeleccinada+\"0.00</div>\"",633856,32,634063,127,"parseFloat(f),e.codigoMonedaSeleccinada)+\"</div>\"",633856,32,634237,122,"parseFloat(c),e.codigoMonedaSeleccinada)+\"</div>\"",633856,32,"total",634240,119,"parseFloat(f+c),e.codigoMonedaSeleccinada)+\"</div>\"})",634547,428,"g.almacenes[c].CodigoAlmacen",632720,37,"\"+g.dirIP+\"",635050,313,"parseFloat(e.Data[0]).toFixed(2)",635372,94,",obtenerTipoCambio:function(c,b){var e=this,d=e.getOpcionesOrden().down(\"editarpedidoform\"),a=e.getNavigationOrden().getActiveItem(",632719,38,"\"+e.dirIP+\"",641271,35,"TipoCambio",635101,107,625594,36,"Criterio:c",625738,42,"f){if(f.Procesada){e.tipoCambio=f.Data[0];if(a",629133,34,"e.ayudaAAgregar(a,\"monedaDiferente\")}else{e.codigoMonedaSeleccinada=c;d.setValues({CodigoMoneda:c,tipoCambio:f.Data[0]});e.estableceMonedaPredeterminada(b);e.actualizaOrden(c)}}else{var g=f.Descripcion;console.log(g);e.mandaMensaje(\"Error\",g)}}})",631591,43,"c=this,a=c.getMenu(),b=Ext.getStore(\"Facturas\"",631653,35,",title:c.idCliente});params={CardCode:c.idCliente};b.setParams(params);b.load()},agregaSaldoAMostrar:function(d){var c=this,a,b;d.each(function(g,e,f){a=g.get(\"CodigoMoneda\");b=",625984,37,"g.get(\"Saldo\"),a);g.set(\"saldoAMostrar\",b);console.log(g.get(\"Saldo\"))})},aplicaPago:function(){view.push({xtype:\"formasdepagolist\",title:me.idCliente})},cancelaPago:function(e){var f=this,a=f.getMain(),d=a.getActiveItem(),b=d.down(\"toolbar\"),c=Ext.getStore(\"Totales\"),g=Ext.getStore(\"Facturas\");d.remove(b,true);c.removeAll();f.pagado=0;g.clearFilter();a.setActiveItem(1)},onAgregarPago",628260,53,";a.push({xtype:\"formasdepagolist\",title:c.idCliente",619229,39,"ago\").hide()},onPopNavigationCobranza:function(c){var d=this,b=c.getNavigationBar(),a=c.getActiveItem();if(a.isXType(\"totalapagarcontainer\")){b.down(\"#agregarPago\").show()}b.setTitle(d.idCliente)},agregaPago",618678,32,"e.up(\"navigationcobranza\");console.log(b.data.TipoFormaPago);a.push({xtype:\"montoapagarform\",title:d.idCliente,datos:b.data});switch(b.data.TipoFormaPago){case\"0\":a.down(\"fieldset\").add([{xtype:\"numberfield\",name:\"numeroCheque\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de cheque\",label:\"No. Cheque\"},{xtype:\"numberfield\",name:\"numeroCuenta\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de cuenta\",label:\"No. Cuenta\"},{xtype:\"textfield\",name:\"banco\",placeHolder:\"Ingrese el nombre del banco\",label:\"Banco\"}]);break;case\"2\":a.down(\"fieldset\").add([{xtype:\"numberfield\",name:\"numeroAutorizacion\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de autorizaci\ufffff\ufffffn\",label:\"No. Autorizaci\ufffff\ufffffn\"},{xtype:\"numberfield\",name:\"numeroCuenta\",placeHolder:\"Ingrese el n\ufffff\ufffffmero de cuenta\",label:\"No. Cuenta\"}]);break}a.down(\"fieldset\").setTitle(b.data.Nombre)},onPagar:function(c){var e=this,f=c.up(\"navigationcobranza\"),b=f.down(\"montoapagarform\"),a,d=e.aPagar-e.pagado,k=b.datos.Nombre,l=b.getValues().monto,j=b.datos.Codigo,g=b.datos.tipoFormaPago,h=b.datos.PermiteCambio;a=Ext.getStore(\"Facturas\").getAt(0).CodigoMoneda;if(Ext.isEmpty(l)){e.mandaMensaje(\"Sin cantidad\",\"Ingrese la cantidad a pagar.\")}else{if(h===\"false\"){console.log(\"no se permite dar cambio\");if(l>d){e.mandaMensaje(\"Sin cambio\",\"Esta forma de pago no permite dar cambio, disminuya la cantidad.\")}else{e.sumaCobros(k,l,a,j,g);f.pop(2)}}else{console.log(\"si se permite dar cambio\");e.sumaCobros(k,l,a,j,g);f.pop(2)}}},muestraCobranza:function(){var f=this,h=f.getMain(),e,d,g=0,c=h",631748,52,",a=c[0].data.CodigoMoneda,b=Ext.getStore(\"Facturas\"),j",632672,38,"f.titulo});for(d=0;d<c.length;d++){g+=c[d].data.Saldo;c[d].data.aPagar=true}b.clearFilter();b.filter(\"aPagar\",true);f.aPagar=g;h.setActiveItem(3);e=h.getActiveItem();e.getNavigationBar().setTitle(f.idCliente);e.add(j);f",632372,64,625984,37,"f.aPagar,a)});f",632448,63,625984,37,"f.pagado,a)});f",632523,66,625984,37,"f.aPagar-f.pagado,a)})},sumaCobros:function(f,h,a,g,c){var d=this,j,b=",625984,37,"h,a),e=Ext.getStore(\"Totales\");e.add({tipo:f,monto:b,codigoFormaPago:g,tipoFormaPago:c});j",633615,52,"e.getAt(e.getCount()-1).get(\"monto\"));d.pagado+=parseFloat(j",632445,66,625984,37,"d.pagado,a)",632272,70,625984,37,"d.aPagar-d.pagado,a)})},onTerminarCobranza:function(){var f=this,g=0,h=Ext.getStore(\"Facturas\"),k=Ext.getStore(\"Totales\"),e=h.getData().items,j=new Date(now),b,c;if(k.getCount()>0){var a",629643,49,"00;var d={",588477,165,629865,38,"Cobranza.Fecha\":j,\"Cobranza.CodigoVendedor\"",632848,39,"\"Cobranza.Tipo\":\"C\",\"Cobranza.CodigoCliente\":f.idCliente};console.log(d);Ext.Array.forEach(e,function(n,l,m){console.log(n,\"terminarr....\");d[\"CobranzaFacturas[\"+l+\"].NumeroFactura\"]=n.get(\"NumeroDocumento\");d[\"CobranzaFacturas[\"+l+\"].Monto\"]=n.get(\"Saldo\")});k.each(function(m,l){d[\"oCobranzaDetalles[\"+l+\"].NumeroLinea\"]=l;d[\"oCobranzaDetalles[\"+l+\"].CodigoFormaPago\"]=m.CodigoFormaPago;d[\"oCobranzaDetalles[\"+l+\"].MontoNeto",630720,54,"m.monto);d[\"oCobranzaDetalles[\"+l+\"].NoFacturaAplicada\"]=\"Sin n\ufffff\ufffffmero\";switch(m.tipoFormaPago){case 0:d[\"oCobranzaDetalles[\"+l+\"].NumeroCheque\"]=\"Sin n\ufffff\ufffffmero\";d[\"oCobranzaDetalles[\"+l+\"].NumeroCuenta\"]=\"9999\";d[\"oCobranzaDetalles[\"+l+\"].Banco\"]=\"Maya\";d[\"oCobranzaDetalles[\"+l+\"].Fecha\"]=j;break;case 1:break;case 2:d[\"oCobranzaDetalles[\"+l+\"].NumeroAutorizacion\"]=\"Sin n\ufffff\ufffffmero\";d[\"oCobranzaDetalles[\"+l+\"].NumeroCuenta\"]=\"9999\";break}});Ext.data.JsonP.request({url:b,params:d",625739,41,"l){if(l.Procesada){f.getMain().setActiveItem(1);",631086,32,"c+l.CodigoUnicoDocumento);h.clearData();f.getNavigationOrden().remove(f",631234,44,"f.getMenu().remove(f",631298,33,"f",631332,110,": \"+l.Descripcion);f",631446,46,"f",629494,36,";Ext.Msg.alert(\"Sin pago\",\"Agrega por lo menos un pago.\")}},onAgregarProspecto",628260,32,"enu();a.push({xtype:\"prospectosform\"})},toggleFieldSetItems:function(a,e){var b=a.up(\"fieldset\").getItems().items,c,d=undefined;Ext.each(b,function(g,f){if(!e&&f!=0){g.disable();g.hide()}else{g.enable();g.show();if(g.isXType(\"numberfield\")){d=d||f;if(d===f){c=g;setTimeout(function(){c.focus()},200)}}}})},respondeAKeyUp:function(e){var f=e.getParent(),b=f.getItemId();console.log(b);switch(b){case\"superficie\":var c=f.getItems().items,d,a=0;for(d=1;d<c.length-1;d++){a+=c[d].getValue()}f.down(\"#total\").setValue(a).setDisabled(true);break",615181,33,635497,690,636243,1198,"string",638416,106,"string",638528,71,",convert",589594,32,").toFixed(2)}",637630,145,",{name:\"Imagen\",type:\"string\",mapping:\"Imagen\",convert:function(a){return\"http://25.15.241.121:88\"+a}",636831,32,637806,101,"ferman.no-ip.org",637920,165,638086,261,"string",637384,169,"string",638528,72,",{name:\"Imagen",636816,47,638631,67,638699,491,639191,68,",{name:\"Predeterminado\",type:\"boolean",636830,33,639290,373,",{name:\"Predeterminada\",type:\"boolean",636830,33,639694,97,"ferman.no-ip.org",639804,246,"Folio\",type:\"int\"},{name:\"Saldo\",type:\"float\",convert:function(a){var b=Ext.Number.toFixed(a,2);return Ext.Number.from(b,1)}},{name:\"FechaCreacion\",type:\"string\",convert:function(a){return Ext.Date.format(new Date(a),\"d-m-Y\")}},{name:\"FechaFin\",type:\"string\",convert:function(a){return Ext.Date.format(new Date(a),\"d-m-Y\")}",636795,37,",{name:\"saldoAMostrar\",type:\"string\"},{name:\"aPagar\",type:\"boolean",636830,33,"Factura",641159,64,"Factura",637886,54,"Consultas/ObtenerFacturasAbiert",639851,87,"}",640629,155,",{name:\"codigoFormaPago",636816,47,640815,205,636399,35,641057,59,",{name:\"FolioUID",636816,47,641147,108,"ferman.no-ip.org",641268,177,"define(\"Imobile.model.Prospe",637168,74,"fecha\",type:\"string\"},{name:\"codigo\",type:\"string\"},{name:\"razonSocial\",type:\"string\"},{name:\"tipoPersona\",type:\"string\"},{name:\"rfc\",type:\"string\"},{name:\"d",636655,33,"encargado\",type:\"object\"},{name:\"productor\",type:\"object\"},{name:\"productosUtilizados\",type:\"object\"},{name:\"comentarios",636816,47,"Prospecto",638637,55,"Prospecto",639477,45,"FormaDePago",640937,48,"id\",type:\"int\"},{name:\"Codi",636737,32,"\",type:\"string\"},{name:\"PermiteCambio\",type:\"string\"},{name:\"TipoFormaPago\",type:\"string\"},{name:\"UIDTransaccion",641064,47,589803,33,"store.FormasDePago",641160,63,"FormaDePago\",autoLoad:true",637887,53,"Catalogos/ObtenerFormasPago",639853,85,641436,183,",\"Prospectos\",\"FormasDePago",641618,765]