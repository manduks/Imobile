["function _193e442241f87317925e2b2746487b09fe1f74c9",50,289262,"abel",437391,32,"abel",309664,37,"label\"",289291,298916,"core.data.Store",621184,33,"autoLoad:false,listeners:{beforeload:function(b,a,c){b.getProxy().setExtraParams({Token:localStorage.getItem(\"Token\"),CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\")})}}",588183,333,"textfield\",name:\"usuario\",placeHolder:\"Codigo de Usuario\",value:\"1",588588,55,"Contrase\ufffff\ufffffa\",value:\"12345",588668,6825,"itemId:\"cantidad\"},{xtype:\"numberfield\",name:\"P",595549,1009,"P",596559,201,"float: left;\"><div id=\"cliente_id\" style=\"margin-left: 34px;\"></div><div id=\"codigo_id\"></div>",596826,186,"vbox\",xtype:\"container\",docked:\"bottom\",items:{layout:\"hbox\"",597044,50,".2,height:50,itemId:\"descuento\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}",597094,43,",itemId:\"subtotal\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}",597137,38,",itemId:\"tax\",style:{background:\"#696969\",color:\"white\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Total\",flex:1,itemId:\"total\",style:{background:\"#A9A9A9\",color:\"black\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}}]}",600253,36,"Partida",602366,52,597312,87,"fit\"",597417,58,"7",597476,471,"T",597948,54,"Correo",598006,43,"ListaP",599940,59,"Limite",598118,54,"S",598173,1587,"LimiteCredito",599766,126,"S",599893,46,"ListaP",599940,1323,"tpl if=\"cantidad &gt; 0\">','<div class= \"ovalo\">{cantidad}</div>',\"</tpl>\"",601260,61,601369,2936,"cobranza.Cobranza",596032,39,"cobranza",598293,112,"Cobranza de facturas\",action:\"cobranzaFacturas\"},{title:\"Anticipo de pedido\",action:\"anticipo\"},{title:\"Visualizar cobranzas\",action:\"visualizarCobranza",591472,34,"branza.Factur",603952,34,"xtype:\"facturaslist\",requires:[],config:{itemTpl:['<div class=\"factura\">','<div> <p>N\ufffff\ufffffmero: <b>{id}</b> Saldo: <b>{saldo}</b></div> ",604131,83,"','<div style=\"font-size: 90%\"> <div><p>Fecha: <b>{fecha}</b> Vencimiento: <b>{vencimiento}</b> </div>',\"</div>\"].join(\"\"),store:\"Factur",604244,32,",mode:\"MULTI",596735,70,"facturas pendientes",596826,102,"cobranza.Facturas",602366,52,"facturas",602192,80,"vbox\",items:[{xtype:\"facturaslist\",flex:5},{xtype:\"button\",text:\"Aplicar pago\",ui:\"confirm\",itemId:\"aplicarPago\",margin:10",590991,33,"branza.FormasDePago",596032,39,"formasdepago",598293,112,"Efectivo\",action:\"efectivo\"},{title:\"Tarjeta de Cr\ufffff\ufffffdito\",action:\"credito\"},{title:\"Tarjeta de Regalo\",action:\"regalo",591472,34,"branza.TotalAPagar",596032,32,"requires:[],xtype:\"totalapagarlist\",config:{itemCls:\"factura\",itemTpl:\"{tipo}: <b>{monto}</b>\",store:\"Total",601816,32,"cobranza.Totales",602366,33,"xtype:\"totales",596985,33,597045,32,"A cobrar\",flex:1,itemId:\"aCobrar\",style:{background:\"black\",color:\"yellow\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\",\"vertical-align\":\"middle\"}},{xtype:\"container\",html:\"Pagado\",flex:1,itemId:\"pagado\",style:{background:\"black\",color:\"green\",\"margin-right\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}},{xtype:\"container\",html:\"Pendiente\",flex:1,itemId:\"pendiente\",style:{background:\"black\",color:\"red\",\"margin-righ\":\"1px\",\"text-align\":\"center\",\"font-weight\":\"bold\"}",590991,33,"branza.TotalAPagar",602366,52,"totalapagar",602192,80,"vbox\"",597417,42,"totalapagarlist\",flex:5},{xtype:\"totalescontainer\",flex:1},{xtype:\"button\",text:\"Terminar\",ui:\"confirm\",margin:10",597215,38,"Transaccio",596031,40,"transaccion",589625,45,"useSimpleItems:true,itemTpl:\"Folio: {Folio} <br> Tipo de transacci\ufffff\ufffffn: {TipoTransaccion} <br> Cliente: {CodigoCliente} - {NombreCliente}\",store:\"Transacciones\"",590795,46,"fit",590845,66,"transaccion...\"}]}]",603568,88,604305,205,"CodigoUsuario:undefined,CodigoSociedad:undefined,CodigoDispositivo:undefined,Contrasenia:undefined,Token:undefined,direccionEntrega:undefined,direccionFiscal:undefined,dirIP:\"25.15.241.121:88\"",604509,286,",totales:\"totalescontainer\",listaFacturas:\"facturaslist\",ordenContainer:\"ordencontainer\",partidaContainer:\"partidacontainer",604794,194,",back:\"onBack\"},menu:{back:\"onBackMenu\"}}},onLoginUser:function(c){var b=this,a=c.getValues();Ext.data.JsonP.request({url:\"http://\"+b.dirIP+\"",621283,39,"params:{CodigoUsuario:a.usuario,CodigoSociedad:\"001\",CodigoDispositivo:\"004\",Contrasenia:a.password},callbackKey:\"callback\",success:function(d){console.log(d);var e=d.Procesada;if(e){localStorage.setItem(\"Token\",d.Token);localStorage.setItem(\"CodigoUsuario\",d.Usuario.Codigo);localStorage.setItem(\"CodigoSociedad\",\"001\");localStorage.setItem(\"CodigoDispositivo\",\"004\");localStorage.setItem(\"Contrasenia\",d.Usuario.Contrasenia",613085,36,"Ext.Msg.alert(\"Datos Incorrectos\",d.Descripcion,Ext.emptyFn)}}}",605045,301,"onBack",610527,32,"ain().getActiveItem(),d=b",613451,32,";c.getPartidaContainer().down(\"list\").emptyTextCmp.show();if(d.isXType(\"partidacontainer\")||d.isXType(\"clientecontainer\")||d.isXType(\"editarpedidoform\")){b.getActiveItem().setActiveItem(0",613312,49,"show()}},onBackMenu:function(){var b=this,a=Ext.getStore(\"Clientes\"),c={CodigoUsuario:b.CodigoUsuario,CodigoSociedad:b.CodigoSociedad,CodigoDispositivo:b.CodigoDispositivo,Token:b.Token};a.getProxy().setUrl(\"http://\"+b.dirIP+\"/iMobile/COK1_CL_Socio/ObtenerListaSociosiMobile\");a.setParams(c);a.load()",606061,35,605399,817,"opcion:undefined,aPagar:0,pagado:0,pendiente:0,partida",606205,372,"agregarproductosform #cantidad\":{change:\"actualizaCantidad",606616,138,"Cliente",606759,625,"clientecontainer #guardar\":{tap:\"guardaDatosDeCliente",607380,142,",cobranzalist:{itemtap:\"muestraFacturasPendientes\"},\"facturascontainer #aplicarPago\":{tap:\"aplicaPago\"},formasdepagolist:{itemtap:\"muestraCobranza\"},transaccionlist:{itemtap:\"onSeleccionarTransaccion\"}}},onSelectMenu:function(b,c,f,a,d){var e=this,b=e.getMenu();e.opcion=a.get(\"action\");switch(e.opcion",607609,77,"e",607687,123,"e",607811,37,"case\"cobranza\":b.push({xtype:\"clienteslist\",opcion:e.opcion});Ext.getStore(\"Clientes\").load(",607944,42,"e",607987,329,613406,44,"d.entrega){d.direccionEntrega=b.data.Colonia;d",608350,81,"d.direccionFiscal=b.data.Ciudad;d",608448,68,"a.pop()},seleccionaMoneda:function(e,c,f,b",613404,43,"moneda=b.data.NombreMoneda,tabOpciones=d.getOpcionesOrden(),form=tabOpciones.down(\"editarpedidoform\");form.setValues({NombreMoneda:moneda});a.pop(",608662,96,"b.CodigoUsuario,b.CodigoSociedad,b.CodigoDispositivo,\"\",b.Token",608796,356,";d.actualizarTotales()}})},cambiaItem:function(h,f,d",609690,45,"b",612496,45,";if(f.xtype==\"clientecontainer\"){a.setText(\"Back\").show();a.setUi(\"back\");var c=Ext.getStore(\"Clientes\"),g={CodigoUsuario:e.CodigoUsuario,CodigoSociedad:e.CodigoSociedad,CodigoDispositivo:e.CodigoDispositivo,Criterio:e.idCliente,Token:e.Token};c.getProxy().setUrl(\"http://\"+e.dirIP+\"/iMobile/COK1_CL_Socio/ObtenerSocioiMobile\");c.setParams(g);c.load({callback:function(k,l){var m=f.down(\"clienteform\"),j=Ext.getStore(\"Direcciones\");m.setValues(k[0].data);j.setData(k[0].data.Direcciones);j.clearFilter();j.filter(\"TipoDireccion\",\"B\");e.direccionEntrega=j.getAt(0).data.Calle;j.clearFilter();j.filter(\"TipoDireccion\",\"S\");e.direccionFiscal=j.getAt(0).data.Calle}})}if(f.xtype==\"editarpedidoform\"){f.setValues(e.traeCliente());a.setText(\"Back\").show();a.setUi(\"back\")}if(f.xtype==\"partidacontainer\"){a.setText(\"Agregar\").show();a.setUi(\"normal\"",609526,581,610140,88,"){var b",610240,34,"b",610141,47,610342,46,"e,c,d){e.set(\"color\",b.dameColorAleatorio());console.log(e.get(\"cantidad\"",610430,88,610605,34,"o,e,k,p,l=this,p=Ext.getStore(\"Ordenes\"),g=Ext.getStore(\"Productos\"),b=l.getMain().getActiveItem(),a=c.up(\"agregarproductosform\"),o=a.getValues(),e=o.NombreArticulo,k=o.cantidad,j=o.importe",610792,32,"k)){l",610829,130,"n=o.CodigoArticulo,d=p.find(\"CodigoArticulo\",n),f=g.find(\"CodigoArticulo\",n),h=g.getAt(f);h.set(\"cantidad\",k);if(d==-1){p.add(o);console.log(\"La del producto es: \"+h.get(\"cantidad\"))}else{var m=p.getAt(d);m.set(\"cantidad\",k);m.set(\"NombreArticulo\",e);m.set(\"importe\",j)}b.pop()}l.actualizarTotales()",611156,423,611610,37,611678,67,611760,86,"DesplegarEnPanel\",c)",611952,78,"g,d,h,b,e){var f=this,a=f.getMenu(),c=b",612069,32,"b.get(\"CodigoSocio\");f.titulo=f.idCliente+\" \"+c;switch(g.opcion){case\"venta\":a",612150,50,"break;case\"cobranza\":a.push({xtype:\"cobranzalist\",title:f.titulo});break}",612200,53,"e,c,h,b",613404,42,",g=b.data,f",612334,71,"a.getActiveItem().setValues({precioConDescuento:g.Precio-g.descuento,cantidad:1});f=a.getActiveItem().getValues();a.getActiveItem().setValues({importe:f.precioConDescuento*f.cantidad});if(g.cantidad>0",612430,121,"actualizaCantidad:function(f,e,b){var c=this,a=c.getMain().getActiveItem(),d=a.getActiveItem().getValues();a.getActiveItem().setValues({importe:d.precioConDescuento*e})},guardaDatosDeCliente:function(a){var b=this;b.mandaMensaje(\"C\ufffff\ufffffdigos de direcci\ufffff\ufffffn\",\"Entrega: \"+b.direccionEntrega+\"\\nFiscal: \"+b.direccionFiscal)},onOpcionesCliente:function(n,f,g,d,h){var j=this,k=j.getMenu(),m=d.get(\"action\");switch(m){case\"orden\":j.getMain().setActiveItem(2);j",612682,55,"j.titulo);j",612748,66,"j.actualizarTotales();j.getPartidaContainer().down(\"list\").emptyTextCmp.show();var c=j.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#cliente_id\"),a=j.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#codigo_id\");console.log(c);c.setText(\"Transacci\ufffff\ufffffn: Orden de Venta\");a.setText(\"Codigo de Dispositivo: \"+j.CodigoUsuario);a.setText(\"Nombre de Dispositivo:: \"+j.CodigoUsuario);break;case\"visualizar\":var l=Ext.getStore(\"Transacciones\");var b={CodigoUsuario:j.CodigoUsuario,CodigoSociedad:j.CodigoSociedad,CodigoDispositivo:j.CodigoDispositivo,Token:j.Token,CardCode:\"C00001\"};l.setParams(b);l.load();k.push({xtype:\"transaccionlist\"}",612812,358,"b",613404,42,",c=b.up(\"navigationorden\"),e=",613450,33,";console.log(e.xtype);d.ponParametros(\"Productos\",d.CodigoUsuario,d.CodigoSociedad,d.CodigoDispositivo,\"\",d.Token);if(e",613483,32,613283,85,"else{c.getActiveItem().setActiveItem(0)}",613367,35,613404,42,",e=",613450,33,";if(e.isXType(\"clientecontainer\")||e.isXType(\"editarpedidoform\")){",612495,47,"show()}if(e.isXType(\"partidacontainer\")&&b.isXType(\"agregarproductosform\")){",612495,47,613560,103,"g,c){var b=Ext.getStore(d);params",613691,67,"g,Token:c,Elementos:10};b.setParams(params",613782,43,"c=this,b=0,a=Ext.getStore(\"Ordenes\"),e=a.getData().items,d={CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),\"Orden.FolioInterno\":100,\"Orden.CodigoCliente\":\"C00001\",\"Orden.FechaCreacion\":\"2014-06-04\",\"Orden.FechaEntrega\":\"2014-06-04\",\"Orden.CodigoMoneda\":\"$\"};Ext.Array.forEach(e,function(h,f,g){b+=h.get(\"precioConDescuento\");d[\"Orden.Partidas[\"+f+\"].CodigoArticulo\"]=h.get(\"CodigoArticulo\");d[\"Orden.Partidas[\"+f+\"].Cantidad\"]=h.get(\"cantidad\");d[\"Orden.Partidas[\"+f+\"].Precio\"]=h.get(\"Precio\");d[\"Orden.Partidas[\"+f+\"].CodigoAlmacen\"]=\"01\";d[\"Orden.Partidas[\"+f+\"].Linea\"]=f;d[\"Orden.Partidas[\"+f+\"].Moneda\"]=h.get(\"moneda\");d[\"Orden.Partidas[\"+f+\"].Importe\"]=h.get(\"importe\")});d[\"Orden.TotalDocumento\"]=parseFloat(b).toFixed(2);console.log(d);Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_OrdenVenta/AgregarOrdenMobile\",params:d,callbackKey:\"callback\",success:function(f){console.log(f);c.getMain().setActiveItem(1);a.clearData();if(f.Procesada){Ext.Msg.alert(\"Orden Procesada\",\"Se proceso la orden correctamente\")}else{Ext.Msg.alert(\"Orden No Procesada\",\"No se proceso la orden correctamente\")}}})},muestraFacturasPendiente",608678,32,"enu();a.push({xtype:\"facturascontainer\",title:b.titulo})},aplicaPago:function(){var e=this,b=e.getMenu(),c,d=0,a=b.getActiveItem().down(\"facturaslist\").getSelection();for(c=0;c<a.length;c++){d+=a[c].data.saldo}e.aPagar=d;b.push({xtype:\"formasdepagolist\",title:e.titulo})},muestraCobranza:function(e,c,f,b){var d=this,a=d.getMenu(),g=b.get(\"title\");a.push({xtype:\"totalapagarcontainer\",title:d.titulo});Ext.Msg.prompt(g,\"Ingrese el monto a pagar:\",function(k,j){if(k==\"ok\"){var h=Ext.getStore(\"Totales\");h.add({tipo:g,monto:j});d.pagado=0;console.log(d.pagado);h.each(function(l){d.pagado+=parseFloat(l.get(\"monto\"))});d.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:d.pagado});d.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:d.aPagar-d.pagado})}else{}});d.getTotales().down(\"#aCobrar\").setItems({xtype:\"container\",html:d.aPagar});d.getTotales().down(\"#pagado\").setItems({xtype:\"container\",html:d.pagado});d.getTotales().down(\"#pendiente\").setItems({xtype:\"container\",html:d.aPagar-d.pagado})},onSeleccionarTransacc",361011,33,"Menu();Ext.data.JsonP.request({url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaiMobile\",params:{CodigoUsuario:localStorage.getItem(\"CodigoUsuario\"),CodigoSociedad:localStorage.getItem(\"CodigoSociedad\"),CodigoDispositivo:localStorage.getItem(\"CodigoDispositivo\"),Token:localStorage.getItem(\"Token\"),Criterio:2},callbackKey:\"callback\",success:function(c){b.getMain().setActiveItem(2);b",612682,55,"b.titulo);b",612748,67,".actualizarTotales();b.getPartidaContainer().down(\"list\").emptyTextCmp.show();var d=b.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#cliente_id\"),e=b.getPartidaContainer().down(\"list\").getItems().getAt(1).getInnerHtmlElement().down(\"#codigo_id\");console.log(d);d.setText(\"Transacci\ufffff\ufffffn: Orden de Venta\");e.setText(\"Codigo de Dispositivo: \"+b.CodigoUsuario);e.setText(\"Nombre de Dispositivo:: \"+b.CodigoUsuario)}})},actualizarTotales:function(",608914,38,".getData().items,e=0,a=0,c=0;Ext.Array.forEach(b,function(g,f){e+=g.get(\"Precio\");a+=g.get(\"descuento\");c+=g.get(\"precioConDescuento\")});d.getOrdenContainer().down(\"#descuento\").setItems({xtype:\"container\",html:a});d.getOrdenContainer().down(\"#subtotal\").setItems({xtype:\"container\",html:parseFloat(e).toFixed(2)});d.getOrdenContainer().down(\"#total\").setItems({xtype:\"container\",html:parseFloat(c).toFixed(2)})",605462,32,"Phone",605500,40,613937,948,"Telefono\",type:\"string\"},{name:\"Correo\",type:\"string\"},{name:\"ListaPrecios\",type:\"string\"},{name:\"LimiteCredito\",type:\"string\"},{name:\"S",615017,103,"Imobile.core",618784,41,"Cliente\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Socio/ObtenerListaSociosiMobile\",type:\"jsonp",621320,59,"Data\"},extraParams:{format:\"json\"}}",618176,201,"float\",defaultValue:0},{name:\"P",620316,260,",{name:\"DesplegarEnPanel\",type:\"boolean\"",618701,171,"A010",618877,56,"DesplegarEnPanel:true,Precio:3.5,descuento:",619006,45,"$",619056,42,"3\",NombreArticulo:\"Producto 2\",DesplegarEnPanel:false,Precio:13.5,descuento:",619205,45,"$",619255,42,"2\",NombreArticulo:\"Producto 3\",DesplegarEnPanel:true,Precio:13.5,descuento:",619403,45,"$",619453,73,"DesplegarEnPanel:false,Precio:11.87,descuento:",619601,45,"$",619453,42,619693,32,"DesplegarEnPanel:true,Precio:17.7,descuento:",619996,46,"$",619849,74,"DesplegarEnPanel:true,Precio:16.5,descuento:0",619995,47,"$",620047,255,"float\"},{name:\"P",620316,932,621386,412,"proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Catalogos/ObtenerListaMonedasiMobile\",type:\"jsonp",621320,59,"Data\"}}}});Ext.define(\"Imobile.model.Factur",621548,72,"saldo\",type:\"float\"},{name:\"fecha\",type:\"string\"},{name:\"vencimiento",618715,47,"Factura",621183,55,"Factura\",autoLoad:true,data:[{id:\"0001\",fecha:\"23-May-2014\",saldo:10000,vencimiento:\"12-Dic-2014\"},{id:\"0002\",fecha:\"12-Abr-2014\",saldo:20000,vencimiento:\"14-Jun-2014\"},{id:\"0003\",fecha:\"28-Ene-2014\",saldo:30000,vencimiento:\"23-Jul-2014\"},{id:\"0004\",fecha:\"30-Mar-2013\",saldo:40000,vencimiento:\"13-Ago-2014\"},{id:\"0005\",fecha:\"23-Oct-2013\",saldo:50000,vencimiento:\"15-Dic-2014\"",618174,32,"Total",614717,71,"tipo\",type:\"string\"},{name:\"monto\",type:\"double",620574,33,"Total",621182,56,"Total",621498,45,"Transaccion",614717,48,"Fol",620184,32,"Cliente\",type:\"string\"},{name:\"NombreCliente\",type:\"string\"},{name:\"TipoTransaccion\",type:\"in",620573,34,"Transa",621177,61,"Transaccion\",proxy:{url:\"http://25.15.241.121:88/iMobile/COK1_CL_Consultas/RegresarOrdenVentaAbiertaiMobile\",type:\"jsonp",621320,59,"Data\"}}",622050,145,",\"Facturas\",\"Totales\",\"Transaccione",622193,766]